{"version":3,"file":"geoplatform.client.js","sources":["../../src/http/jq.js","../../src/http/ng.js","../../src/http/node.js","../../src/shared/types.js","../../src/services/item.js","../../src/services/dataset.js","../../src/services/map.js","../../src/services/layer.js","../../src/services/service.js","../../src/services/gallery.js","../../src/services/utils.js","../../src/services/agol.js","../../src/shared/parameters.js","../../src/shared/kg-query.js","../../src/services/kg.js","../../src/shared/classifiers.js","../../src/shared/query.js","../../src/shared/query-factory.js","../../src/services/factory.js","../../src/shared/config.js"],"sourcesContent":["\nimport Q from 'q';\n\nclass JQueryHttpClient {\n\n    /**\n     * @param {integer} options.timeout\n     * @param {string} options.token - the bearer token or a function to retrieve it\n     */\n    constructor(options) {\n        options = options || {};\n        this.setTimeout(options.timeout||10000);\n        this.setAuthToken(options.token);\n    }\n\n    setTimeout(timeout) {\n        this.timeout = timeout;\n    }\n\n    /**\n     * @param {string|Function} arg - specify the bearer token or a function to retrieve it\n     */\n    setAuthToken(arg) {\n        if(arg && typeof(arg) === 'string')\n            this.token = function() { return arg; };\n        else if(arg && typeof(arg) === 'function')\n            this.token = arg;\n        //else do nothing\n    }\n\n    createRequestOpts(options) {\n\n        let opts = {\n            method: options.method,\n            url: options.url,\n            timeout: options.timeout || this.timeout\n        };\n\n        if(options.json === true)\n            opts.dataType = 'json';\n\n        if(options.params) {\n            opts.data = options.params;\n            opts.processData = true;\n        }\n\n        if(options.data) {\n            opts.data = options.data;\n            opts.processData = options.processData || false;\n            opts.contentType = 'application/json';\n        }\n\n        //set authorization header if one was provided\n        if(this.token) {\n            let token = this.token();\n            if(token) {\n                opts.headers = opts.headers || {};\n                opts.headers.Authorization = 'Bearer ' + token;\n            }\n        }\n\n        //copy over user-supplied options\n        if(options.options) {\n            for(let o in options.options) {\n                if(options.options.hasOwnProperty(o)) {\n                    opts[o] = options.options[o];\n                }\n            }\n        }\n\n        return opts;\n    }\n\n\n    execute(opts) {\n\n        if(typeof(jQuery) === 'undefined') {\n            throw new Error(\"jQuery is not available. Ensure it is included in your application\");\n        }\n        let d = Q.defer();\n        opts.success = function(data) { d.resolve(data); };\n        opts.error = function(xhr, status, message) { d.reject(new Error(message)); };\n        jQuery.ajax(opts);\n        return d.promise;\n    }\n\n}\n\nexport default JQueryHttpClient;\n","\nimport Q from 'q';\n\nclass NGHttpClient {\n\n    /**\n     * @param {integer} options.timeout\n     * @param {string} options.token - the bearer token or a function to retrieve it\n     * @param {Object} options.$http - angular $http service instance\n     */\n    constructor(options) {\n        if(typeof(angular) === 'undefined')\n            throw new Error(\"Angular not defined\");\n\n        options = options || {};\n        this.setTimeout(options.timeout||10000);\n        this.setAuthToken(options.token);\n\n        if(options.$http)\n            this.$http = options.$http;\n\n    }\n\n    setTimeout(timeout) {\n        this.timeout = timeout;\n    }\n\n    /**\n     * @param {string|Function} arg - specify the bearer token or a function to retrieve it\n     */\n    setAuthToken(arg) {\n        if(arg && typeof(arg) === 'string')\n            this.token = function() { return arg; };\n        else if(arg && typeof(arg) === 'function')\n            this.token = arg;\n        //else do nothing\n    }\n\n    createRequestOpts(options) {\n\n        let opts = {\n            method: options.method,\n            url: options.url,\n            timeout: options.timeout || this.timeout\n        };\n\n        if(options.json === true)\n            opts.dataType = 'json';\n\n        if(options.params) {\n            opts.params = options.params;\n        }\n\n        if(options.data) {\n            opts.data = options.data;\n        }\n\n        //set authorization token if one was provided\n        if(this.token) {\n            let token = this.token();\n            if(token) {\n                opts.headers = opts.headers || {};\n                opts.headers.Authorization = 'Bearer ' + token;\n                opts.useXDomain = true;\n            }\n        }\n\n        //copy over user-supplied options\n        if(options.options) {\n            for(let o in options.options) {\n                if(options.options.hasOwnProperty(o)) {\n                    opts[o] = options.options[o];\n                }\n            }\n        }\n\n        return opts;\n    }\n\n    execute(opts) {\n\n        if(typeof(angular) === 'undefined')\n            throw new Error(\"Angular is not defined, ensure you have included it as a dependency in your application\");\n\n        let $http = this.$http || angular.injector(['ng']).get('$http');\n        return Q.resolve( $http )\n        .then($http => {\n            if(typeof($http) === 'undefined')\n                throw new Error(\"Angular $http not resolved\");\n\n            // console.log(opts);\n            return $http(opts);\n        })\n        .then(response=>response.data)\n        .catch(response=>Q.reject(response.data));\n    }\n\n}\n\nexport default NGHttpClient;\n","\nimport Q from 'q';\n\nclass NodeHttpClient {\n\n    /**\n     * @param {integer} options.timeout\n     * @param {string} options.token - the bearer token or a function to retrieve it\n     */\n    constructor(options) {\n        options = options || {};\n        this.setTimeout(options.timeout||10000);\n        this.setAuthToken(options.token);\n    }\n\n    setTimeout(timeout) {\n        this.timeout = timeout;\n    }\n\n    /**\n     * @param {string|Function} arg - specify the bearer token or a function to retrieve it\n     */\n    setAuthToken(arg) {\n        if(arg && typeof(arg) === 'string')\n            this.token = function() { return arg; };\n        else if(arg && typeof(arg) === 'function')\n            this.token = arg;\n        //else do nothing\n    }\n\n    createRequestOpts(options) {\n\n        let opts = {\n            method: options.method,\n            url: options.url,\n            json: false !== options.json,\n            timeout: options.timeout || this.timeout\n        };\n\n        if(options.params) {\n            opts.qs = options.params;\n        }\n\n        if(options.file) {\n            const fs = require('fs');\n            if(!fs) throw new Error(\"Module 'fs' not available\");\n            opts.formData = {\n                file: {\n                    value:  fs.createReadStream(options.file.path),\n                    options: {\n                        filename: options.file.originalFilename\n                    }\n                }\n            };\n            Object.assign(opts.formData, options.data||{});\n\n        } else if(options.data) {\n            if(options.formData) {\n                opts.formData = options.data;\n            } else {\n                opts.body = options.data;\n            }\n        }\n\n        //set authorization header if one was provided\n        if(this.token) {\n            let token = this.token();\n            if(token) {\n                opts.auth = { 'bearer': token };\n            }\n        }\n\n        //copy over user-supplied options\n        if(options.options) {\n            for(let o in options.options) {\n                if(options.options.hasOwnProperty(o)) {\n                    opts[o] = options.options[o];\n                }\n            }\n        }\n\n        // console.log(JSON.stringify(opts));\n\n        return opts;\n    }\n\n\n\n    /**\n     *\n     */\n    execute(options) {\n        let deferred = Q.defer();\n\n        const request = require('request');\n        if(!request) {\n            throw new Error(\"Module 'request' not available\");\n        }\n        // require('request-debug')(request);\n\n        request(options, (error, response, body) => {\n            this.checkAndHandleError(error, response)\n            .then( () =>  {\n                if(options.json === false)\n                    deferred.resolve( response );\n                else\n                    deferred.resolve( body );\n            })\n            .catch( e => deferred.reject(e) );\n        });\n        return deferred.promise;\n    }\n\n\n    /**\n     *\n     */\n    checkAndHandleError (error, response) {\n\n        let props = {\n            message: null,\n            error: null,    //error type\n            status: 200\n        };\n\n        if(error) {\n            // Logger.debug(\"Error generated by request library: \" + error.code);\n\n            if(error.code === 'ETIMEDOUT' || error.code === 'ESOCKETTIMEDOUT') {\n\n                props.status = 500;\n                props.error = \"Connection Timeout\";\n                props.message = \"The response from the service took too long to read\";\n\n                if(error.connect === true) {\n                    props.message = \"Unable to establish a connection to the service\";\n                }\n\n            } else {\n                return Q.reject(error);\n            }\n\n        } else if(response.statusCode < 200 || response.statusCode > 204) {\n\n            // Logger.debug('Error returned by remote endpoint (' + response.statusCode + ')');\n            // Logger.debug(JSON.stringify(response));\n\n            props.status = response.statusCode;\n\n            if(response.body && typeof(response.body) === 'object') {\n                props = response.body;\n                props.status = props.status || response.statusCode;\n                props.message = props.message || \"An error occurred communicating with service\";\n\n                if(response.statusCode === 409) {\n                    let sidx = response.body.message.indexOf(\" \");\n                    let eidx = response.body.message.indexOf(' already exists');\n                    if(sidx >= 0 && eidx > sidx) {\n                        props.item = response.body.message.substring(sidx+1, eidx);\n                    }\n                }\n\n            } else {\n\n                switch(response.statusCode) {\n                    case 404 :\n                        props.error = \"Not Found\";\n                        props.message = response.request.uri.pathname + \" cannot be found\";\n                        break;\n                    case 401 :\n                        props.error = \"Unauthenticated\";\n                        props.message = \"You are not authenticated\";\n                        break;\n                    case 403 :\n                        props.error = \"Unauthorized\";\n                        props.message = \"You are not authorized to access \" + response.request.uri.pathname;\n                        break;\n                    case 409 :\n                        props.error = \"Conflict\";\n                        props.message = \"Item already exists\";\n\n                        // pattern received is: { ..., message: 'Resource <identifier> already exists', ... }\n                        try {\n                            let json = JSON.parse(response.body);\n                            let sidx = json.message.indexOf(\" \");\n                            let eidx = json.message.indexOf(' already exists');\n                            if(sidx >= 0 && eidx > sidx) {\n                                props.item = json.message.substring(sidx+1, eidx);\n                            }\n                        } catch( e ) {\n                            message += '.  Unable to extract existing identifier from service response';\n                        }\n                        break;\n\n                    default:\n\n                        try {\n                            let json = JSON.parse(response.body);\n                            props = json;\n                            props.status = response.statusCode;\n                            // Logger.debug(\"PARSED ERROR: \" + JSON.stringify(props));\n\n                        } catch (e) {\n                            props.error = \"Server Error\";\n                            props.message = response.body;\n                            // Logger.debug(\"DEFAULTED ERROR: \" + JSON.stringify(props));\n                        }\n                }\n\n            }\n\n        }\n\n        if( props.status < 200 || props.status > 204 ) {\n\n            props.error = props.error || \"Server Error\";\n            props.status = props.status || response.statusCode;\n            props.message = props.message || \"An error occurred communicating with service\";\n\n            let err = new Error(props.message);\n            Object.assign(err, props);\n\n            // Logger.debug(\"UTILS.checkAndHandleError : \" + err);\n            // Logger.debug(\"UTILS.checkAndHandleError : \" + JSON.stringify(err));\n            // Logger.debug(\"UTILS.checkAndHandleError : \" + err.message);\n            return Q.reject(err);\n        }\n\n        return Q.resolve();\n    }\n\n}\n\n\nexport default NodeHttpClient;\n","\n\nexport default {\n    DATASET         : \"dcat:Dataset\",\n    SERVICE         : \"regp:Service\",\n    LAYER           : \"Layer\",\n    MAP             : \"Map\",\n    GALLERY         : \"Gallery\",\n    ORGANIZATION    : \"org:Organization\",\n    COMMUNITY       : 'Community',\n    CONCEPT         : \"skos:Concept\",\n    CONCEPT_SCHEME  : \"skos:ConceptScheme\",\n    STANDARD        : 'dct:Standard'\n};\n","\nimport Q from 'q';\n\n\n/**\n * ItemService\n * service for working with the GeoPlatform API to\n * retrieve and manipulate items.\n *\n * Ex Searching Items\n *      let params = { q: 'test' };\n *      itemService.search(params).then(response=>{\n *          console.log(response.results.length + \" of \" + response.totalResults);\n *      }).catch(e=>{...});\n *\n * Ex Fetch Item:\n *      itemService.get(itemId).then(item=>{...}).catch(e=>{...});\n *\n * Ex Saving Item:\n *      itemService.save(item).then(item=>{...}).catch(e=>{...});\n *\n * Ex Deleting Item:\n *      itemService.remove(itemId).then(()=>{...}).catch(e=>{...});\n *\n * Ex Patching Item:\n *      itemService.patch(itemId,patch).then(item=>{...}).catch(e=>{...});\n *\n */\nclass ItemService {\n\n    constructor(url, httpClient) {\n        this.setUrl(url);\n        this.client = httpClient;\n        this.timeout = 10000;\n        this.httpMethods = [\"GET\", \"POST\", \"PUT\", \"DELETE\", \"PATCH\"];\n    }\n\n    setUrl(baseUrl) {\n        this.apiBase = baseUrl;\n        this.baseUrl = baseUrl + '/api/items';\n    }\n\n\n    /**\n     * @param {string} id - identifier of item to fetch\n     * @param {Object} options - optional set of request options to apply to xhr request\n     * @return {Promise} resolving Item object or an error\n     */\n    get (id, options) {\n\n        return Q.resolve( id )\n        .then( id => {\n            let opts = this.buildRequest({\n                method:\"GET\", url:this.baseUrl + '/' + id, options:options\n            });\n            return this.execute(opts);\n        })\n        .catch(e => {\n            let err = new Error(`ItemService.get() - Error fetching item ${id}: ${e.message}`);\n            return Q.reject(err);\n        });\n    }\n\n    /**\n     * @param {Object} itemObj - item to create or update\n     * @param {Object} options - optional set of request options to apply to xhr request\n     * @return {Promise} resolving Item object or an error\n     */\n    save (itemObj, options) {\n\n        return Q.resolve( itemObj )\n        .then( item => {\n\n            let method = 'POST',\n                url = this.baseUrl;\n            if(item.id) {\n                method = \"PUT\";\n                url += '/' + item.id;\n            } else {\n                //if item is being created and has no URI already defined\n                // attempt to create one using the API's method for doing so\n                // and then attempt the actual item creation\n                if(!item.uri) {\n                    return this.getUri(item, options)\n                    .then( uri => {\n                        item.uri = uri;\n                        let opts = this.buildRequest({method:method, url:url, data:item, options:options});\n                        return this.execute(opts);\n                    });\n                }\n            }\n\n            let opts = this.buildRequest({method:method, url:url, data:item, options:options});\n            return this.execute(opts);\n\n        })\n        .catch(e => {\n            let err = new Error(`ItemService.save() - Error saving item: ${e.message}`);\n            return Q.reject(err);\n        });\n    }\n\n    /**\n     * @param {string} id - identifier of item to delete\n     * @param {Object} options - optional set of request options to apply to xhr request\n     * @return {Promise} resolving true if successful or an error\n     */\n    remove (id, options) {\n\n        return Q.resolve( this.baseUrl + '/' + id )\n        .then( url => {\n            let opts = this.buildRequest({\n                method:\"DELETE\", url: url, options: options\n            });\n            return this.execute(opts);\n        })\n        .then(response => true)\n        .catch(e => {\n            let err = new Error(`ItemService.remove() - Error deleting item ${id}: ${e.message}`);\n            return Q.reject(err);\n        });\n    }\n\n    /**\n     * @param {string} id - identifier of item to patch\n     * @param {Object} patch - HTTP-PATCH compliant set of properties to patch\n     * @param {Object} options - optional set of request options to apply to xhr request\n     * @return {Promise} resolving Item object or an error\n     */\n    patch (id, patch, options) {\n\n        return Q.resolve( this.baseUrl + '/' + id )\n        .then( url => {\n            let opts = this.buildRequest({\n                method: \"PATCH\", url: url, data: patch, options: options\n            });\n            return this.execute(opts);\n        })\n        .catch(e => {\n            let err = new Error(`ItemService.patch() - Error patching item ${id}: ${e.message}`);\n            return Q.reject(err);\n        });\n    }\n\n    /**\n     * @param {Object} arg - either JS object of query parameters or GeoPlatform.Query instance\n     * @param {Object} options - optional set of request options to apply to xhr request\n     * @return {Promise} resolving search results\n     */\n    search (arg, options) {\n\n        return Q.resolve( arg )\n        .then( params => {\n\n            if(params && typeof(params.getQuery) !== 'undefined') {\n                //if passed a GeoPlatform.Query object,\n                // convert to parameters object\n                params = params.getQuery();\n            }\n            let opts = this.buildRequest({\n                method:\"GET\", url: this.baseUrl, params: params, options: options\n            });\n            return this.execute(opts);\n        })\n        .catch(e => {\n            let err = new Error(`ItemService.search() - Error searching items: ${e.message}`);\n            return Q.reject(err);\n        });\n    }\n\n\n    /**\n     *\n     * @param {string} arg - URL to metadata document or File to upload\n     * @param {string} format - metadata format of specified document\n     * @return {Promise} resolving GeoPlatform Item\n     */\n    import (arg, format, options) {\n\n        return Q.resolve( true )\n        .then( () => {\n            if(arg===null || arg === undefined) {\n                throw new Error(\"Must provide a valid URL or File\");\n            }\n            let isFile = typeof(arg) !== 'string';\n            let ro = {\n                method:\"POST\",\n                url: this.apiBase + '/api/import',\n                processData: true,  //for jQuery\n                formData: true,     //for Node (RequestJS)\n                options: options\n            };\n            if(isFile) {\n                ro.file = arg;\n                ro.data = { format: format };\n            } else {\n                ro.formData = false;    //must be false for data to not be multi-part formdata\n                ro.data = { url: arg, format: format };\n            }\n            let opts = this.buildRequest(ro);\n            return this.execute(opts);\n        })\n        .catch( e => {\n            let err = new Error(`ItemService.import() - Error importing item: ${e.message}`);\n            if(e.status === 409 || ~e.message.indexOf('Item already exists')) err.status = 409;\n            if(e.item) err.item = e.item;\n            return Q.reject(err);\n        });\n    }\n\n\n\n    /**\n     * @param {string} id - identifier of the item to export\n     * @param {format} format - string mime type to export\n     * @return {Promise} resolving HTTP response object for enabling attachment downloading\n     */\n    export (id, format, options) {\n\n        return Q.resolve( true )\n        .then( () => {\n            let url = this.baseUrl + '/' + id + '/export';\n            let opts = this.buildRequest({\n                method: \"GET\", url: url,\n                params: {format:format},\n                json: false,\n                options: options\n            });\n            return this.execute(opts);\n        })\n        .catch( e => {\n            let err = new Error(`ItemService.export() - Error exporting item: ${e.message}`);\n            return Q.reject(err);\n        });\n    }\n\n\n    /**\n     * @param {Object} object - GP object definition to generate a URI for\n     * @param {Object} options - optional request options\n     * @return {Promise} resolving string URI\n     */\n    getUri (object, options) {\n\n        return Q.resolve( object )\n        .then( obj => {\n            if(!obj || !obj.type)\n                throw new Error(\"Must provide an object with a type property\");\n            let url = this.apiBase + '/api/utils/uri';\n            let opts = this.buildRequest({\n                method: \"POST\", url: url, data: obj, options: options\n            });\n            return this.execute(opts);\n        })\n        .catch( e => {\n            let err = new Error(`ItemService.getUri() - Error getting URI for item: ${e.message}`);\n            return Q.reject(err);\n        });\n\n    }\n\n\n\n\n\n\n\n    /* ----------------------------------------------------------- */\n\n    /**\n     * @param {string} method - one of \"GET\", \"POST\", \"PUT\", \"DELETE\", \"PATCH\"\n     * @param {string} url - destination of xhr request\n     * @param {Object} params - object to be sent with request as query parameters\n     * @param {Object} data - object to be sent with request as body\n     * @param {Object} options - optional object defining request options\n     * @return {Object} request options for xhr\n     */\n    buildRequest (options) {\n\n        if(this.httpMethods.indexOf(options.method)<0)\n            throw new Error(`Unsupported HTTP method ${options.method}`);\n\n        if(!options.url)\n            throw new Error(`Must specify a URL for HTTP requests`);\n\n        options.timeout = this.timeout;\n\n        let opts = this.createRequestOpts(options);\n\n        return opts;\n    }\n\n    createRequestOpts(options) {\n        return this.client.createRequestOpts(options);\n    }\n\n    execute(opts) {\n        return this.client.execute(opts);\n    }\n\n}\n\nexport default ItemService;\n","\nimport ItemService from './item';\n\n/**\n * GeoPlatform Map service\n * service for working with the GeoPlatform API to\n * retrieve and manipulate map objects.\n *\n * @see GeoPlatform.ItemService\n */\n\nclass DatasetService extends ItemService {\n\n    constructor(url, httpClient) {\n        super(url, httpClient);\n    }\n\n    setUrl(baseUrl) {\n        super.setUrl(baseUrl);\n        this.baseUrl = baseUrl + '/api/datasets';\n    }\n\n\n}\n\nexport default DatasetService;\n","\nimport Q from 'q';\nimport ItemService from './item';\n\n/**\n * GeoPlatform Map service\n * service for working with the GeoPlatform API to\n * retrieve and manipulate map objects.\n *\n * @see GeoPlatform.ItemService\n */\n\nclass MapService extends ItemService {\n\n    constructor(url, httpClient) {\n        super(url, httpClient);\n    }\n\n    setUrl(baseUrl) {\n        super.setUrl(baseUrl);\n        this.baseUrl = baseUrl + '/api/maps';\n    }\n\n\n}\n\nexport default MapService;\n","\n\nimport Q from 'q';\nimport ItemService from './item';\n\n/**\n * GeoPlatform Map service\n * service for working with the GeoPlatform API to\n * retrieve and manipulate map objects.\n *\n * @see GeoPlatform.ItemService\n */\n\nclass LayerService extends ItemService {\n\n    constructor(url, httpClient) {\n        super(url, httpClient);\n    }\n\n    setUrl(baseUrl) {\n        super.setUrl(baseUrl);\n        this.baseUrl = baseUrl + '/api/layers';\n    }\n\n    /**\n     * @param {Object} options - optional set of request options to apply to xhr request\n     * @return {Promise} resolving style JSON object\n     */\n    style (options) {\n        return Q.resolve( true )\n        .then( () => {\n\n            let url = this.baseUrl + '/' + id + '/style';\n            let opts = this.buildRequest({\n                method:\"GET\", url:url, options:options\n            });\n            return this.execute(opts);\n        })\n        .catch(e => {\n            let err = new Error(`LayerService.style() - Error fetching style: ${e.message}`);\n            return Q.reject(err);\n        });\n    }\n\n    /**\n     * @param {string} id - GeoPlatform Layer identifier\n     * @param {Object} req identifying extent, x, y\n     * @param {Object} options - optional set of request options to apply to xhr request\n     * @return {Promise} resolving feature JSON object\n     */\n    describe( id, req, options ) {\n\n        return Q.resolve( req )\n        .then( (req) => {\n\n            if(!req) {\n                throw new Error(\"Must provide describe parameters to use\");\n            }\n\n            let keys = ['bbox', 'height', 'width', 'x', 'y'];\n            let missing = keys.find(key => !req[key]);\n            if(missing) {\n                throw new Error(`Must specify ${missing} in describe req`);\n            }\n\n            let params = {\n                srs         : 'EPSG:4326',\n                bbox        : req.bbox,\n                height      : req.height,\n                width       : req.width,\n                info_format : 'text/xml',\n                x           : req.x,\n                y           : req.y,\n                i           : req.x, //WMS 1.3.0\n                j           : req.y  //WMS 1.3.0\n            };\n\n            let url = this.baseUrl + '/' + id + '/describe';\n            let opts = this.buildRequest({\n                method:\"GET\", url:url, params:params, options:options\n            });\n            return this.execute(opts);\n        })\n        .catch(e => {\n            let err = new Error(`LayerService.describe() -\n                Error describing layer feature: ${e.message}`);\n            return Q.reject(err);\n        });\n    }\n\n    /**\n     * @param {string} id - GeoPlatform Layer identifier\n     * @param {Object} params describing layer request to validate\n     * @param {Object} options - optional set of request options to apply to xhr request\n     * @return {Promise} resolving empty if successful or a message if failed\n     */\n    validate(id, params, options) {\n\n        return Q.resolve( params )\n        .then( params => {\n\n            if(!params) {\n                throw new Error(\"Must provide parameters to use in layer validation\");\n            }\n\n            let url = this.baseUrl + '/' + id + '/validate';\n            let opts = this.buildRequest({\n                method:\"GET\", url:url, params:params, options:options\n            });\n            return this.execute(opts);\n        })\n        .catch(e => {\n            let err = new Error(`LayerService.describe() -\n                Error describing layer feature: ${e.message}`);\n            return Q.reject(err);\n        });\n    }\n\n}\n\nexport default LayerService;\n","\n\nimport Q from 'q';\nimport ItemTypes from '../shared/types';\nimport ItemService from './item';\n\n/**\n * GeoPlatform Service service\n * service for working with the GeoPlatform API to\n * retrieve and manipulate service objects.\n *\n * @see ItemService\n */\n\nclass ServiceService extends ItemService {\n\n    constructor(url, httpClient) {\n        super(url, httpClient);\n    }\n\n    setUrl(baseUrl) {\n        super.setUrl(baseUrl);\n        this.baseUrl = baseUrl + '/api/services';\n    }\n\n\n    /**\n     * Fetch metadata from the specified GeoPlatform Service's\n     * web-accessible implementation using either GetCapabilities\n     * or ESRI documentInfo.\n     * @param {Object} service - GeoPlatform Service object\n     * @param {Object} options - optional set of request options to apply to xhr request\n     * @return {Promise} resolving service metadata\n     */\n    about( service, options ) {\n\n        return Q.resolve( service )\n        .then( svc => {\n            if(!svc)\n                throw new Error(\"Must provide service to get metadata about\");\n            let opts = this.buildRequest({\n                method:'POST', url:this.baseUrl + '/about', data:svc, options:options\n            });\n            return this.execute(opts);\n        })\n        .catch(e => {\n            let err = new Error(`ServiceService.about() -\n                Error describing service: ${e.message}`);\n            return Q.reject(err);\n        });\n    }\n\n\n\n    /**\n     * @param {Object} options - optional set of request options to apply to request\n     * @return {Promise} resolving service types\n     */\n    types (options) {\n\n        let query = new Query()\n        .types(ItemTypes.STANDARD)\n        .resourceTypes('ServiceType')\n        .pageSize(50)\n        .getQuery();\n\n        return Q.resolve( query )\n        .then( (params) => {\n            let url = this.apiBase + '/api/items';\n            let opts = this.buildRequest({\n                method:'GET', url:url, params:params, options:options\n            });\n            return this.execute(opts);\n        })\n        .then(response => response.results)\n        .catch(e => {\n            let err = new Error(`ServiceService.types() -\n                Error fetching service types: ${e.message}`);\n            return Q.reject(err);\n        });\n    }\n\n\n    /**\n     * @param {Object} service - GP Service definition\n     * @param {Object} options - optional set of request options to apply to request\n     * @return {Promise} resolving imported service\n     */\n    import (service, options) {\n\n        return Q.resolve( service )\n        .then( svc => {\n            let url = this.baseUrl + '/import';\n            let opts = this.buildRequest({\n                method:'POST', url:url, data:svc, options:options\n            });\n            return this.execute(opts);\n        })\n        .catch(e => {\n            let err = new Error(`ServiceService.import() -\n                Error importing service: ${e.message}`);\n            return Q.reject(err);\n        });\n    }\n\n\n    /**\n     * @param {string} id - identifier of GP service to harvest layers for\n     * @param {Object} options - optional set of request options to apply to request\n     * @return {Promise} resolving service layers\n     */\n    harvest (id, options) {\n\n        return Q.resolve( id )\n        .then( id => {\n            let url = this.baseUrl + '/' + id + '/harvest';\n            let opts = this.buildRequest({\n                method:'GET', url:url, options:options\n            });\n            return this.execute(opts);\n        })\n        .catch(e => {\n            let err = new Error(`ServiceService.harvest() -\n                Error harvesting layers from service: ${e.message}`);\n            return Q.reject(err);\n        });\n\n    }\n\n    /**\n     * @param {string} id - identifier of GP service to live test\n     * @param {Object} options - optional set of request options to apply to request\n     * @return {Promise} resolving service statistics\n     */\n    liveTest (id, options) {\n\n        return Q.resolve( id )\n        .then( id => {\n            let url = this.baseUrl + '/' + id + '/test';\n            let opts = this.buildRequest({\n                method:'GET', url:url, options:options\n            });\n            return this.execute(opts);\n        })\n        .catch(e => {\n            let err = new Error(`ServiceService.liveTest() -\n                Error testing service: ${e.message}`);\n            return Q.reject(err);\n        });\n    }\n\n    /**\n     * @param {string} id - identifier of GP service to fetch statistics about\n     * @param {Object} options - optional set of request options to apply to request\n     * @return {Promise} resolving service statistics\n     */\n    statistics (id, options) {\n        return Q.resolve( id )\n        .then( id => {\n            let url = this.baseUrl + '/' + id + '/statistics';\n            let opts = this.buildRequest({\n                method:'GET', url:url, options:options\n            });\n            return this.execute(opts);\n        })\n        .catch(e => {\n            let err = new Error(`ServiceService.statistics() -\n                Error getting service statistics: ${e.message}`);\n            return Q.reject(err);\n        });\n    }\n\n}\n\nexport default ServiceService;\n","\nimport Q from 'q';\nimport ItemService from './item';\n\n/**\n * GeoPlatform Map service\n * service for working with the GeoPlatform API to\n * retrieve and manipulate map objects.\n *\n * @see GeoPlatform.ItemService\n */\n\nclass GalleryService extends ItemService {\n\n    constructor(url, httpClient) {\n        super(url, httpClient);\n    }\n\n    setUrl(baseUrl) {\n        super.setUrl(baseUrl);\n        this.baseUrl = baseUrl + '/api/galleries';\n    }\n\n    addItem (galleryId, itemObj, options) {\n        return Q.resolve( true )\n        .then( () => {\n            let url = this.baseUrl + '/' + galleryId + '/items';\n            let opts = this.buildRequest({\n                method:'POST', url:url, data: itemObj, options:options\n            });\n            return this.execute(opts);\n        })\n        .catch(e => {\n            let err = new Error(\"GalleryService.addItem() - Error adding item: \" + e.message);\n            return Q.reject(err);\n        });\n    }\n\n    removeItem( galleryId, itemId, options) {\n        return Q.resolve( this.baseUrl + '/' + galleryId + '/items/' + itemId )\n        .then( url => {\n            let opts = this.buildRequest({\n                method:'DELETE', url:url, options:options\n            });\n            return this.execute(opts);\n        })\n        .then(response=>true)\n        .catch(e => {\n            let err = new Error(\"GalleryService.addItem() - Error adding item: \" + e.message);\n            return Q.reject(err);\n        });\n    }\n\n}\n\nexport default GalleryService;\n","\n\nimport Q from 'q';\n\nclass UtilsService {\n\n    constructor(url, httpClient) {\n        this.setUrl(url);\n        this.client = httpClient;\n        this.timeout = 10000;\n        this.httpMethods = [\"GET\", \"POST\", \"PUT\", \"DELETE\", \"PATCH\"];\n    }\n\n    setUrl(baseUrl) {\n        this.baseUrl = baseUrl;\n    }\n\n\n    /**\n     * @param {string} property - optional capa property to specifically request\n     * @param {Object} query - optional query parameters to include with request\n     * @param {Object} options - optional config to send with http request\n     * @return {Promise} resolving capabilities object\n     */\n    capabilities (property, query, options) {\n\n        let url = this.baseUrl + '/api/capabilities';\n        if(property)\n            url += '/' + property;\n\n        return Q.resolve( url )\n        .then( (url) => {\n            let opts = this.buildRequest({\n                method:\"GET\", url:url, params:query||{}, options:options\n            });\n            return this.execute(opts);\n        })\n        .catch(e => {\n            let err = new Error(`UtilsService.capabilities() - Error getting capabilities: ${e.message}`);\n            return Q.reject(err);\n        });\n    }\n\n    /**\n     * @param {File} file\n     * @param {string} format\n     * @param {Object} options\n     * @return {Promise}\n     */\n    parseFile (file, format, options) {\n\n        var url = this.baseUrl + '/api/utils/parse';\n\n        return Q.resolve( url )\n        .then( url => {\n\n            let opts = this.buildRequest({\n                method:\"POST\",  url:url,\n                data: { format: format },\n                file: file,\n                formData: true,   //NodeJS (RequestJS)\n                options: options\n            });\n            return this.execute(opts);\n        })\n        .then( response => response )\n        .catch(e => {\n            let err = new Error(`UtilsService.parseFile() - Error parsing file: ${e.message}`);\n            return Q.reject(err);\n        });\n    }\n\n\n\n\n\n\n\n\n\n\n    /* ----------------------------------------------------------- */\n\n    /**\n     * @param {string} method - one of \"GET\", \"POST\", \"PUT\", \"DELETE\", \"PATCH\"\n     * @param {string} url - destination of xhr request\n     * @param {Object} params - object to be sent with request as query parameters\n     * @param {Object} data - object to be sent with request as body\n     * @param {Object} options - optional object defining request options\n     * @return {Object} request options for xhr\n     */\n    buildRequest (options) {\n\n        if(this.httpMethods.indexOf(options.method)<0)\n            throw new Error(`Unsupported HTTP method ${options.method}`);\n\n        if(!options.url)\n            throw new Error(`Must specify a URL for HTTP requests`);\n\n        options.timeout = this.timeout;\n\n        return this.createRequestOpts(options);\n    }\n\n    createRequestOpts(options) {\n        return this.client.createRequestOpts(options);\n    }\n\n    execute(opts) {\n        return this.client.execute(opts);\n    }\n\n}\n\nexport default UtilsService;\n","\n\nimport Q from 'q';\nimport ItemTypes from '../shared/types';\n\n\nclass AgolQuery {\n\n    constructor() {\n        this._query = {\n            page: 0,\n            size: 10\n        };\n    }\n\n    getQuery() {\n        let result = {};\n        for(let prop in this._query) {\n            let value = this._query[prop];\n            if(value !== null && typeof(value.push) !== 'undefined') {\n                value = value.join(',');\n            }\n            result[prop] = value;\n        }\n        return result;\n    }\n\n    // ---------------------------------------\n\n    q(value) { this.setQ(value); return this; }\n    setQ(value) { this._query.q = value; }\n    getQ() { return this._query.q; }\n\n    // ---------------------------------------\n\n    types(value) { this.setTypes(value); return this; }\n    setTypes(value) {\n        if(value && typeof(value.push) !== 'undefined')\n            value = value.join(',');\n        this._query.types = value;\n    }\n    getTypes() { return this._query.types; }\n\n    // ---------------------------------------\n\n    groups(value) { this.setGroups(value); return this; }\n    setGroups(value) {\n        if(value && typeof(value.push) !== 'undefined')\n            value = value.join(',');\n        this._query.groups = value;\n    }\n    getGroups() { return this._query.groups; }\n\n    // ---------------------------------------\n\n    orgs(value) { this.setOrgs(value); return this; }\n    setOrgs(value) {\n        if(value && typeof(value.push) !== 'undefined')\n            value = value.join(',');\n        this._query.orgs = value;\n    }\n    getOrgs() { return this._query.orgs; }\n\n    // ---------------------------------------\n\n    extent(value) { this.setExtent(value); return this; }\n    setExtent(value) { this._query.bbox = value; }\n    getExtent() { return this._query.bbox; }\n\n    // ---------------------------------------\n\n    /**\n     * @param {string} sort - form of <field>,<dir> or just field name\n     * @param {string} order - optional, either 'asc' or 'desc'\n     */\n    sort (sort, order) { this.setSort(sort, order); return this; }\n    /**\n     * @param {string} sort - form of <field>,<dir> or just field name\n     * @param {string} order - optional, either 'asc' or 'desc'\n     */\n     setSort(sort, order) {\n         order = (order && (order !== 'asc' || order !== 'desc')) ? 'desc' : order;\n         if(sort && sort.indexOf(',')<0)\n            sort = sort + ',' + order;\n         this._query.sort = sort;\n    }\n    getSort() { return this._query.sort; }\n    getSortField() { return this._query.sort.split(',')[0]; }\n    getSortOrder() { return this._query.sort.split(',')[1] === 'asc'; }\n\n\n    // -----------------------------------------------------------\n\n\n    /**\n     * @param {int} page - page of results to fetch\n     */\n    page (page) {\n        this.setPage(page);\n        return this;\n    }\n\n    setPage(page) {\n        if(isNaN(page) || page*1<0) return;\n        this._query.page = page*1;\n    }\n\n    getPage() {\n        return this._query.page;\n    }\n\n    nextPage() {\n        this.setPage(this._query.page+1);\n    }\n\n    previousPage() {\n        this.setPage(this._query.page-1);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    /**\n     * @param {int} size - page size to request\n     */\n    pageSize (size) {\n        this.setPageSize(size);\n        return this;\n    }\n\n    setPageSize (size) {\n        if(isNaN(size) || size*1<0) return;\n        this._query.size = size*1;\n    }\n\n    getPageSize() {\n        return this._query.size;\n    }\n\n}\n\n\n\n\nclass AgolService {\n\n\n\n    constructor(url, httpClient) {\n        this.setUrl(url);\n        this.client = httpClient;\n        this.timeout = 10000;\n        this.httpMethods = [\"GET\", \"POST\", \"PUT\", \"DELETE\", \"PATCH\"];\n    }\n\n    setUrl(baseUrl) {\n        this.baseUrl = baseUrl + '/api/agol/';\n    }\n\n\n\n\n    // -----------------------------------------------------------------------\n    // AGOL ORGS METHODS\n\n\n    /**\n     * @param {string} id - identifier of AGOL organization to fetch\n     * @param {Object} options - optional set of request options to apply to xhr request\n     * @return {Promise} resolving Item object or an error\n     */\n    getOrg (id, options) {\n\n        return Q.resolve( id )\n        .then( id => {\n            let opts = this.buildRequest({\n                method:\"GET\", url:this.baseUrl + '/orgs/' + id, options:options\n            });\n            return this.execute(opts);\n        })\n        .catch(e => {\n            let err = new Error(`AgolService.getOrg() - Error fetching org ${id}: ${e.message}`);\n            return Q.reject(err);\n        });\n    }\n\n    /**\n     * @param {Object} arg - either JS object of query parameters or Query instance\n     * @param {Object} options - optional set of request options to apply to xhr request\n     * @return {Promise} resolving search results\n     */\n    searchOrgs (arg, options) {\n\n        return Q.resolve( arg )\n        .then( params => {\n\n            if(params && typeof(params.getQuery) !== 'undefined') {\n                //if passed a GeoPlatform.Query object,\n                // convert to parameters object\n                params = params.getQuery();\n            }\n            let opts = this.buildRequest({\n                method:\"GET\", url: this.baseUrl + '/orgs', params: params, options: options\n            });\n            return this.execute(opts);\n        })\n        .catch(e => {\n            let err = new Error(`AgolService.searchOrgs() - Error searching orgs: ${e.message}`);\n            return Q.reject(err);\n        });\n    }\n\n\n\n\n    // -----------------------------------------------------------------------\n    // AGOL GROUPS METHODS\n\n\n    /**\n     * @param {string} id - identifier of AGOL group to fetch\n     * @param {Object} options - optional set of request options to apply to xhr request\n     * @return {Promise} resolving Item object or an error\n     */\n    getGroup (id, options) {\n\n        return Q.resolve( id )\n        .then( id => {\n            let opts = this.buildRequest({\n                method:\"GET\", url:this.baseUrl + '/groups/' + id, options:options\n            });\n            return this.execute(opts);\n        })\n        .catch(e => {\n            let err = new Error(`AgolService.getGroup() - Error fetching group ${id}: ${e.message}`);\n            return Q.reject(err);\n        });\n    }\n\n\n    /**\n     * @param {Object} arg - either JS object of query parameters or AgolQuery instance\n     * @param {Object} options - optional set of request options to apply to xhr request\n     * @return {Promise} resolving search results\n     */\n    searchGroups (arg, options) {\n\n        return Q.resolve( arg )\n        .then( params => {\n\n            if(params && typeof(params.getQuery) !== 'undefined') {\n                //if passed a GeoPlatform.Query object,\n                // convert to parameters object\n                params = params.getQuery();\n            }\n            let opts = this.buildRequest({\n                method:\"GET\", url: this.baseUrl + '/groups', params: params, options: options\n            });\n            return this.execute(opts);\n        })\n        .catch(e => {\n            let err = new Error(`AgolService.searchGroups() - Error searching groups: ${e.message}`);\n            return Q.reject(err);\n        });\n    }\n\n\n\n\n    // -----------------------------------------------------------------------\n    // AGOL ITEMS METHODS\n\n    /**\n     * @param {string} id - identifier of AGOL item to fetch\n     * @param {Object} options - optional set of request options to apply to xhr request\n     * @return {Promise} resolving Item object or an error\n     */\n    getItem (id, options) {\n\n        return Q.resolve( id )\n        .then( id => {\n            let opts = this.buildRequest({\n                method:\"GET\", url:this.baseUrl + '/items/' + id, options:options\n            });\n            return this.execute(opts);\n        })\n        .catch(e => {\n            let err = new Error(`AgolService.getItem() - Error fetching item ${id}: ${e.message}`);\n            return Q.reject(err);\n        });\n    }\n\n\n    /**\n     * @param {Object} arg - either JS object of query parameters or AgolQuery instance\n     * @param {Object} options - optional set of request options to apply to xhr request\n     * @return {Promise} resolving search results\n     */\n    searchItems (arg, options) {\n\n        return Q.resolve( arg )\n        .then( params => {\n\n            if(params && typeof(params.getQuery) !== 'undefined') {\n                //if passed a GeoPlatform.Query object,\n                // convert to parameters object\n                params = params.getQuery();\n            }\n            let opts = this.buildRequest({\n                method:\"GET\", url: this.baseUrl + '/items', params: params, options: options\n            });\n            return this.execute(opts);\n        })\n        .catch(e => {\n            let err = new Error(`AgolService.searchItems() - Error searching items: ${e.message}`);\n            return Q.reject(err);\n        });\n    }\n\n\n\n    /* --------------------------- */\n\n    getAgolId (obj) {\n        if(!obj) return null;\n\n        if(!obj.type) return null;\n\n        if(ItemTypes.ORGANIZATION === obj.type || 'Group' === obj.type) {\n            return obj.id;\n        }\n\n        if(!obj.identifiers || !obj.identifiers.length) return null;\n        let ids = obj.identifiers.filter(id => ~id.indexOf('agol:'));\n        if(!ids.length) return null;\n        return ids[0].replace('agol:','');\n    }\n\n\n\n\n\n    /* ----------------------------------------------------------- */\n\n    /**\n     * @param {string} method - one of \"GET\", \"POST\", \"PUT\", \"DELETE\", \"PATCH\"\n     * @param {string} url - destination of xhr request\n     * @param {Object} params - object to be sent with request as query parameters\n     * @param {Object} data - object to be sent with request as body\n     * @param {Object} options - optional object defining request options\n     * @return {Object} request options for xhr\n     */\n    buildRequest (options) {\n\n        if(this.httpMethods.indexOf(options.method)<0)\n            throw new Error(`Unsupported HTTP method ${options.method}`);\n\n        if(!options.url)\n            throw new Error(`Must specify a URL for HTTP requests`);\n\n        options.timeout = this.timeout;\n\n        return this.createRequestOpts(options);\n    }\n\n    createRequestOpts(options) {\n        return this.client.createRequestOpts(options);\n    }\n\n    execute(opts) {\n        return this.client.execute(opts);\n    }\n\n}\n\nexport {\n    AgolService as default,\n    AgolService,\n    AgolQuery\n};\n","\n\nexport default {\n    TYPES            : 'type',\n    QUERY            : 'q',\n    KEYWORDS         : 'keyword',\n    URI              : 'uri',\n    CREATED_BY       : 'createdBy',\n    LAST_MODIFIED_BY : 'lastModifiedBy',\n    CONTRIBUTED_BY   : 'contributedBy',\n    CREATOR          : 'creator.id',\n    SERVICE_TYPES    : 'serviceType.id',\n    THEMES_ID        : 'theme.id',\n    THEMES_LABEL     : 'theme.label',\n    THEMES_URI       : 'theme.uri',\n    PUBLISHERS_ID    : 'publisher.id',\n    PUBLISHERS_LABEL : 'publisher.label',\n    PUBLISHERS_URI   : 'publisher.uri',\n    USED_BY_ID       : 'usedBy.id',\n    USED_BY_LABEL    : 'usedBy.label',\n    USED_BY_URI      : 'usedBy.uri',\n    SCHEMES_ID       : 'scheme.id',\n    SCHEMES_LABEL    : 'scheme.label',\n    SCHEMES_URI      : 'scheme.uri',\n    VISIBILITY       : 'visibility',\n    EXTENT           : 'extent',\n    CREATED          : 'created',\n    CREATED_BEFORE   : 'created.max',\n    CREATED_AFTER    : 'created.min',\n    MODIFIED         : 'modified',\n    MODIFIED_BEFORE  : 'modified.max',\n    MODIFIED_AFTER   : 'modified.min',\n    BEGINS           : 'startDate.min',\n    ENDS             : 'endDate.max',\n    RESOURCE_TYPE    : 'resourceType',\n\n    FACETS           : 'includeFacets',\n    FIELDS           : 'fields',\n\n    //recommender service-specific\n    FOR_TYPES        : 'for'\n};\n","\nimport QueryParameters from './parameters';\n\nconst SORT_OPTIONS_DEFAULT = [\n    { value:\"label,asc\",       label: \"Name (A-Z)\"              },\n    { value:\"label,desc\",      label: \"Name (Z-A)\"              },\n    { value:\"type,asc\",        label: \"Type (A-Z)\"              },\n    { value:\"type,desc\",       label: \"Type (Z-A)\"              },\n    { value:\"modified,desc\",   label: \"Most recently modified\"  },\n    { value:\"modified,asc\",    label: \"Least recently modified\" },\n    { value:\"_score,desc\",     label: \"Relevance\"               }\n];\n\n\nclass KGQuery {\n\n    constructor() {\n\n        this.defaultQuery = {\n            page: 0,\n            size: 10,\n            sort: \"modified,desc\"\n        };\n\n        this.query = {\n            page: 0,\n            size: 10,\n            sort: \"modified,desc\"\n        };\n\n    }\n\n\n\n    getQuery() {\n        let result = {};\n        for(let prop in this.query) {\n            let value = this.query[prop];\n            if(value !== null && typeof(value.push) !== 'undefined') {\n                value = value.join(',');\n            }\n            result[prop] = value;\n        }\n        return result;\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    parameter(name, value) {\n        this.setParameter(name, value);\n        return this;\n    }\n\n    setParameter (name, value) {\n        if(value === null || value === undefined)\n            delete this.query[name];\n        else\n            this.query[name] = value;\n    }\n\n    getParameter (key) {\n        return this.query[key];\n    }\n\n    applyParameters (obj) {\n        for(var p in obj) {\n            if(obj.hasOwnProperty(p)) {\n                this.setParameter(p, obj[p]);\n            }\n        }\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    q(text) {\n        this.setQ(text);\n        return this;\n    }\n\n    /**\n     * @param {string} text - free text query\n     */\n    setQ (text) {\n        this.setParameter(QueryParameters.QUERY, text);\n    }\n\n    getQ() {\n        return this.getParameter(QueryParameters.QUERY);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    /**\n     * @param {array[string]} types - KG classifiers for which concepts should be returned\n     */\n    classifiers(types) {\n        this.setClassifiers(types);\n        return this;\n    }\n\n    /**\n     * @param {array[string]} types - KG classifiers for which concepts should be returned\n     */\n    setClassifiers (types) {\n        if(types && typeof(types.push) === 'undefined')\n            types = [types];\n        this.setParameter(QueryParameters.TYPES, types);\n    }\n\n    /**\n     * @return {array[string]} KG classifiers for which concepts should be returned\n     */\n    getClassifiers () {\n        return this.getParameter(QueryParameters.TYPES);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    /**\n     * Specify the Item object model type name(s) for which\n     * recommended concepts should be returned. Note: this\n     * query parameter is not the same as the GeoPlatform.Query.types()\n     * query parameter (they map to different HTTP request parameters).\n     * @param {array[string]} objTypes - Item object type names\n     */\n    types(objTypes) {\n        this.setTypes(objTypes);\n        return this;\n    }\n\n    /**\n     * Specify the Item object model type name(s) for which\n     * recommended concepts should be returned. Note: this\n     * query parameter is not the same as the GeoPlatform.Query.setTypes()\n     * query parameter (they map to different HTTP request parameters).\n     * @param {array[string]} objTypes - Item object type names\n     */\n    setTypes (objTypes) {\n        if(objTypes && typeof(objTypes.push) === 'undefined')\n            objTypes = [objTypes];\n        this.setParameter(QueryParameters.FOR_TYPES, objTypes);\n    }\n\n    /**\n     * Get the Item object model type name(s) for which\n     * recommended concepts should be returned. Note: this\n     * query parameter is not the same as the GeoPlatform.Query.getTypes()\n     * query parameter (they map to different HTTP request parameters).\n     * @return {array[string]} Item object type names\n     */\n    getTypes () {\n        return this.getParameter(QueryParameters.FOR_TYPES);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    /**\n     * @param {int} page - page of results to fetch\n     */\n    page (page) {\n        this.setPage(page);\n        return this;\n    }\n\n    setPage(page) {\n        if(isNaN(page) || page*1<0) return;\n        this.query.page = page*1;\n    }\n\n    getPage() {\n        return this.query.page;\n    }\n\n    nextPage() {\n        this.setPage(this.query.page+1);\n    }\n\n    previousPage() {\n        this.setPage(this.query.page-1);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    /**\n     * @param {int} size - page size to request\n     */\n    pageSize (size) {\n        this.setPageSize(size);\n        return this;\n    }\n\n    setPageSize (size) {\n        if(isNaN(size) || size*1<0) return;\n        this.query.size = size*1;\n    }\n\n    getPageSize() {\n        return this.query.size;\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    /**\n     * @param {string} sort - form of <field>,<dir> or just field name\n     * @param {string} order - optional, either 'asc' or 'desc'\n     */\n    sort (sort, order) {\n        this.setSort(sort, order);\n        return this;\n    }\n\n    /**\n     * @param {string} sort - form of <field>,<dir> or just field name\n     * @param {string} order - optional, either 'asc' or 'desc'\n     */\n     setSort(sort, order) {\n         order = (order && (order !== 'asc' || order !== 'desc')) ? 'desc' : order;\n         if(sort && sort.indexOf(',')<0)\n            sort = sort + ',' + order;\n         this.query.sort = sort;\n    }\n\n    getSort() {\n        return this.query.sort;\n    }\n\n    getSortField() {\n        return this.query.sort.split(',')[0];\n    }\n\n    getSortOrder() {\n        return this.query.sort.split(',')[1] === 'asc';\n    }\n\n    /**\n     * @return {array} list of key-value pairs of sort options\n     */\n    getSortOptions() {\n        return SORT_OPTIONS_DEFAULT.slice(0);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    /**\n     *\n     */\n    clear () {\n        this.query = this.defaultQuery;\n    }\n}\n\nexport default KGQuery;\n","\nimport Q from 'q';\nimport QueryParameters from '../shared/parameters';\n\n\nclass KGService {\n\n    constructor(url, httpClient) {\n        this.setUrl(url);\n        this.client = httpClient;\n        this.timeout = 10000;\n        this.httpMethods = [\"GET\", \"POST\", \"PUT\", \"DELETE\", \"PATCH\"];\n    }\n\n    setUrl(baseUrl) {\n        this.apiBase = baseUrl;\n        this.baseUrl = baseUrl + '/api/recommender';\n    }\n\n    /**\n     * @param {Object} query - optional query parameters to include with request\n     * @param {Object} options - optional config to send with http request\n     * @return {Promise} resolving recommended concepts as search results\n     */\n    suggest (query, options) {\n        let url = this.baseUrl + '/suggest';\n        return this._search(url, query, options)\n        .catch(e => {\n            let err = new Error(`KGService.suggest() - Error suggesting concepts: ${e.message}`);\n            return Q.reject(err);\n        });\n    }\n\n\n    /**\n     * @param {Object} query - optional query parameters to include with request\n     * @param {Object} options - optional config to send with http request\n     * @return {Promise} resolving concept types as search results\n     */\n    types (query, options) {\n        let url = this.baseUrl + '/types';\n        return this._search(url, query, options)\n        .catch(e => {\n            let err = new Error(`KGService.types() - Error searching types: ${e.message}`);\n            return Q.reject(err);\n        });\n    }\n\n\n\n    /**\n     * @param {Object} query - optional query parameters to include with request\n     * @param {Object} options - optional config to send with http request\n     * @return {Promise} resolving concept sources as search results\n     */\n    sources (query, options) {\n        let url = this.baseUrl + '/sources';\n        return this._search(url, query, options)\n        .catch(e => {\n            let err = new Error(`KGService.sources() - Error searching sources: ${e.message}`);\n            return Q.reject(err);\n        });\n    }\n\n\n\n\n\n    /* ----------------------------------------------------------- */\n\n\n    /**\n     * internal method used by exposed methods\n     */\n    _search (url, query, options) {\n        return Q.resolve( true )\n        .then( () => {\n\n            if(query && typeof(query.getQuery) !== 'undefined') {\n                //if passed a GeoPlatform.Query object,\n                // convert to parameters object\n                query = query.getQuery();\n            }\n\n            let opts = this.buildRequest({\n                method:\"GET\", url:url, params:query, options:options\n            });\n            return this.execute(opts);\n        });\n    }\n\n\n\n    /**\n     * @param {string} method - one of \"GET\", \"POST\", \"PUT\", \"DELETE\", \"PATCH\"\n     * @param {string} url - destination of xhr request\n     * @param {Object} params - object to be sent with request as query parameters\n     * @param {Object} data - object to be sent with request as body\n     * @param {Object} options - optional object defining request options\n     * @return {Object} request options for xhr\n     */\n    buildRequest (options) {\n\n        if(this.httpMethods.indexOf(options.method)<0)\n            throw new Error(`Unsupported HTTP method ${options.method}`);\n\n        if(!options.url)\n            throw new Error(`Must specify a URL for HTTP requests`);\n\n        options.timeout = this.timeout;\n\n        return this.createRequestOpts(options);\n    }\n\n    createRequestOpts(options) {\n        return this.client.createRequestOpts(options);\n    }\n\n    execute(opts) {\n        return this.client.execute(opts);\n    }\n\n}\n\nexport default KGService;\n","\n\n\nexport default  {\n    PURPOSE             : 'purposes',\n    FUNCTION            : 'functions',\n    TOPIC_PRIMARY       : 'primaryTopics',\n    TOPIC_SECONDARY     : 'secondaryTopics',\n    SUBJECT_PRIMARY     : 'primarySubjects',\n    SUBJECT_SECONDARY   : 'secondarySubjects',\n    COMMUNITY           : 'communities',\n    AUDIENCE            : 'audiences',\n    PLACE               : 'places',\n    CATEGORY            : 'categories'\n};\n","\nimport Parameters from './parameters';\n\nconst Fields = {\n    LABEL           : 'label',\n    DESCRIPTION     : 'description',\n    CREATED         : 'created',\n    MODIFIED        : 'modified',\n    CREATED_BY      : 'createdBy',\n    LAST_MODIFIED_BY: 'lastModifiedBy',\n    KEYWORDS        : 'keywords',\n    THEMES          : 'themes',\n    PUBLISHERS      : 'publishers',\n    STATUS          : 'status',\n    VISIBILITY      : 'visibility',\n    EXTENT          : 'extent',\n    TEMPORAL        : 'temporal',\n    IDENTIFIERS     : 'identifiers',\n    RESOURCE_TYPES  : 'resourceTypes',\n    SERVICES        : 'services',\n    CONTACTS        : 'contacts',\n    DISTRIBUTIONS   : 'distributions',\n    ACCESS_RIGHTS   : 'rights',\n    USED_BY         : 'usedBy',\n    STATISTICS      : 'statistics',\n\n    SERVICE_TYPE    : 'serviceType',\n    HREF            : 'href',\n    DATASETS        : 'datasets',\n\n    LAYER_TYPE      : 'layerType',\n    LAYER_NAME      : 'layerName',\n    LEGEND          : 'legend',\n    SUB_LAYERS      : 'subLayers',\n    PARENT_LAYER    : 'parentLayer',\n\n    LAYERS          : 'layers',\n    ANNOTATIONS     : 'annotations',\n    THUMBNAIL       : 'thumbnail',\n\n    GALLERY_ITEMS   : 'items',\n\n    CONCEPT_SCHEME  : 'scheme'\n\n};\n\nconst Facets = {\n    TYPES           : 'types',\n    THEMES          : 'themes',\n    PUBLISHERS      : 'publishers',\n    SERVICE_TYPES   : 'serviceTypes',\n    CONCEPT_SCHEMES : 'schemes',\n    VISIBILITY      : 'visibility',\n    CREATED_BY      : 'createdBy',\n    USED_BY         : 'usedBy.id'\n};\n\n\nconst FIELDS_DEFAULT = [\n    Fields.CREATED, Fields.MODIFIED, Fields.CREATED_BY,\n    Fields.PUBLISHERS, Fields.THEMES, Fields.DESCRIPTION\n];\n\nconst FACETS_DEFAULT = [\n    Facets.TYPES,\n    Facets.PUBLISHERS,\n    Facets.SERVICE_TYPES,\n    Facets.CONCEPT_SCHEMES,\n    Facets.VISIBILITY,\n    Facets.CREATED_BY\n];\n\nconst SORT_OPTIONS_DEFAULT = [\n    { value:\"label,asc\",       label: \"Name (A-Z)\"              },\n    { value:\"label,desc\",      label: \"Name (Z-A)\"              },\n    { value:\"type,asc\",        label: \"Type (A-Z)\"              },\n    { value:\"type,desc\",       label: \"Type (Z-A)\"              },\n    { value:\"modified,desc\",   label: \"Most recently modified\"  },\n    { value:\"modified,asc\",    label: \"Least recently modified\" },\n    { value:\"_score,desc\",     label: \"Relevance\"               }\n];\n\n\nclass Query {\n\n    constructor() {\n\n        this.defaultQuery = {\n            page: 0,\n            size: 10,\n            total: 0,\n            sort: \"modified,desc\",\n            fields: FIELDS_DEFAULT.slice(0),\n            includeFacets: FACETS_DEFAULT.slice(0)\n        };\n\n        this.query = {\n            page: 0,\n            size: 10,\n            total: 0,\n            sort: \"modified,desc\",\n            fields: FIELDS_DEFAULT.slice(0),\n            includeFacets: FACETS_DEFAULT.slice(0)\n        };\n\n    }\n\n\n\n    getQuery() {\n        let result = {};\n        for(let prop in this.query) {\n            let value = this.query[prop];\n            if(value !== null && typeof(value.push) !== 'undefined') {\n                value = value.join(',');\n            }\n            result[prop] = value;\n        }\n        return result;\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    parameter(name, value) {\n        this.setParameter(name, value);\n        return this;\n    }\n\n    setParameter (name, value) {\n        if(value === null || value === undefined || //if no value was provide\n            (typeof(value.push) !== 'undefined' && !value.length)) //or empty array\n            delete this.query[name];\n        else\n            this.query[name] = value;\n    }\n\n    getParameter (key) {\n        return this.query[key];\n    }\n\n    applyParameters (obj) {\n        for(var p in obj) {\n            if(obj.hasOwnProperty(p)) {\n                this.setParameter(p, obj[p]);\n            }\n        }\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    q(text) {\n        this.setQ(text);\n        return this;\n    }\n\n    /**\n     * @param {string} text - free text query\n     */\n    setQ (text) {\n        this.setParameter(Parameters.QUERY, text);\n    }\n\n    getQ() {\n        return this.getParameter(Parameters.QUERY);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    keywords(text) {\n        this.setQ(text);\n        return this;\n    }\n\n    /**\n     * @param {string} text - free text query\n     */\n    setKeywords (text) {\n        if(text && typeof(text.push) === 'undefined')\n            text = [text];\n        this.setParameter(Parameters.KEYWORDS, text);\n    }\n\n    getKeywords() {\n        return this.getParameter(Parameters.KEYWORDS);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    uri (uri) {\n        this.setUri(uri);\n        return this;\n    }\n\n    setUri(uri) {\n        this.setParameter(Parameters.URI, uri);\n    }\n\n    getUri() {\n        return this.getParameter(Parameters.URI);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    types(types) {\n        this.setTypes(types);\n        return this;\n    }\n\n    /**\n     * @param {array[string]} types - name of class(es) to request\n     */\n    setTypes (types) {\n        if(types && typeof(types.push) === 'undefined')\n            types = [types];\n        this.setParameter(Parameters.TYPES, types);\n    }\n\n    getTypes () {\n        return this.getParameter(Parameters.TYPES);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    createdBy(user) {\n        this.setCreatedBy(user);\n        return this;\n    }\n\n    /** @param {string} user - username */\n    setCreatedBy (user) {\n        this.setParameter(Parameters.CREATED_BY, user);\n    }\n\n    /** @return {string} username */\n    getCreatedBy () {\n        return this.getParameter(Parameters.CREATED_BY);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    lastModifiedBy(user) {\n        this.setLastModifiedBy(user);\n        return this;\n    }\n\n    /** @param {string} user - username */\n    setLastModifiedBy (user) {\n        this.setParameter(Parameters.LAST_MODIFIED_BY, user);\n    }\n\n    /** @return {string} username */\n    getLastModifiedBy () {\n        return this.getParameter(Parameters.LAST_MODIFIED_BY);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    /**\n     * Specify a Theme or set of Themes to constrain results. By\n     * default, values are assumed to be theme identifiers. If using\n     * theme labels or theme uris, specify the optional second parameter\n     * to be either Parameters.THEMES_LABEL or Parameters.THEMES_URI\n     * respectively.\n     * @param {array[string]} themes - string or array of strings containing theme constraint\n     * @param {string} parameter - optional, to indicate the parameter to use\n     * @return {Query}\n     */\n    themes(themes, parameter) {\n        this.setThemes(themes, parameter);\n        return this;\n    }\n\n\n    /**\n     * Specify a Theme or set of Themes to constrain results. By\n     * default, values are assumed to be theme identifiers. If using\n     * theme labels or theme uris, specify the optional second parameter\n     * to be either Parameters.THEMES_LABEL or Parameters.THEMES_URI\n     * respectively.\n     * @param {array[string]} themes - theme or themes to constrain by\n     */\n    setThemes (themes, parameter) {\n        if(themes && typeof(themes.push) === 'undefined')\n            themes = [themes];\n\n        //clear existing\n        this.setParameter(Parameters.THEMES_ID, null);\n        this.setParameter(Parameters.THEMES_LABEL, null);\n        this.setParameter(Parameters.THEMES_URI, null);\n\n        let param = parameter || Parameters.THEMES_ID;\n        this.setParameter(param, themes);\n    }\n\n    getThemes () {\n        return this.getParameter(Parameters.THEMES_ID) ||\n            this.getParameter(Parameters.THEMES_LABEL) ||\n            this.getParameter(Parameters.THEMES_URI);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    /**\n     * Specify a Publisher or set of Publishers to constrain results. By\n     * default, values are assumed to be theme identifiers. If using\n     * theme labels or theme uris, specify the optional second parameter\n     * to be either Parameters.PUBLISHERS_LABEL or Parameters.PUBLISHERS_URI\n     * respectively.\n     * @param {string} parameter - optional, to indicate the parameter to use\n     * @return {Query}\n     */\n    publishers(publishers, parameter) {\n        this.setPublishers(publishers, parameter);\n        return this;\n    }\n\n    /**\n     * Specify a Publisher or set of Publishers to constrain results. By\n     * default, values are assumed to be theme identifiers. If using\n     * theme labels or theme uris, specify the optional second parameter\n     * to be either Parameters.PUBLISHERS_LABEL or Parameters.PUBLISHERS_URI\n     * respectively.\n     * @param {array[string]} publishers - publishing orgs to constrain by\n     */\n    setPublishers (publishers, parameter) {\n        if(publishers && typeof(publishers.push) === 'undefined')\n            publishers = [publishers];\n\n        //clear existing\n        this.setParameter(Parameters.PUBLISHERS_ID, null);\n        this.setParameter(Parameters.PUBLISHERS_LABEL, null);\n        this.setParameter(Parameters.PUBLISHERS_URI, null);\n\n        let param = parameter || Parameters.PUBLISHERS_ID;\n        this.setParameter(param, publishers);\n    }\n\n    getPublishers () {\n        return this.getParameter(Parameters.PUBLISHERS_ID) ||\n            this.getParameter(Parameters.PUBLISHERS_LABEL) ||\n            this.getParameter(Parameters.PUBLISHERS_URI);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    /**\n     * Specify the identifier of an Agent (Community, Group, etc) that\n     * uses items you wish to find in search results. By\n     * default, values are assumed to be theme identifiers. If using\n     * theme labels or theme uris, specify the optional second parameter\n     * to be either Parameters.USED_BY_LABEL or Parameters.USED_BY_URI\n     * respectively.\n     * @param {string} parameter - optional, to indicate the parameter to use\n     * @return {Query}\n     */\n    usedBy(ids, parameter) {\n        this.setUsedBy(ids, parameter);\n        return this;\n    }\n\n    /**\n     * Specify the identifier of an Agent (Community, Group, etc) that\n     * uses items you wish to find in search results. By\n     * default, values are assumed to be theme identifiers. If using\n     * theme labels or theme uris, specify the optional second parameter\n     * to be either Parameters.USED_BY_LABEL or Parameters.USED_BY_URI\n     * respectively.\n     * @param {array[string]} ids - publishing orgs to constrain by\n     */\n    setUsedBy (ids, parameter) {\n        if(ids && typeof(ids.push) === 'undefined')\n            ids = [ids];\n\n        //clear existing\n        this.setParameter(Parameters.USED_BY_ID, null);\n        this.setParameter(Parameters.USED_BY_LABEL, null);\n        this.setParameter(Parameters.USED_BY_URI, null);\n\n        let param = parameter || Parameters.USED_BY_ID;\n        this.setParameter(param, ids);\n    }\n\n    getUsedBy () {\n        return this.getParameter(Parameters.USED_BY_ID) ||\n            this.getParameter(Parameters.USED_BY_LABEL) ||\n            this.getParameter(Parameters.USED_BY_URI);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    /**\n     * Specify a Concept Scheme or set of Concept Schemes to constrain results. By\n     * default, values are assumed to be theme identifiers. If using\n     * theme labels or theme uris, specify the optional second parameter\n     * to be either Parameters.SCHEMES_LABEL or Parameters.SCHEMES_URI\n     * respectively.\n     * @param {array[string]} schemes - schemes to constrain by\n     * @param {string} parameter - optional, to indicate the parameter to use\n     * @return {Query}\n     */\n    schemes(schemes, parameter) {\n        this.setSchemes(schemes, parameter);\n        return this;\n    }\n\n    /**\n     * Specify a Concept Scheme or set of Concept Schemes to constrain results. By\n     * default, values are assumed to be theme identifiers. If using\n     * theme labels or theme uris, specify the optional second parameter\n     * to be either Parameters.SCHEMES_LABEL or Parameters.SCHEMES_URI\n     * respectively.\n     * @param {array[string]} schemes - schemes to constrain by\n     * @param {string} parameter - optional, to indicate the parameter to use\n     */\n    setSchemes (schemes, parameter) {\n        if(schemes && typeof(schemes.push) === 'undefined')\n            schemes = [schemes];\n\n        //clear existing\n        this.setParameter(Parameters.SCHEMES_ID, null);\n        this.setParameter(Parameters.SCHEMES_LABEL, null);\n        this.setParameter(Parameters.SCHEMES_URI, null);\n\n        let param = parameter || Parameters.SCHEMES_ID;\n        this.setParameter(param, schemes);\n    }\n\n    getSchemes() {\n        return this.getParameter(Parameters.SCHEMES_ID) ||\n            this.getParameter(Parameters.SCHEMES_LABEL) ||\n            this.getParameter(Parameters.SCHEMES_URI);\n    }\n\n\n    // -----------------------------------------------------------\n\n    /**\n     *\n     */\n    serviceTypes(types) {\n        this.setServiceTypes(types);\n        return this;\n    }\n\n    /**\n     * @param {array[string]} types - ids\n     */\n    setServiceTypes (types) {\n        if(types && typeof(types.push) === 'undefined')\n            types = [types];\n        this.setParameter(Parameters.SERVICE_TYPES, types);\n    }\n\n    getServiceTypes () {\n        return this.getParameter(Parameters.SERVICE_TYPES);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    visibility(vis) {\n        this.setVisibility(vis);\n        return this;\n    }\n\n    /**\n     * @param {string} visibility - one of 'public' or 'private'\n     */\n    setVisibility (visibility) {\n        this.setParameter(Parameters.VISIBILITY, visibility);\n    }\n\n    getVisibility () {\n        return this.getParameter(Parameters.VISIBILITY);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    modified(date, beforeOrAfter) {\n        this.setModified(date, beforeOrAfter);\n        return this;\n    }\n\n    /**\n     * @param {Date} date - date to compare against\n     * @param {boolean} beforeOrAfter - flag specifying which boundary condition (true = before, false = after) flag specifying whether to trigger update automatically\n     */\n    setModified (date, beforeOrAfter) {\n\n        //if no date was supplied, consider it \"unset\" for both properties\n        if(!date) {\n            this.setParameter(Parameters.MODIFIED_BEFORE, null);\n            this.setParameter(Parameters.MODIFIED_AFTER, null);\n            return;\n        }\n\n        let dir = beforeOrAfter && (beforeOrAfter === true || beforeOrAfter === \"true\");\n        let prop = dir ? Parameters.MODIFIED_BEFORE : Parameters.MODIFIED_AFTER;       //property being set\n        let oppProp = dir ? Parameters.MODIFIED_AFTER : Parameters.MODIFIED_BEFORE;    //unset opposite property\n        let arg = (date && date.getTime) ? date.getTime() : date;\n\n        this.setParameter(oppProp, null);\n        this.setParameter(prop, arg);\n    }\n\n    getModified () {\n        return  this.getParameter(Parameters.MODIFIED_BEFORE) ||\n                this.getParameter(Parameters.MODIFIED_AFTER);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    created(date, beforeOrAfter) {\n        this.setCreated(date, beforeOrAfter);\n        return this;\n    }\n\n    /**\n     * @param {Date} date - date to compare against\n     * @param {boolean} beforeOrAfter - flag specifying which boundary condition (true = before, false = after) flag specifying whether to trigger update automatically\n     */\n    setCreated (date, beforeOrAfter) {\n\n        //if no date was supplied, consider it \"unset\" for both properties\n        if(!date) {\n            this.setParameter(Parameters.CREATED_BEFORE, null);\n            this.setParameter(Parameters.CREATED_AFTER, null);\n            return;\n        }\n\n        let dir = beforeOrAfter && (beforeOrAfter === true || beforeOrAfter === \"true\");\n        let prop = dir ? Parameters.CREATED_BEFORE : Parameters.CREATED_AFTER;       //property being set\n        let oppProp = dir ? Parameters.CREATED_AFTER : Parameters.CREATED_BEFORE;    //unset opposite property\n        let arg = (date && date.getTime) ? date.getTime() : date;\n\n        this.setParameter(oppProp, null);\n        this.setParameter(prop, arg);\n    }\n\n    getCreated () {\n        return  this.getParameter(Parameters.CREATED_BEFORE) ||\n                this.getParameter(Parameters.CREATED_AFTER);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    extent(bbox) {\n        this.setExtent(bbox);\n        return this;\n    }\n\n    /**\n     * @param {string} bboxStr - form of \"minx,miny,maxx,maxy\"\n     */\n    setExtent (bbox) {\n        if(bbox && typeof(bbox.toBboxString) !== 'undefined')\n            bbox = bbox.toBboxString();\n        this.setParameter(Parameters.EXTENT, bbox);\n    }\n\n    /**\n     * @return {string} bbox string or null if not set\n     */\n    getExtent () {\n        return this.getParameter(Parameters.EXTENT);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    begins(date) {\n        this.setBeginDate(date);\n        return this;\n    }\n\n    setBeginDate (date) {\n        if(date && date instanceof Date)\n            date = date.getTime();\n        this.setParameter(Parameters.BEGINS, date);\n    }\n\n    getBeginDate () {\n        let date = this.getParameter(this.parameter.BEGINS);\n        if(date) date = new Date(date);\n        return date;\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    ends(date) {\n        this.setEndDate(date);\n        return this;\n    }\n\n    setEndDate (date) {\n        if(date && date instanceof Date)\n            date = date.getTime();\n        this.setParameter(Parameters.ENDS, date);\n    }\n\n    getEndDate () {\n        let date = this.getParameter(this.parameter.ENDS);\n        if(date) date = new Date(date);\n        return date;\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    between(begin, end) {\n        this.setBetween(begin, end);\n        return this;\n    }\n\n    setBetween(begin, end) {\n        this.begins(begin);\n        this.ends(end);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    resourceTypes(types) {\n        this.setResourceTypes(types);\n        return this;\n    }\n\n    setResourceTypes(types) {\n        if(types && typeof(types.push) === 'undefined')\n            types = [types];\n        this.setParameter(Parameters.RESOURCE_TYPE, types);\n    }\n\n    getResourceTypes() {\n        return this.getParameter(Parameters.RESOURCE_TYPE);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    facets(names) {\n        this.setFacets(names);\n        return this;\n    }\n\n    /*\n     * @param {array[string]} names - names of facets\n     */\n    setFacets (names) {\n        if(names && typeof(names.push) === 'undefined')\n            names = [names];\n        this.setParameter(Parameters.FACETS, names);\n    }\n\n    getFacets() {\n        return this.getParameter(Parameters.FACETS);\n    }\n\n    /**\n     * @param {string} name - name of facet to add\n     */\n    addFacet(name) {\n        let facets = this.getFacets() || [];\n        facets.push(name);\n        this.setFacets(facets);\n    }\n\n    /**\n     * @param {string} name - name of facet to remove\n     */\n    removeFacet(name) {\n        let facets = this.getFacets() || [];\n        let idx = facets.indexOf(name);\n        if(idx>=0) {\n            facets.splice(idx, 1);\n            this.setFacets(facets);\n        }\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    fields(fields) {\n        this.setFields(fields);\n        return this;\n    }\n\n    /**\n     * @param {array[string]} fields - list of field names to request for each search result\n     */\n    setFields (fields) {\n        if(fields && typeof(fields.push) === 'undefined')\n            fields = [fields];\n        this.setParameter(Parameters.FIELDS, fields);\n    }\n\n    getFields() {\n        return this.getParameter(Parameters.FIELDS);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    /**\n     * @param {int} page - page of results to fetch\n     */\n    page (page) {\n        this.setPage(page);\n        return this;\n    }\n\n    setPage(page) {\n        if(isNaN(page) || page*1<0) return;\n        this.query.page = page*1;\n    }\n\n    getPage() {\n        return this.query.page;\n    }\n\n    nextPage() {\n        this.setPage(this.query.page+1);\n    }\n\n    previousPage() {\n        this.setPage(this.query.page-1);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    /**\n     * @param {int} size - page size to request\n     */\n    pageSize (size) {\n        this.setPageSize(size);\n        return this;\n    }\n\n    setPageSize (size) {\n        if(isNaN(size) || size*1<0) return;\n        this.query.size = size*1;\n    }\n\n    getPageSize() {\n        return this.query.size;\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    /**\n     * @param {string} sort - form of <field>,<dir> or just field name\n     * @param {string} order - optional, either 'asc' or 'desc'\n     */\n    sort (sort, order) {\n        this.setSort(sort, order);\n        return this;\n    }\n\n    /**\n     * @param {string} sort - form of <field>,<dir> or just field name\n     * @param {string} order - optional, either 'asc' or 'desc'\n     */\n     setSort(sort, order) {\n         order = (order && (order !== 'asc' || order !== 'desc')) ? 'desc' : order;\n         if(sort && sort.indexOf(',')<0)\n            sort = sort + ',' + order;\n         this.query.sort = sort;\n    }\n\n    getSort() {\n        return this.query.sort;\n    }\n\n    getSortField() {\n        return this.query.sort.split(',')[0];\n    }\n\n    getSortOrder() {\n        return this.query.sort.split(',')[1] === 'asc';\n    }\n\n    /**\n     * @return {array} list of key-value pairs of sort options\n     */\n    getSortOptions() {\n        return SORT_OPTIONS_DEFAULT.slice(0);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    /**\n     *\n     */\n    clear () {\n        this.query = this.defaultQuery;\n    }\n}\n\nexport {\n    Query as default,\n    Query,\n    Fields,\n    Facets\n};\n","\nimport Query from './query';\n\nexport default function() {\n    return new Query();\n}\n","\nimport ItemTypes from '../shared/types';\nimport ItemService from './item';\nimport LayerService from './layer';\nimport ServiceService from './service';\nimport GalleryService from './gallery';\nimport DatasetService from './dataset';\nimport MapService from './map';\n\n/**\n * @param {any} arg - string type or object with type property\n * @param {string} baseUrl - base endpoint of GeoPlatform API\n * @return {ItemService}\n */\nconst ServiceFactory = function(arg, baseUrl, httpClient) {\n    let type = (typeof(arg) === 'string') ?\n        arg : (arg && arg.type ? arg.type : null);\n    if(!type) throw new Error(\"Must provide a type or object with a type specified\");\n    if(!baseUrl) throw new Error(\"Must provide a base url\");\n    if(!httpClient) throw new Error(\"Must provide an http client to use to make requests\");\n    switch(type) {\n        case ItemTypes.LAYER:   return new LayerService(  baseUrl, httpClient);\n        case ItemTypes.SERVICE: return new ServiceService(baseUrl, httpClient);\n        case ItemTypes.MAP:     return new MapService(    baseUrl, httpClient);\n        case ItemTypes.GALLERY: return new GalleryService(baseUrl, httpClient);\n        case ItemTypes.DATASET: return new DatasetService(baseUrl, httpClient);\n        default:                return new ItemService(   baseUrl, httpClient);\n    }\n};\n\nexport default ServiceFactory;\n","export default {\n\n    //ualUrl: '...',\n    //appId: '...',\n\n    configure: function(options) {\n        Object.assign(this, options);\n    }\n};\n"],"names":["JQueryHttpClient","options","setTimeout","timeout","setAuthToken","token","arg","opts","method","url","json","dataType","params","data","processData","contentType","headers","Authorization","o","hasOwnProperty","jQuery","Error","d","Q","defer","success","resolve","error","xhr","status","message","reject","ajax","promise","NGHttpClient","angular","$http","useXDomain","injector","get","then","response","catch","NodeHttpClient","qs","file","fs","require","formData","value","createReadStream","path","filename","originalFilename","Object","assign","body","auth","deferred","request","checkAndHandleError","e","props","code","connect","statusCode","babelHelpers.typeof","sidx","indexOf","eidx","item","substring","uri","pathname","JSON","parse","err","DATASET","SERVICE","LAYER","MAP","GALLERY","ORGANIZATION","COMMUNITY","CONCEPT","CONCEPT_SCHEME","STANDARD","ItemService","httpClient","setUrl","client","httpMethods","baseUrl","apiBase","id","buildRequest","execute","itemObj","getUri","patch","getQuery","format","undefined","isFile","ro","object","obj","type","createRequestOpts","DatasetService","MapService","LayerService","req","keys","missing","find","key","srs","bbox","height","width","info_format","x","y","i","j","ServiceService","service","svc","query","Query","types","ItemTypes","resourceTypes","pageSize","results","GalleryService","galleryId","itemId","UtilsService","property","AgolQuery","_query","page","size","result","prop","push","join","setQ","q","setTypes","setGroups","groups","setOrgs","orgs","setExtent","sort","order","setSort","split","setPage","isNaN","setPageSize","AgolService","identifiers","length","ids","filter","replace","TYPES","QUERY","KEYWORDS","URI","CREATED_BY","LAST_MODIFIED_BY","CONTRIBUTED_BY","CREATOR","SERVICE_TYPES","THEMES_ID","THEMES_LABEL","THEMES_URI","PUBLISHERS_ID","PUBLISHERS_LABEL","PUBLISHERS_URI","USED_BY_ID","USED_BY_LABEL","USED_BY_URI","SCHEMES_ID","SCHEMES_LABEL","SCHEMES_URI","VISIBILITY","EXTENT","CREATED","CREATED_BEFORE","CREATED_AFTER","MODIFIED","MODIFIED_BEFORE","MODIFIED_AFTER","BEGINS","ENDS","RESOURCE_TYPE","FACETS","FIELDS","FOR_TYPES","SORT_OPTIONS_DEFAULT","label","KGQuery","defaultQuery","name","setParameter","p","text","QueryParameters","getParameter","setClassifiers","objTypes","slice","KGService","_search","PURPOSE","FUNCTION","TOPIC_PRIMARY","TOPIC_SECONDARY","SUBJECT_PRIMARY","SUBJECT_SECONDARY","AUDIENCE","PLACE","CATEGORY","Fields","LABEL","DESCRIPTION","THEMES","PUBLISHERS","STATUS","TEMPORAL","IDENTIFIERS","RESOURCE_TYPES","SERVICES","CONTACTS","DISTRIBUTIONS","ACCESS_RIGHTS","USED_BY","STATISTICS","SERVICE_TYPE","HREF","DATASETS","LAYER_TYPE","LAYER_NAME","LEGEND","SUB_LAYERS","PARENT_LAYER","LAYERS","ANNOTATIONS","THUMBNAIL","GALLERY_ITEMS","Facets","CONCEPT_SCHEMES","FIELDS_DEFAULT","FACETS_DEFAULT","total","fields","includeFacets","Parameters","setUri","user","setCreatedBy","setLastModifiedBy","themes","parameter","setThemes","param","publishers","setPublishers","setUsedBy","schemes","setSchemes","setServiceTypes","vis","setVisibility","visibility","date","beforeOrAfter","setModified","dir","oppProp","getTime","setCreated","toBboxString","setBeginDate","Date","setEndDate","begin","end","setBetween","begins","ends","setResourceTypes","names","setFacets","facets","getFacets","idx","splice","setFields","ServiceFactory","configure"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAGMA;;EAEF;;;;EAIA,8BAAYC,OAAZ,EAAqB;EAAA;;EACjBA,kBAAUA,WAAW,EAArB;EACA,aAAKC,UAAL,CAAgBD,QAAQE,OAAR,IAAiB,KAAjC;EACA,aAAKC,YAAL,CAAkBH,QAAQI,KAA1B;EACH;;;;qCAEUF,SAAS;EAChB,iBAAKA,OAAL,GAAeA,OAAf;EACH;;EAED;;;;;;uCAGaG,KAAK;EACd,gBAAGA,OAAO,OAAOA,GAAP,KAAgB,QAA1B,EACI,KAAKD,KAAL,GAAa,YAAW;EAAE,uBAAOC,GAAP;EAAa,aAAvC,CADJ,KAEK,IAAGA,OAAO,OAAOA,GAAP,KAAgB,UAA1B,EACD,KAAKD,KAAL,GAAaC,GAAb;EACJ;EACH;;;4CAEiBL,SAAS;;EAEvB,gBAAIM,OAAO;EACPC,wBAAQP,QAAQO,MADT;EAEPC,qBAAKR,QAAQQ,GAFN;EAGPN,yBAASF,QAAQE,OAAR,IAAmB,KAAKA;EAH1B,aAAX;;EAMA,gBAAGF,QAAQS,IAAR,KAAiB,IAApB,EACIH,KAAKI,QAAL,GAAgB,MAAhB;;EAEJ,gBAAGV,QAAQW,MAAX,EAAmB;EACfL,qBAAKM,IAAL,GAAYZ,QAAQW,MAApB;EACAL,qBAAKO,WAAL,GAAmB,IAAnB;EACH;;EAED,gBAAGb,QAAQY,IAAX,EAAiB;EACbN,qBAAKM,IAAL,GAAYZ,QAAQY,IAApB;EACAN,qBAAKO,WAAL,GAAmBb,QAAQa,WAAR,IAAuB,KAA1C;EACAP,qBAAKQ,WAAL,GAAmB,kBAAnB;EACH;;EAED;EACA,gBAAG,KAAKV,KAAR,EAAe;EACX,oBAAIA,QAAQ,KAAKA,KAAL,EAAZ;EACA,oBAAGA,KAAH,EAAU;EACNE,yBAAKS,OAAL,GAAeT,KAAKS,OAAL,IAAgB,EAA/B;EACAT,yBAAKS,OAAL,CAAaC,aAAb,GAA6B,YAAYZ,KAAzC;EACH;EACJ;;EAED;EACA,gBAAGJ,QAAQA,OAAX,EAAoB;EAChB,qBAAI,IAAIiB,CAAR,IAAajB,QAAQA,OAArB,EAA8B;EAC1B,wBAAGA,QAAQA,OAAR,CAAgBkB,cAAhB,CAA+BD,CAA/B,CAAH,EAAsC;EAClCX,6BAAKW,CAAL,IAAUjB,QAAQA,OAAR,CAAgBiB,CAAhB,CAAV;EACH;EACJ;EACJ;;EAED,mBAAOX,IAAP;EACH;;;kCAGOA,MAAM;;EAEV,gBAAG,OAAOa,MAAP,KAAmB,WAAtB,EAAmC;EAC/B,sBAAM,IAAIC,KAAJ,CAAU,oEAAV,CAAN;EACH;EACD,gBAAIC,IAAIC,EAAEC,KAAF,EAAR;EACAjB,iBAAKkB,OAAL,GAAe,UAASZ,IAAT,EAAe;EAAES,kBAAEI,OAAF,CAAUb,IAAV;EAAkB,aAAlD;EACAN,iBAAKoB,KAAL,GAAa,UAASC,GAAT,EAAcC,MAAd,EAAsBC,OAAtB,EAA+B;EAAER,kBAAES,MAAF,CAAS,IAAIV,KAAJ,CAAUS,OAAV,CAAT;EAA+B,aAA7E;EACAV,mBAAOY,IAAP,CAAYzB,IAAZ;EACA,mBAAOe,EAAEW,OAAT;EACH;;;;;MCjFCC;;EAEF;;;;;EAKA,0BAAYjC,OAAZ,EAAqB;EAAA;;EACjB,YAAG,OAAOkC,OAAP,KAAoB,WAAvB,EACI,MAAM,IAAId,KAAJ,CAAU,qBAAV,CAAN;;EAEJpB,kBAAUA,WAAW,EAArB;EACA,aAAKC,UAAL,CAAgBD,QAAQE,OAAR,IAAiB,KAAjC;EACA,aAAKC,YAAL,CAAkBH,QAAQI,KAA1B;;EAEA,YAAGJ,QAAQmC,KAAX,EACI,KAAKA,KAAL,GAAanC,QAAQmC,KAArB;EAEP;;;;qCAEUjC,SAAS;EAChB,iBAAKA,OAAL,GAAeA,OAAf;EACH;;EAED;;;;;;uCAGaG,KAAK;EACd,gBAAGA,OAAO,OAAOA,GAAP,KAAgB,QAA1B,EACI,KAAKD,KAAL,GAAa,YAAW;EAAE,uBAAOC,GAAP;EAAa,aAAvC,CADJ,KAEK,IAAGA,OAAO,OAAOA,GAAP,KAAgB,UAA1B,EACD,KAAKD,KAAL,GAAaC,GAAb;EACJ;EACH;;;4CAEiBL,SAAS;;EAEvB,gBAAIM,OAAO;EACPC,wBAAQP,QAAQO,MADT;EAEPC,qBAAKR,QAAQQ,GAFN;EAGPN,yBAASF,QAAQE,OAAR,IAAmB,KAAKA;EAH1B,aAAX;;EAMA,gBAAGF,QAAQS,IAAR,KAAiB,IAApB,EACIH,KAAKI,QAAL,GAAgB,MAAhB;;EAEJ,gBAAGV,QAAQW,MAAX,EAAmB;EACfL,qBAAKK,MAAL,GAAcX,QAAQW,MAAtB;EACH;;EAED,gBAAGX,QAAQY,IAAX,EAAiB;EACbN,qBAAKM,IAAL,GAAYZ,QAAQY,IAApB;EACH;;EAED;EACA,gBAAG,KAAKR,KAAR,EAAe;EACX,oBAAIA,QAAQ,KAAKA,KAAL,EAAZ;EACA,oBAAGA,KAAH,EAAU;EACNE,yBAAKS,OAAL,GAAeT,KAAKS,OAAL,IAAgB,EAA/B;EACAT,yBAAKS,OAAL,CAAaC,aAAb,GAA6B,YAAYZ,KAAzC;EACAE,yBAAK8B,UAAL,GAAkB,IAAlB;EACH;EACJ;;EAED;EACA,gBAAGpC,QAAQA,OAAX,EAAoB;EAChB,qBAAI,IAAIiB,CAAR,IAAajB,QAAQA,OAArB,EAA8B;EAC1B,wBAAGA,QAAQA,OAAR,CAAgBkB,cAAhB,CAA+BD,CAA/B,CAAH,EAAsC;EAClCX,6BAAKW,CAAL,IAAUjB,QAAQA,OAAR,CAAgBiB,CAAhB,CAAV;EACH;EACJ;EACJ;;EAED,mBAAOX,IAAP;EACH;;;kCAEOA,MAAM;;EAEV,gBAAG,OAAO4B,OAAP,KAAoB,WAAvB,EACI,MAAM,IAAId,KAAJ,CAAU,yFAAV,CAAN;;EAEJ,gBAAIe,QAAQ,KAAKA,KAAL,IAAcD,QAAQG,QAAR,CAAiB,CAAC,IAAD,CAAjB,EAAyBC,GAAzB,CAA6B,OAA7B,CAA1B;EACA,mBAAOhB,EAAEG,OAAF,CAAWU,KAAX,EACNI,IADM,CACD,iBAAS;EACX,oBAAG,OAAOJ,KAAP,KAAkB,WAArB,EACI,MAAM,IAAIf,KAAJ,CAAU,4BAAV,CAAN;;EAEJ;EACA,uBAAOe,MAAM7B,IAAN,CAAP;EACH,aAPM,EAQNiC,IARM,CAQD;EAAA,uBAAUC,SAAS5B,IAAnB;EAAA,aARC,EASN6B,KATM,CASA;EAAA,uBAAUnB,EAAEQ,MAAF,CAASU,SAAS5B,IAAlB,CAAV;EAAA,aATA,CAAP;EAUH;;;;;MC5FC8B;;EAEF;;;;EAIA,4BAAY1C,OAAZ,EAAqB;EAAA;;EACjBA,kBAAUA,WAAW,EAArB;EACA,aAAKC,UAAL,CAAgBD,QAAQE,OAAR,IAAiB,KAAjC;EACA,aAAKC,YAAL,CAAkBH,QAAQI,KAA1B;EACH;;;;qCAEUF,SAAS;EAChB,iBAAKA,OAAL,GAAeA,OAAf;EACH;;EAED;;;;;;uCAGaG,KAAK;EACd,gBAAGA,OAAO,OAAOA,GAAP,KAAgB,QAA1B,EACI,KAAKD,KAAL,GAAa,YAAW;EAAE,uBAAOC,GAAP;EAAa,aAAvC,CADJ,KAEK,IAAGA,OAAO,OAAOA,GAAP,KAAgB,UAA1B,EACD,KAAKD,KAAL,GAAaC,GAAb;EACJ;EACH;;;4CAEiBL,SAAS;;EAEvB,gBAAIM,OAAO;EACPC,wBAAQP,QAAQO,MADT;EAEPC,qBAAKR,QAAQQ,GAFN;EAGPC,sBAAM,UAAUT,QAAQS,IAHjB;EAIPP,yBAASF,QAAQE,OAAR,IAAmB,KAAKA;EAJ1B,aAAX;;EAOA,gBAAGF,QAAQW,MAAX,EAAmB;EACfL,qBAAKqC,EAAL,GAAU3C,QAAQW,MAAlB;EACH;;EAED,gBAAGX,QAAQ4C,IAAX,EAAiB;EACb,oBAAMC,KAAKC,QAAQ,IAAR,CAAX;EACA,oBAAG,CAACD,EAAJ,EAAQ,MAAM,IAAIzB,KAAJ,CAAU,2BAAV,CAAN;EACRd,qBAAKyC,QAAL,GAAgB;EACZH,0BAAM;EACFI,+BAAQH,GAAGI,gBAAH,CAAoBjD,QAAQ4C,IAAR,CAAaM,IAAjC,CADN;EAEFlD,iCAAS;EACLmD,sCAAUnD,QAAQ4C,IAAR,CAAaQ;EADlB;EAFP;EADM,iBAAhB;EAQAC,uBAAOC,MAAP,CAAchD,KAAKyC,QAAnB,EAA6B/C,QAAQY,IAAR,IAAc,EAA3C;EAEH,aAbD,MAaO,IAAGZ,QAAQY,IAAX,EAAiB;EACpB,oBAAGZ,QAAQ+C,QAAX,EAAqB;EACjBzC,yBAAKyC,QAAL,GAAgB/C,QAAQY,IAAxB;EACH,iBAFD,MAEO;EACHN,yBAAKiD,IAAL,GAAYvD,QAAQY,IAApB;EACH;EACJ;;EAED;EACA,gBAAG,KAAKR,KAAR,EAAe;EACX,oBAAIA,QAAQ,KAAKA,KAAL,EAAZ;EACA,oBAAGA,KAAH,EAAU;EACNE,yBAAKkD,IAAL,GAAY,EAAE,UAAUpD,KAAZ,EAAZ;EACH;EACJ;;EAED;EACA,gBAAGJ,QAAQA,OAAX,EAAoB;EAChB,qBAAI,IAAIiB,CAAR,IAAajB,QAAQA,OAArB,EAA8B;EAC1B,wBAAGA,QAAQA,OAAR,CAAgBkB,cAAhB,CAA+BD,CAA/B,CAAH,EAAsC;EAClCX,6BAAKW,CAAL,IAAUjB,QAAQA,OAAR,CAAgBiB,CAAhB,CAAV;EACH;EACJ;EACJ;;EAED;;EAEA,mBAAOX,IAAP;EACH;;EAID;;;;;;kCAGQN,SAAS;EAAA;;EACb,gBAAIyD,WAAWnC,EAAEC,KAAF,EAAf;;EAEA,gBAAMmC,UAAUZ,QAAQ,SAAR,CAAhB;EACA,gBAAG,CAACY,OAAJ,EAAa;EACT,sBAAM,IAAItC,KAAJ,CAAU,gCAAV,CAAN;EACH;EACD;;EAEAsC,oBAAQ1D,OAAR,EAAiB,UAAC0B,KAAD,EAAQc,QAAR,EAAkBe,IAAlB,EAA2B;EACxC,sBAAKI,mBAAL,CAAyBjC,KAAzB,EAAgCc,QAAhC,EACCD,IADD,CACO,YAAO;EACV,wBAAGvC,QAAQS,IAAR,KAAiB,KAApB,EACIgD,SAAShC,OAAT,CAAkBe,QAAlB,EADJ,KAGIiB,SAAShC,OAAT,CAAkB8B,IAAlB;EACP,iBAND,EAOCd,KAPD,CAOQ;EAAA,2BAAKgB,SAAS3B,MAAT,CAAgB8B,CAAhB,CAAL;EAAA,iBAPR;EAQH,aATD;EAUA,mBAAOH,SAASzB,OAAhB;EACH;;EAGD;;;;;;8CAGqBN,OAAOc,UAAU;;EAElC,gBAAIqB,QAAQ;EACRhC,yBAAS,IADD;EAERH,uBAAO,IAFC;EAGRE,wBAAQ;EAHA,aAAZ;;EAMA,gBAAGF,KAAH,EAAU;EACN;;EAEA,oBAAGA,MAAMoC,IAAN,KAAe,WAAf,IAA8BpC,MAAMoC,IAAN,KAAe,iBAAhD,EAAmE;;EAE/DD,0BAAMjC,MAAN,GAAe,GAAf;EACAiC,0BAAMnC,KAAN,GAAc,oBAAd;EACAmC,0BAAMhC,OAAN,GAAgB,qDAAhB;;EAEA,wBAAGH,MAAMqC,OAAN,KAAkB,IAArB,EAA2B;EACvBF,8BAAMhC,OAAN,GAAgB,iDAAhB;EACH;EAEJ,iBAVD,MAUO;EACH,2BAAOP,EAAEQ,MAAF,CAASJ,KAAT,CAAP;EACH;EAEJ,aAjBD,MAiBO,IAAGc,SAASwB,UAAT,GAAsB,GAAtB,IAA6BxB,SAASwB,UAAT,GAAsB,GAAtD,EAA2D;;EAE9D;EACA;;EAEAH,sBAAMjC,MAAN,GAAeY,SAASwB,UAAxB;;EAEA,oBAAGxB,SAASe,IAAT,IAAiBU,QAAOzB,SAASe,IAAhB,MAA0B,QAA9C,EAAwD;EACpDM,4BAAQrB,SAASe,IAAjB;EACAM,0BAAMjC,MAAN,GAAeiC,MAAMjC,MAAN,IAAgBY,SAASwB,UAAxC;EACAH,0BAAMhC,OAAN,GAAgBgC,MAAMhC,OAAN,IAAiB,8CAAjC;;EAEA,wBAAGW,SAASwB,UAAT,KAAwB,GAA3B,EAAgC;EAC5B,4BAAIE,OAAO1B,SAASe,IAAT,CAAc1B,OAAd,CAAsBsC,OAAtB,CAA8B,GAA9B,CAAX;EACA,4BAAIC,OAAO5B,SAASe,IAAT,CAAc1B,OAAd,CAAsBsC,OAAtB,CAA8B,iBAA9B,CAAX;EACA,4BAAGD,QAAQ,CAAR,IAAaE,OAAOF,IAAvB,EAA6B;EACzBL,kCAAMQ,IAAN,GAAa7B,SAASe,IAAT,CAAc1B,OAAd,CAAsByC,SAAtB,CAAgCJ,OAAK,CAArC,EAAwCE,IAAxC,CAAb;EACH;EACJ;EAEJ,iBAbD,MAaO;;EAEH,4BAAO5B,SAASwB,UAAhB;EACI,6BAAK,GAAL;EACIH,kCAAMnC,KAAN,GAAc,WAAd;EACAmC,kCAAMhC,OAAN,GAAgBW,SAASkB,OAAT,CAAiBa,GAAjB,CAAqBC,QAArB,GAAgC,kBAAhD;EACA;EACJ,6BAAK,GAAL;EACIX,kCAAMnC,KAAN,GAAc,iBAAd;EACAmC,kCAAMhC,OAAN,GAAgB,2BAAhB;EACA;EACJ,6BAAK,GAAL;EACIgC,kCAAMnC,KAAN,GAAc,cAAd;EACAmC,kCAAMhC,OAAN,GAAgB,sCAAsCW,SAASkB,OAAT,CAAiBa,GAAjB,CAAqBC,QAA3E;EACA;EACJ,6BAAK,GAAL;EACIX,kCAAMnC,KAAN,GAAc,UAAd;EACAmC,kCAAMhC,OAAN,GAAgB,qBAAhB;;EAEA;EACA,gCAAI;EACA,oCAAIpB,OAAOgE,KAAKC,KAAL,CAAWlC,SAASe,IAApB,CAAX;EACA,oCAAIW,QAAOzD,KAAKoB,OAAL,CAAasC,OAAb,CAAqB,GAArB,CAAX;EACA,oCAAIC,QAAO3D,KAAKoB,OAAL,CAAasC,OAAb,CAAqB,iBAArB,CAAX;EACA,oCAAGD,SAAQ,CAAR,IAAaE,QAAOF,KAAvB,EAA6B;EACzBL,0CAAMQ,IAAN,GAAa5D,KAAKoB,OAAL,CAAayC,SAAb,CAAuBJ,QAAK,CAA5B,EAA+BE,KAA/B,CAAb;EACH;EACJ,6BAPD,CAOE,OAAOR,CAAP,EAAW;EACT/B,2CAAW,gEAAX;EACH;EACD;;EAEJ;;EAEI,gCAAI;EACA,oCAAIpB,QAAOgE,KAAKC,KAAL,CAAWlC,SAASe,IAApB,CAAX;EACAM,wCAAQpD,KAAR;EACAoD,sCAAMjC,MAAN,GAAeY,SAASwB,UAAxB;EACA;EAEH,6BAND,CAME,OAAOJ,CAAP,EAAU;EACRC,sCAAMnC,KAAN,GAAc,cAAd;EACAmC,sCAAMhC,OAAN,GAAgBW,SAASe,IAAzB;EACA;EACH;EA1CT;EA6CH;EAEJ;;EAED,gBAAIM,MAAMjC,MAAN,GAAe,GAAf,IAAsBiC,MAAMjC,MAAN,GAAe,GAAzC,EAA+C;;EAE3CiC,sBAAMnC,KAAN,GAAcmC,MAAMnC,KAAN,IAAe,cAA7B;EACAmC,sBAAMjC,MAAN,GAAeiC,MAAMjC,MAAN,IAAgBY,SAASwB,UAAxC;EACAH,sBAAMhC,OAAN,GAAgBgC,MAAMhC,OAAN,IAAiB,8CAAjC;;EAEA,oBAAI8C,MAAM,IAAIvD,KAAJ,CAAUyC,MAAMhC,OAAhB,CAAV;EACAwB,uBAAOC,MAAP,CAAcqB,GAAd,EAAmBd,KAAnB;;EAEA;EACA;EACA;EACA,uBAAOvC,EAAEQ,MAAF,CAAS6C,GAAT,CAAP;EACH;;EAED,mBAAOrD,EAAEG,OAAF,EAAP;EACH;;;;;ACnOL,kBAAe;EACXmD,aAAkB,cADP;EAEXC,aAAkB,cAFP;EAGXC,WAAkB,OAHP;EAIXC,SAAkB,KAJP;EAKXC,aAAkB,SALP;EAMXC,kBAAkB,kBANP;EAOXC,eAAkB,WAPP;EAQXC,aAAkB,cARP;EASXC,oBAAkB,oBATP;EAUXC,cAAkB;EAVP,CAAf;;ECEA;;;;;;;;;;;;;;;;;;;;;;;;;MAwBMC;EAEF,yBAAY9E,GAAZ,EAAiB+E,UAAjB,EAA6B;EAAA;;EACzB,aAAKC,MAAL,CAAYhF,GAAZ;EACA,aAAKiF,MAAL,GAAcF,UAAd;EACA,aAAKrF,OAAL,GAAe,KAAf;EACA,aAAKwF,WAAL,GAAmB,CAAC,KAAD,EAAQ,MAAR,EAAgB,KAAhB,EAAuB,QAAvB,EAAiC,OAAjC,CAAnB;EACH;;;;iCAEMC,SAAS;EACZ,iBAAKC,OAAL,GAAeD,OAAf;EACA,iBAAKA,OAAL,GAAeA,UAAU,YAAzB;EACH;;EAGD;;;;;;;;iCAKKE,IAAI7F,SAAS;EAAA;;EAEd,mBAAOsB,EAAEG,OAAF,CAAWoE,EAAX,EACNtD,IADM,CACA,cAAM;EACT,oBAAIjC,OAAO,MAAKwF,YAAL,CAAkB;EACzBvF,4BAAO,KADkB,EACXC,KAAI,MAAKmF,OAAL,GAAe,GAAf,GAAqBE,EADd,EACkB7F,SAAQA;EAD1B,iBAAlB,CAAX;EAGA,uBAAO,MAAK+F,OAAL,CAAazF,IAAb,CAAP;EACH,aANM,EAONmC,KAPM,CAOA,aAAK;EACR,oBAAIkC,MAAM,IAAIvD,KAAJ,8CAAqDyE,EAArD,UAA4DjC,EAAE/B,OAA9D,CAAV;EACA,uBAAOP,EAAEQ,MAAF,CAAS6C,GAAT,CAAP;EACH,aAVM,CAAP;EAWH;;EAED;;;;;;;;+BAKMqB,SAAShG,SAAS;EAAA;;EAEpB,mBAAOsB,EAAEG,OAAF,CAAWuE,OAAX,EACNzD,IADM,CACA,gBAAQ;;EAEX,oBAAIhC,SAAS,MAAb;EAAA,oBACIC,MAAM,OAAKmF,OADf;EAEA,oBAAGtB,KAAKwB,EAAR,EAAY;EACRtF,6BAAS,KAAT;EACAC,2BAAO,MAAM6D,KAAKwB,EAAlB;EACH,iBAHD,MAGO;EACH;EACA;EACA;EACA,wBAAG,CAACxB,KAAKE,GAAT,EAAc;EACV,+BAAO,OAAK0B,MAAL,CAAY5B,IAAZ,EAAkBrE,OAAlB,EACNuC,IADM,CACA,eAAO;EACV8B,iCAAKE,GAAL,GAAWA,GAAX;EACA,gCAAIjE,OAAO,OAAKwF,YAAL,CAAkB,EAACvF,QAAOA,MAAR,EAAgBC,KAAIA,GAApB,EAAyBI,MAAKyD,IAA9B,EAAoCrE,SAAQA,OAA5C,EAAlB,CAAX;EACA,mCAAO,OAAK+F,OAAL,CAAazF,IAAb,CAAP;EACH,yBALM,CAAP;EAMH;EACJ;;EAED,oBAAIA,OAAO,OAAKwF,YAAL,CAAkB,EAACvF,QAAOA,MAAR,EAAgBC,KAAIA,GAApB,EAAyBI,MAAKyD,IAA9B,EAAoCrE,SAAQA,OAA5C,EAAlB,CAAX;EACA,uBAAO,OAAK+F,OAAL,CAAazF,IAAb,CAAP;EAEH,aAzBM,EA0BNmC,KA1BM,CA0BA,aAAK;EACR,oBAAIkC,MAAM,IAAIvD,KAAJ,8CAAqDwC,EAAE/B,OAAvD,CAAV;EACA,uBAAOP,EAAEQ,MAAF,CAAS6C,GAAT,CAAP;EACH,aA7BM,CAAP;EA8BH;;EAED;;;;;;;;iCAKQkB,IAAI7F,SAAS;EAAA;;EAEjB,mBAAOsB,EAAEG,OAAF,CAAW,KAAKkE,OAAL,GAAe,GAAf,GAAqBE,EAAhC,EACNtD,IADM,CACA,eAAO;EACV,oBAAIjC,OAAO,OAAKwF,YAAL,CAAkB;EACzBvF,4BAAO,QADkB,EACRC,KAAKA,GADG,EACER,SAASA;EADX,iBAAlB,CAAX;EAGA,uBAAO,OAAK+F,OAAL,CAAazF,IAAb,CAAP;EACH,aANM,EAONiC,IAPM,CAOD;EAAA,uBAAY,IAAZ;EAAA,aAPC,EAQNE,KARM,CAQA,aAAK;EACR,oBAAIkC,MAAM,IAAIvD,KAAJ,iDAAwDyE,EAAxD,UAA+DjC,EAAE/B,OAAjE,CAAV;EACA,uBAAOP,EAAEQ,MAAF,CAAS6C,GAAT,CAAP;EACH,aAXM,CAAP;EAYH;;EAED;;;;;;;;;gCAMOkB,IAAIK,QAAOlG,SAAS;EAAA;;EAEvB,mBAAOsB,EAAEG,OAAF,CAAW,KAAKkE,OAAL,GAAe,GAAf,GAAqBE,EAAhC,EACNtD,IADM,CACA,eAAO;EACV,oBAAIjC,OAAO,OAAKwF,YAAL,CAAkB;EACzBvF,4BAAQ,OADiB,EACRC,KAAKA,GADG,EACEI,MAAMsF,MADR,EACelG,SAASA;EADxB,iBAAlB,CAAX;EAGA,uBAAO,OAAK+F,OAAL,CAAazF,IAAb,CAAP;EACH,aANM,EAONmC,KAPM,CAOA,aAAK;EACR,oBAAIkC,MAAM,IAAIvD,KAAJ,gDAAuDyE,EAAvD,UAA8DjC,EAAE/B,OAAhE,CAAV;EACA,uBAAOP,EAAEQ,MAAF,CAAS6C,GAAT,CAAP;EACH,aAVM,CAAP;EAWH;;EAED;;;;;;;;iCAKQtE,KAAKL,SAAS;EAAA;;EAElB,mBAAOsB,EAAEG,OAAF,CAAWpB,GAAX,EACNkC,IADM,CACA,kBAAU;;EAEb,oBAAG5B,UAAU,OAAOA,OAAOwF,QAAd,KAA4B,WAAzC,EAAsD;EAClD;EACA;EACAxF,6BAASA,OAAOwF,QAAP,EAAT;EACH;EACD,oBAAI7F,OAAO,OAAKwF,YAAL,CAAkB;EACzBvF,4BAAO,KADkB,EACXC,KAAK,OAAKmF,OADC,EACQhF,QAAQA,MADhB,EACwBX,SAASA;EADjC,iBAAlB,CAAX;EAGA,uBAAO,OAAK+F,OAAL,CAAazF,IAAb,CAAP;EACH,aAZM,EAaNmC,KAbM,CAaA,aAAK;EACR,oBAAIkC,MAAM,IAAIvD,KAAJ,oDAA2DwC,EAAE/B,OAA7D,CAAV;EACA,uBAAOP,EAAEQ,MAAF,CAAS6C,GAAT,CAAP;EACH,aAhBM,CAAP;EAiBH;;EAGD;;;;;;;;;kCAMQtE,KAAK+F,QAAQpG,SAAS;EAAA;;EAE1B,mBAAOsB,EAAEG,OAAF,CAAW,IAAX,EACNc,IADM,CACA,YAAM;EACT,oBAAGlC,QAAM,IAAN,IAAcA,QAAQgG,SAAzB,EAAoC;EAChC,0BAAM,IAAIjF,KAAJ,CAAU,kCAAV,CAAN;EACH;EACD,oBAAIkF,SAAS,OAAOjG,GAAP,KAAgB,QAA7B;EACA,oBAAIkG,KAAK;EACLhG,4BAAO,MADF;EAELC,yBAAK,OAAKoF,OAAL,GAAe,aAFf;EAGL/E,iCAAa,IAHR;EAILkC,8BAAU,IAJL;EAKL/C,6BAASA;EALJ,iBAAT;EAOA,oBAAGsG,MAAH,EAAW;EACPC,uBAAG3D,IAAH,GAAUvC,GAAV;EACAkG,uBAAG3F,IAAH,GAAU,EAAEwF,QAAQA,MAAV,EAAV;EACH,iBAHD,MAGO;EACHG,uBAAGxD,QAAH,GAAc,KAAd,CADG;EAEHwD,uBAAG3F,IAAH,GAAU,EAAEJ,KAAKH,GAAP,EAAY+F,QAAQA,MAApB,EAAV;EACH;EACD,oBAAI9F,OAAO,OAAKwF,YAAL,CAAkBS,EAAlB,CAAX;EACA,uBAAO,OAAKR,OAAL,CAAazF,IAAb,CAAP;EACH,aAtBM,EAuBNmC,KAvBM,CAuBC,aAAK;EACT,oBAAIkC,MAAM,IAAIvD,KAAJ,mDAA0DwC,EAAE/B,OAA5D,CAAV;EACA,oBAAG+B,EAAEhC,MAAF,KAAa,GAAb,IAAoB,CAACgC,EAAE/B,OAAF,CAAUsC,OAAV,CAAkB,qBAAlB,CAAxB,EAAkEQ,IAAI/C,MAAJ,GAAa,GAAb;EAClE,oBAAGgC,EAAES,IAAL,EAAWM,IAAIN,IAAJ,GAAWT,EAAES,IAAb;EACX,uBAAO/C,EAAEQ,MAAF,CAAS6C,GAAT,CAAP;EACH,aA5BM,CAAP;EA6BH;;EAID;;;;;;;;kCAKQkB,IAAIO,QAAQpG,SAAS;EAAA;;EAEzB,mBAAOsB,EAAEG,OAAF,CAAW,IAAX,EACNc,IADM,CACA,YAAM;EACT,oBAAI/B,MAAM,OAAKmF,OAAL,GAAe,GAAf,GAAqBE,EAArB,GAA0B,SAApC;EACA,oBAAIvF,OAAO,OAAKwF,YAAL,CAAkB;EACzBvF,4BAAQ,KADiB,EACVC,KAAKA,GADK;EAEzBG,4BAAQ,EAACyF,QAAOA,MAAR,EAFiB;EAGzB3F,0BAAM,KAHmB;EAIzBT,6BAASA;EAJgB,iBAAlB,CAAX;EAMA,uBAAO,OAAK+F,OAAL,CAAazF,IAAb,CAAP;EACH,aAVM,EAWNmC,KAXM,CAWC,aAAK;EACT,oBAAIkC,MAAM,IAAIvD,KAAJ,mDAA0DwC,EAAE/B,OAA5D,CAAV;EACA,uBAAOP,EAAEQ,MAAF,CAAS6C,GAAT,CAAP;EACH,aAdM,CAAP;EAeH;;EAGD;;;;;;;;iCAKQ6B,QAAQxG,SAAS;EAAA;;EAErB,mBAAOsB,EAAEG,OAAF,CAAW+E,MAAX,EACNjE,IADM,CACA,eAAO;EACV,oBAAG,CAACkE,GAAD,IAAQ,CAACA,IAAIC,IAAhB,EACI,MAAM,IAAItF,KAAJ,CAAU,6CAAV,CAAN;EACJ,oBAAIZ,MAAM,OAAKoF,OAAL,GAAe,gBAAzB;EACA,oBAAItF,OAAO,OAAKwF,YAAL,CAAkB;EACzBvF,4BAAQ,MADiB,EACTC,KAAKA,GADI,EACCI,MAAM6F,GADP,EACYzG,SAASA;EADrB,iBAAlB,CAAX;EAGA,uBAAO,OAAK+F,OAAL,CAAazF,IAAb,CAAP;EACH,aATM,EAUNmC,KAVM,CAUC,aAAK;EACT,oBAAIkC,MAAM,IAAIvD,KAAJ,yDAAgEwC,EAAE/B,OAAlE,CAAV;EACA,uBAAOP,EAAEQ,MAAF,CAAS6C,GAAT,CAAP;EACH,aAbM,CAAP;EAeH;;EAQD;;EAEA;;;;;;;;;;;uCAQc3E,SAAS;;EAEnB,gBAAG,KAAK0F,WAAL,CAAiBvB,OAAjB,CAAyBnE,QAAQO,MAAjC,IAAyC,CAA5C,EACI,MAAM,IAAIa,KAAJ,8BAAqCpB,QAAQO,MAA7C,CAAN;;EAEJ,gBAAG,CAACP,QAAQQ,GAAZ,EACI,MAAM,IAAIY,KAAJ,wCAAN;;EAEJpB,oBAAQE,OAAR,GAAkB,KAAKA,OAAvB;;EAEA,gBAAII,OAAO,KAAKqG,iBAAL,CAAuB3G,OAAvB,CAAX;;EAEA,mBAAOM,IAAP;EACH;;;4CAEiBN,SAAS;EACvB,mBAAO,KAAKyF,MAAL,CAAYkB,iBAAZ,CAA8B3G,OAA9B,CAAP;EACH;;;kCAEOM,MAAM;EACV,mBAAO,KAAKmF,MAAL,CAAYM,OAAZ,CAAoBzF,IAApB,CAAP;EACH;;;;;ECvSL;;;;;;;;MAQMsG;;;EAEF,4BAAYpG,GAAZ,EAAiB+E,UAAjB,EAA6B;EAAA;EAAA,8HACnB/E,GADmB,EACd+E,UADc;EAE5B;;;;iCAEMI,SAAS;EACZ,kIAAaA,OAAb;EACA,iBAAKA,OAAL,GAAeA,UAAU,eAAzB;EACH;;;IATwBL;;ECP7B;;;;;;;;MAQMuB;;;EAEF,wBAAYrG,GAAZ,EAAiB+E,UAAjB,EAA6B;EAAA;EAAA,sHACnB/E,GADmB,EACd+E,UADc;EAE5B;;;;iCAEMI,SAAS;EACZ,0HAAaA,OAAb;EACA,iBAAKA,OAAL,GAAeA,UAAU,WAAzB;EACH;;;IAToBL;;ECPzB;;;;;;;;MAQMwB;;;EAEF,0BAAYtG,GAAZ,EAAiB+E,UAAjB,EAA6B;EAAA;EAAA,0HACnB/E,GADmB,EACd+E,UADc;EAE5B;;;;iCAEMI,SAAS;EACZ,8HAAaA,OAAb;EACA,iBAAKA,OAAL,GAAeA,UAAU,aAAzB;EACH;;EAED;;;;;;;gCAIO3F,SAAS;EAAA;;EACZ,mBAAOsB,EAAEG,OAAF,CAAW,IAAX,EACNc,IADM,CACA,YAAM;;EAET,oBAAI/B,MAAM,OAAKmF,OAAL,GAAe,GAAf,GAAqBE,EAArB,GAA0B,QAApC;EACA,oBAAIvF,OAAO,OAAKwF,YAAL,CAAkB;EACzBvF,4BAAO,KADkB,EACXC,KAAIA,GADO,EACFR,SAAQA;EADN,iBAAlB,CAAX;EAGA,uBAAO,OAAK+F,OAAL,CAAazF,IAAb,CAAP;EACH,aARM,EASNmC,KATM,CASA,aAAK;EACR,oBAAIkC,MAAM,IAAIvD,KAAJ,mDAA0DwC,EAAE/B,OAA5D,CAAV;EACA,uBAAOP,EAAEQ,MAAF,CAAS6C,GAAT,CAAP;EACH,aAZM,CAAP;EAaH;;EAED;;;;;;;;;mCAMUkB,IAAIkB,KAAK/G,SAAU;EAAA;;EAEzB,mBAAOsB,EAAEG,OAAF,CAAWsF,GAAX,EACNxE,IADM,CACA,UAACwE,GAAD,EAAS;;EAEZ,oBAAG,CAACA,GAAJ,EAAS;EACL,0BAAM,IAAI3F,KAAJ,CAAU,yCAAV,CAAN;EACH;;EAED,oBAAI4F,OAAO,CAAC,MAAD,EAAS,QAAT,EAAmB,OAAnB,EAA4B,GAA5B,EAAiC,GAAjC,CAAX;EACA,oBAAIC,UAAUD,KAAKE,IAAL,CAAU;EAAA,2BAAO,CAACH,IAAII,GAAJ,CAAR;EAAA,iBAAV,CAAd;EACA,oBAAGF,OAAH,EAAY;EACR,0BAAM,IAAI7F,KAAJ,mBAA0B6F,OAA1B,sBAAN;EACH;;EAED,oBAAItG,SAAS;EACTyG,yBAAc,WADL;EAETC,0BAAcN,IAAIM,IAFT;EAGTC,4BAAcP,IAAIO,MAHT;EAITC,2BAAcR,IAAIQ,KAJT;EAKTC,iCAAc,UALL;EAMTC,uBAAcV,IAAIU,CANT;EAOTC,uBAAcX,IAAIW,CAPT;EAQTC,uBAAcZ,IAAIU,CART;EASTG,uBAAcb,IAAIW,CATT;EAAA,iBAAb;;EAYA,oBAAIlH,MAAM,OAAKmF,OAAL,GAAe,GAAf,GAAqBE,EAArB,GAA0B,WAApC;EACA,oBAAIvF,OAAO,OAAKwF,YAAL,CAAkB;EACzBvF,4BAAO,KADkB,EACXC,KAAIA,GADO,EACFG,QAAOA,MADL,EACaX,SAAQA;EADrB,iBAAlB,CAAX;EAGA,uBAAO,OAAK+F,OAAL,CAAazF,IAAb,CAAP;EACH,aA9BM,EA+BNmC,KA/BM,CA+BA,aAAK;EACR,oBAAIkC,MAAM,IAAIvD,KAAJ,iFAC4BwC,EAAE/B,OAD9B,CAAV;EAEA,uBAAOP,EAAEQ,MAAF,CAAS6C,GAAT,CAAP;EACH,aAnCM,CAAP;EAoCH;;EAED;;;;;;;;;mCAMSkB,IAAIlF,QAAQX,SAAS;EAAA;;EAE1B,mBAAOsB,EAAEG,OAAF,CAAWd,MAAX,EACN4B,IADM,CACA,kBAAU;;EAEb,oBAAG,CAAC5B,MAAJ,EAAY;EACR,0BAAM,IAAIS,KAAJ,CAAU,oDAAV,CAAN;EACH;;EAED,oBAAIZ,MAAM,OAAKmF,OAAL,GAAe,GAAf,GAAqBE,EAArB,GAA0B,WAApC;EACA,oBAAIvF,OAAO,OAAKwF,YAAL,CAAkB;EACzBvF,4BAAO,KADkB,EACXC,KAAIA,GADO,EACFG,QAAOA,MADL,EACaX,SAAQA;EADrB,iBAAlB,CAAX;EAGA,uBAAO,OAAK+F,OAAL,CAAazF,IAAb,CAAP;EACH,aAZM,EAaNmC,KAbM,CAaA,aAAK;EACR,oBAAIkC,MAAM,IAAIvD,KAAJ,iFAC4BwC,EAAE/B,OAD9B,CAAV;EAEA,uBAAOP,EAAEQ,MAAF,CAAS6C,GAAT,CAAP;EACH,aAjBM,CAAP;EAkBH;;;IAvGsBW;;ECP3B;;;;;;;;MAQMuC;;;EAEF,4BAAYrH,GAAZ,EAAiB+E,UAAjB,EAA6B;EAAA;EAAA,8HACnB/E,GADmB,EACd+E,UADc;EAE5B;;;;iCAEMI,SAAS;EACZ,kIAAaA,OAAb;EACA,iBAAKA,OAAL,GAAeA,UAAU,eAAzB;EACH;;EAGD;;;;;;;;;;;gCAQOmC,SAAS9H,SAAU;EAAA;;EAEtB,mBAAOsB,EAAEG,OAAF,CAAWqG,OAAX,EACNvF,IADM,CACA,eAAO;EACV,oBAAG,CAACwF,GAAJ,EACI,MAAM,IAAI3G,KAAJ,CAAU,4CAAV,CAAN;EACJ,oBAAId,OAAO,OAAKwF,YAAL,CAAkB;EACzBvF,4BAAO,MADkB,EACVC,KAAI,OAAKmF,OAAL,GAAe,QADT,EACmB/E,MAAKmH,GADxB,EAC6B/H,SAAQA;EADrC,iBAAlB,CAAX;EAGA,uBAAO,OAAK+F,OAAL,CAAazF,IAAb,CAAP;EACH,aARM,EASNmC,KATM,CASA,aAAK;EACR,oBAAIkC,MAAM,IAAIvD,KAAJ,0EACsBwC,EAAE/B,OADxB,CAAV;EAEA,uBAAOP,EAAEQ,MAAF,CAAS6C,GAAT,CAAP;EACH,aAbM,CAAP;EAcH;;EAID;;;;;;;gCAIO3E,SAAS;EAAA;;EAEZ,gBAAIgI,QAAQ,IAAIC,KAAJ,GACXC,KADW,CACLC,UAAU9C,QADL,EAEX+C,aAFW,CAEG,aAFH,EAGXC,QAHW,CAGF,EAHE,EAIXlC,QAJW,EAAZ;;EAMA,mBAAO7E,EAAEG,OAAF,CAAWuG,KAAX,EACNzF,IADM,CACA,UAAC5B,MAAD,EAAY;EACf,oBAAIH,MAAM,OAAKoF,OAAL,GAAe,YAAzB;EACA,oBAAItF,OAAO,OAAKwF,YAAL,CAAkB;EACzBvF,4BAAO,KADkB,EACXC,KAAIA,GADO,EACFG,QAAOA,MADL,EACaX,SAAQA;EADrB,iBAAlB,CAAX;EAGA,uBAAO,OAAK+F,OAAL,CAAazF,IAAb,CAAP;EACH,aAPM,EAQNiC,IARM,CAQD;EAAA,uBAAYC,SAAS8F,OAArB;EAAA,aARC,EASN7F,KATM,CASA,aAAK;EACR,oBAAIkC,MAAM,IAAIvD,KAAJ,8EAC0BwC,EAAE/B,OAD5B,CAAV;EAEA,uBAAOP,EAAEQ,MAAF,CAAS6C,GAAT,CAAP;EACH,aAbM,CAAP;EAcH;;EAGD;;;;;;;;kCAKQmD,SAAS9H,SAAS;EAAA;;EAEtB,mBAAOsB,EAAEG,OAAF,CAAWqG,OAAX,EACNvF,IADM,CACA,eAAO;EACV,oBAAI/B,MAAM,OAAKmF,OAAL,GAAe,SAAzB;EACA,oBAAIrF,OAAO,OAAKwF,YAAL,CAAkB;EACzBvF,4BAAO,MADkB,EACVC,KAAIA,GADM,EACDI,MAAKmH,GADJ,EACS/H,SAAQA;EADjB,iBAAlB,CAAX;EAGA,uBAAO,OAAK+F,OAAL,CAAazF,IAAb,CAAP;EACH,aAPM,EAQNmC,KARM,CAQA,aAAK;EACR,oBAAIkC,MAAM,IAAIvD,KAAJ,0EACqBwC,EAAE/B,OADvB,CAAV;EAEA,uBAAOP,EAAEQ,MAAF,CAAS6C,GAAT,CAAP;EACH,aAZM,CAAP;EAaH;;EAGD;;;;;;;;kCAKSkB,IAAI7F,SAAS;EAAA;;EAElB,mBAAOsB,EAAEG,OAAF,CAAWoE,EAAX,EACNtD,IADM,CACA,cAAM;EACT,oBAAI/B,MAAM,OAAKmF,OAAL,GAAe,GAAf,GAAqBE,EAArB,GAA0B,UAApC;EACA,oBAAIvF,OAAO,OAAKwF,YAAL,CAAkB;EACzBvF,4BAAO,KADkB,EACXC,KAAIA,GADO,EACFR,SAAQA;EADN,iBAAlB,CAAX;EAGA,uBAAO,OAAK+F,OAAL,CAAazF,IAAb,CAAP;EACH,aAPM,EAQNmC,KARM,CAQA,aAAK;EACR,oBAAIkC,MAAM,IAAIvD,KAAJ,wFACkCwC,EAAE/B,OADpC,CAAV;EAEA,uBAAOP,EAAEQ,MAAF,CAAS6C,GAAT,CAAP;EACH,aAZM,CAAP;EAcH;;EAED;;;;;;;;mCAKUkB,IAAI7F,SAAS;EAAA;;EAEnB,mBAAOsB,EAAEG,OAAF,CAAWoE,EAAX,EACNtD,IADM,CACA,cAAM;EACT,oBAAI/B,MAAM,OAAKmF,OAAL,GAAe,GAAf,GAAqBE,EAArB,GAA0B,OAApC;EACA,oBAAIvF,OAAO,OAAKwF,YAAL,CAAkB;EACzBvF,4BAAO,KADkB,EACXC,KAAIA,GADO,EACFR,SAAQA;EADN,iBAAlB,CAAX;EAGA,uBAAO,OAAK+F,OAAL,CAAazF,IAAb,CAAP;EACH,aAPM,EAQNmC,KARM,CAQA,aAAK;EACR,oBAAIkC,MAAM,IAAIvD,KAAJ,0EACmBwC,EAAE/B,OADrB,CAAV;EAEA,uBAAOP,EAAEQ,MAAF,CAAS6C,GAAT,CAAP;EACH,aAZM,CAAP;EAaH;;EAED;;;;;;;;qCAKYkB,IAAI7F,SAAS;EAAA;;EACrB,mBAAOsB,EAAEG,OAAF,CAAWoE,EAAX,EACNtD,IADM,CACA,cAAM;EACT,oBAAI/B,MAAM,OAAKmF,OAAL,GAAe,GAAf,GAAqBE,EAArB,GAA0B,aAApC;EACA,oBAAIvF,OAAO,OAAKwF,YAAL,CAAkB;EACzBvF,4BAAO,KADkB,EACXC,KAAIA,GADO,EACFR,SAAQA;EADN,iBAAlB,CAAX;EAGA,uBAAO,OAAK+F,OAAL,CAAazF,IAAb,CAAP;EACH,aAPM,EAQNmC,KARM,CAQA,aAAK;EACR,oBAAIkC,MAAM,IAAIvD,KAAJ,uFAC8BwC,EAAE/B,OADhC,CAAV;EAEA,uBAAOP,EAAEQ,MAAF,CAAS6C,GAAT,CAAP;EACH,aAZM,CAAP;EAaH;;;IA5JwBW;;ECV7B;;;;;;;;MAQMiD;;;EAEF,4BAAY/H,GAAZ,EAAiB+E,UAAjB,EAA6B;EAAA;EAAA,8HACnB/E,GADmB,EACd+E,UADc;EAE5B;;;;iCAEMI,SAAS;EACZ,kIAAaA,OAAb;EACA,iBAAKA,OAAL,GAAeA,UAAU,gBAAzB;EACH;;;kCAEQ6C,WAAWxC,SAAShG,SAAS;EAAA;;EAClC,mBAAOsB,EAAEG,OAAF,CAAW,IAAX,EACNc,IADM,CACA,YAAM;EACT,oBAAI/B,MAAM,OAAKmF,OAAL,GAAe,GAAf,GAAqB6C,SAArB,GAAiC,QAA3C;EACA,oBAAIlI,OAAO,OAAKwF,YAAL,CAAkB;EACzBvF,4BAAO,MADkB,EACVC,KAAIA,GADM,EACDI,MAAMoF,OADL,EACchG,SAAQA;EADtB,iBAAlB,CAAX;EAGA,uBAAO,OAAK+F,OAAL,CAAazF,IAAb,CAAP;EACH,aAPM,EAQNmC,KARM,CAQA,aAAK;EACR,oBAAIkC,MAAM,IAAIvD,KAAJ,CAAU,mDAAmDwC,EAAE/B,OAA/D,CAAV;EACA,uBAAOP,EAAEQ,MAAF,CAAS6C,GAAT,CAAP;EACH,aAXM,CAAP;EAYH;;;qCAEW6D,WAAWC,QAAQzI,SAAS;EAAA;;EACpC,mBAAOsB,EAAEG,OAAF,CAAW,KAAKkE,OAAL,GAAe,GAAf,GAAqB6C,SAArB,GAAiC,SAAjC,GAA6CC,MAAxD,EACNlG,IADM,CACA,eAAO;EACV,oBAAIjC,OAAO,OAAKwF,YAAL,CAAkB;EACzBvF,4BAAO,QADkB,EACRC,KAAIA,GADI,EACCR,SAAQA;EADT,iBAAlB,CAAX;EAGA,uBAAO,OAAK+F,OAAL,CAAazF,IAAb,CAAP;EACH,aANM,EAONiC,IAPM,CAOD;EAAA,uBAAU,IAAV;EAAA,aAPC,EAQNE,KARM,CAQA,aAAK;EACR,oBAAIkC,MAAM,IAAIvD,KAAJ,CAAU,mDAAmDwC,EAAE/B,OAA/D,CAAV;EACA,uBAAOP,EAAEQ,MAAF,CAAS6C,GAAT,CAAP;EACH,aAXM,CAAP;EAYH;;;IAvCwBW;;MCRvBoD;EAEF,0BAAYlI,GAAZ,EAAiB+E,UAAjB,EAA6B;EAAA;;EACzB,aAAKC,MAAL,CAAYhF,GAAZ;EACA,aAAKiF,MAAL,GAAcF,UAAd;EACA,aAAKrF,OAAL,GAAe,KAAf;EACA,aAAKwF,WAAL,GAAmB,CAAC,KAAD,EAAQ,MAAR,EAAgB,KAAhB,EAAuB,QAAvB,EAAiC,OAAjC,CAAnB;EACH;;;;iCAEMC,SAAS;EACZ,iBAAKA,OAAL,GAAeA,OAAf;EACH;;EAGD;;;;;;;;;uCAMcgD,UAAUX,OAAOhI,SAAS;EAAA;;EAEpC,gBAAIQ,MAAM,KAAKmF,OAAL,GAAe,mBAAzB;EACA,gBAAGgD,QAAH,EACInI,OAAO,MAAMmI,QAAb;;EAEJ,mBAAOrH,EAAEG,OAAF,CAAWjB,GAAX,EACN+B,IADM,CACA,UAAC/B,GAAD,EAAS;EACZ,oBAAIF,OAAO,MAAKwF,YAAL,CAAkB;EACzBvF,4BAAO,KADkB,EACXC,KAAIA,GADO,EACFG,QAAOqH,SAAO,EADZ,EACgBhI,SAAQA;EADxB,iBAAlB,CAAX;EAGA,uBAAO,MAAK+F,OAAL,CAAazF,IAAb,CAAP;EACH,aANM,EAONmC,KAPM,CAOA,aAAK;EACR,oBAAIkC,MAAM,IAAIvD,KAAJ,gEAAuEwC,EAAE/B,OAAzE,CAAV;EACA,uBAAOP,EAAEQ,MAAF,CAAS6C,GAAT,CAAP;EACH,aAVM,CAAP;EAWH;;EAED;;;;;;;;;oCAMW/B,MAAMwD,QAAQpG,SAAS;EAAA;;EAE9B,gBAAIQ,MAAM,KAAKmF,OAAL,GAAe,kBAAzB;;EAEA,mBAAOrE,EAAEG,OAAF,CAAWjB,GAAX,EACN+B,IADM,CACA,eAAO;;EAEV,oBAAIjC,OAAO,OAAKwF,YAAL,CAAkB;EACzBvF,4BAAO,MADkB,EACTC,KAAIA,GADK;EAEzBI,0BAAM,EAAEwF,QAAQA,MAAV,EAFmB;EAGzBxD,0BAAMA,IAHmB;EAIzBG,8BAAU,IAJe;EAKzB/C,6BAASA;EALgB,iBAAlB,CAAX;EAOA,uBAAO,OAAK+F,OAAL,CAAazF,IAAb,CAAP;EACH,aAXM,EAYNiC,IAZM,CAYA;EAAA,uBAAYC,QAAZ;EAAA,aAZA,EAaNC,KAbM,CAaA,aAAK;EACR,oBAAIkC,MAAM,IAAIvD,KAAJ,qDAA4DwC,EAAE/B,OAA9D,CAAV;EACA,uBAAOP,EAAEQ,MAAF,CAAS6C,GAAT,CAAP;EACH,aAhBM,CAAP;EAiBH;;EAWD;;EAEA;;;;;;;;;;;uCAQc3E,SAAS;;EAEnB,gBAAG,KAAK0F,WAAL,CAAiBvB,OAAjB,CAAyBnE,QAAQO,MAAjC,IAAyC,CAA5C,EACI,MAAM,IAAIa,KAAJ,8BAAqCpB,QAAQO,MAA7C,CAAN;;EAEJ,gBAAG,CAACP,QAAQQ,GAAZ,EACI,MAAM,IAAIY,KAAJ,wCAAN;;EAEJpB,oBAAQE,OAAR,GAAkB,KAAKA,OAAvB;;EAEA,mBAAO,KAAKyG,iBAAL,CAAuB3G,OAAvB,CAAP;EACH;;;4CAEiBA,SAAS;EACvB,mBAAO,KAAKyF,MAAL,CAAYkB,iBAAZ,CAA8B3G,OAA9B,CAAP;EACH;;;kCAEOM,MAAM;EACV,mBAAO,KAAKmF,MAAL,CAAYM,OAAZ,CAAoBzF,IAApB,CAAP;EACH;;;;;MCxGCsI;EAEF,yBAAc;EAAA;;EACV,aAAKC,MAAL,GAAc;EACVC,kBAAM,CADI;EAEVC,kBAAM;EAFI,SAAd;EAIH;;;;qCAEU;EACP,gBAAIC,SAAS,EAAb;EACA,iBAAI,IAAIC,IAAR,IAAgB,KAAKJ,MAArB,EAA6B;EACzB,oBAAI7F,QAAQ,KAAK6F,MAAL,CAAYI,IAAZ,CAAZ;EACA,oBAAGjG,UAAU,IAAV,IAAkB,OAAOA,MAAMkG,IAAb,KAAuB,WAA5C,EAAyD;EACrDlG,4BAAQA,MAAMmG,IAAN,CAAW,GAAX,CAAR;EACH;EACDH,uBAAOC,IAAP,IAAejG,KAAf;EACH;EACD,mBAAOgG,MAAP;EACH;;EAED;;;;4BAEEhG,OAAO;EAAE,iBAAKoG,IAAL,CAAUpG,KAAV,EAAkB,OAAO,IAAP;EAAc;;;+BACtCA,OAAO;EAAE,iBAAK6F,MAAL,CAAYQ,CAAZ,GAAgBrG,KAAhB;EAAwB;;;iCAC/B;EAAE,mBAAO,KAAK6F,MAAL,CAAYQ,CAAnB;EAAuB;;EAEhC;;;;gCAEMrG,OAAO;EAAE,iBAAKsG,QAAL,CAActG,KAAd,EAAsB,OAAO,IAAP;EAAc;;;mCAC1CA,OAAO;EACZ,gBAAGA,SAAS,OAAOA,MAAMkG,IAAb,KAAuB,WAAnC,EACIlG,QAAQA,MAAMmG,IAAN,CAAW,GAAX,CAAR;EACJ,iBAAKN,MAAL,CAAYX,KAAZ,GAAoBlF,KAApB;EACH;;;qCACU;EAAE,mBAAO,KAAK6F,MAAL,CAAYX,KAAnB;EAA2B;;EAExC;;;;iCAEOlF,OAAO;EAAE,iBAAKuG,SAAL,CAAevG,KAAf,EAAuB,OAAO,IAAP;EAAc;;;oCAC3CA,OAAO;EACb,gBAAGA,SAAS,OAAOA,MAAMkG,IAAb,KAAuB,WAAnC,EACIlG,QAAQA,MAAMmG,IAAN,CAAW,GAAX,CAAR;EACJ,iBAAKN,MAAL,CAAYW,MAAZ,GAAqBxG,KAArB;EACH;;;sCACW;EAAE,mBAAO,KAAK6F,MAAL,CAAYW,MAAnB;EAA4B;;EAE1C;;;;+BAEKxG,OAAO;EAAE,iBAAKyG,OAAL,CAAazG,KAAb,EAAqB,OAAO,IAAP;EAAc;;;kCACzCA,OAAO;EACX,gBAAGA,SAAS,OAAOA,MAAMkG,IAAb,KAAuB,WAAnC,EACIlG,QAAQA,MAAMmG,IAAN,CAAW,GAAX,CAAR;EACJ,iBAAKN,MAAL,CAAYa,IAAZ,GAAmB1G,KAAnB;EACH;;;oCACS;EAAE,mBAAO,KAAK6F,MAAL,CAAYa,IAAnB;EAA0B;;EAEtC;;;;iCAEO1G,OAAO;EAAE,iBAAK2G,SAAL,CAAe3G,KAAf,EAAuB,OAAO,IAAP;EAAc;;;oCAC3CA,OAAO;EAAE,iBAAK6F,MAAL,CAAYxB,IAAZ,GAAmBrE,KAAnB;EAA2B;;;sCAClC;EAAE,mBAAO,KAAK6F,MAAL,CAAYxB,IAAnB;EAA0B;;EAExC;;EAEA;;;;;;;+BAIMuC,OAAMC,OAAO;EAAE,iBAAKC,OAAL,CAAaF,KAAb,EAAmBC,KAAnB,EAA2B,OAAO,IAAP;EAAc;EAC9D;;;;;;;kCAISD,MAAMC,OAAO;EACjBA,oBAASA,UAAUA,UAAU,KAAV,IAAmBA,UAAU,MAAvC,CAAD,GAAmD,MAAnD,GAA4DA,KAApE;EACA,gBAAGD,QAAQA,KAAKzF,OAAL,CAAa,GAAb,IAAkB,CAA7B,EACGyF,OAAOA,OAAO,GAAP,GAAaC,KAApB;EACH,iBAAKhB,MAAL,CAAYe,IAAZ,GAAmBA,IAAnB;EACJ;;;oCACS;EAAE,mBAAO,KAAKf,MAAL,CAAYe,IAAnB;EAA0B;;;yCACvB;EAAE,mBAAO,KAAKf,MAAL,CAAYe,IAAZ,CAAiBG,KAAjB,CAAuB,GAAvB,EAA4B,CAA5B,CAAP;EAAwC;;;yCAC1C;EAAE,mBAAO,KAAKlB,MAAL,CAAYe,IAAZ,CAAiBG,KAAjB,CAAuB,GAAvB,EAA4B,CAA5B,MAAmC,KAA1C;EAAkD;;EAGnE;;;EAGA;;;;;;+BAGMjB,OAAM;EACR,iBAAKkB,OAAL,CAAalB,KAAb;EACA,mBAAO,IAAP;EACH;;;kCAEOA,MAAM;EACV,gBAAGmB,MAAMnB,IAAN,KAAeA,OAAK,CAAL,GAAO,CAAzB,EAA4B;EAC5B,iBAAKD,MAAL,CAAYC,IAAZ,GAAmBA,OAAK,CAAxB;EACH;;;oCAES;EACN,mBAAO,KAAKD,MAAL,CAAYC,IAAnB;EACH;;;qCAEU;EACP,iBAAKkB,OAAL,CAAa,KAAKnB,MAAL,CAAYC,IAAZ,GAAiB,CAA9B;EACH;;;yCAEc;EACX,iBAAKkB,OAAL,CAAa,KAAKnB,MAAL,CAAYC,IAAZ,GAAiB,CAA9B;EACH;;EAGD;;;EAGA;;;;;;mCAGUC,MAAM;EACZ,iBAAKmB,WAAL,CAAiBnB,IAAjB;EACA,mBAAO,IAAP;EACH;;;sCAEYA,MAAM;EACf,gBAAGkB,MAAMlB,IAAN,KAAeA,OAAK,CAAL,GAAO,CAAzB,EAA4B;EAC5B,iBAAKF,MAAL,CAAYE,IAAZ,GAAmBA,OAAK,CAAxB;EACH;;;wCAEa;EACV,mBAAO,KAAKF,MAAL,CAAYE,IAAnB;EACH;;;;;MAOCoB;EAIF,yBAAY3J,GAAZ,EAAiB+E,UAAjB,EAA6B;EAAA;;EACzB,aAAKC,MAAL,CAAYhF,GAAZ;EACA,aAAKiF,MAAL,GAAcF,UAAd;EACA,aAAKrF,OAAL,GAAe,KAAf;EACA,aAAKwF,WAAL,GAAmB,CAAC,KAAD,EAAQ,MAAR,EAAgB,KAAhB,EAAuB,QAAvB,EAAiC,OAAjC,CAAnB;EACH;;;;iCAEMC,SAAS;EACZ,iBAAKA,OAAL,GAAeA,UAAU,YAAzB;EACH;;EAKD;EACA;;;EAGA;;;;;;;;iCAKQE,IAAI7F,SAAS;EAAA;;EAEjB,mBAAOsB,EAAEG,OAAF,CAAWoE,EAAX,EACNtD,IADM,CACA,cAAM;EACT,oBAAIjC,OAAO,MAAKwF,YAAL,CAAkB;EACzBvF,4BAAO,KADkB,EACXC,KAAI,MAAKmF,OAAL,GAAe,QAAf,GAA0BE,EADnB,EACuB7F,SAAQA;EAD/B,iBAAlB,CAAX;EAGA,uBAAO,MAAK+F,OAAL,CAAazF,IAAb,CAAP;EACH,aANM,EAONmC,KAPM,CAOA,aAAK;EACR,oBAAIkC,MAAM,IAAIvD,KAAJ,gDAAuDyE,EAAvD,UAA8DjC,EAAE/B,OAAhE,CAAV;EACA,uBAAOP,EAAEQ,MAAF,CAAS6C,GAAT,CAAP;EACH,aAVM,CAAP;EAWH;;EAED;;;;;;;;qCAKYtE,KAAKL,SAAS;EAAA;;EAEtB,mBAAOsB,EAAEG,OAAF,CAAWpB,GAAX,EACNkC,IADM,CACA,kBAAU;;EAEb,oBAAG5B,UAAU,OAAOA,OAAOwF,QAAd,KAA4B,WAAzC,EAAsD;EAClD;EACA;EACAxF,6BAASA,OAAOwF,QAAP,EAAT;EACH;EACD,oBAAI7F,OAAO,OAAKwF,YAAL,CAAkB;EACzBvF,4BAAO,KADkB,EACXC,KAAK,OAAKmF,OAAL,GAAe,OADT,EACkBhF,QAAQA,MAD1B,EACkCX,SAASA;EAD3C,iBAAlB,CAAX;EAGA,uBAAO,OAAK+F,OAAL,CAAazF,IAAb,CAAP;EACH,aAZM,EAaNmC,KAbM,CAaA,aAAK;EACR,oBAAIkC,MAAM,IAAIvD,KAAJ,uDAA8DwC,EAAE/B,OAAhE,CAAV;EACA,uBAAOP,EAAEQ,MAAF,CAAS6C,GAAT,CAAP;EACH,aAhBM,CAAP;EAiBH;;EAKD;EACA;;;EAGA;;;;;;;;mCAKUkB,IAAI7F,SAAS;EAAA;;EAEnB,mBAAOsB,EAAEG,OAAF,CAAWoE,EAAX,EACNtD,IADM,CACA,cAAM;EACT,oBAAIjC,OAAO,OAAKwF,YAAL,CAAkB;EACzBvF,4BAAO,KADkB,EACXC,KAAI,OAAKmF,OAAL,GAAe,UAAf,GAA4BE,EADrB,EACyB7F,SAAQA;EADjC,iBAAlB,CAAX;EAGA,uBAAO,OAAK+F,OAAL,CAAazF,IAAb,CAAP;EACH,aANM,EAONmC,KAPM,CAOA,aAAK;EACR,oBAAIkC,MAAM,IAAIvD,KAAJ,oDAA2DyE,EAA3D,UAAkEjC,EAAE/B,OAApE,CAAV;EACA,uBAAOP,EAAEQ,MAAF,CAAS6C,GAAT,CAAP;EACH,aAVM,CAAP;EAWH;;EAGD;;;;;;;;uCAKctE,KAAKL,SAAS;EAAA;;EAExB,mBAAOsB,EAAEG,OAAF,CAAWpB,GAAX,EACNkC,IADM,CACA,kBAAU;;EAEb,oBAAG5B,UAAU,OAAOA,OAAOwF,QAAd,KAA4B,WAAzC,EAAsD;EAClD;EACA;EACAxF,6BAASA,OAAOwF,QAAP,EAAT;EACH;EACD,oBAAI7F,OAAO,OAAKwF,YAAL,CAAkB;EACzBvF,4BAAO,KADkB,EACXC,KAAK,OAAKmF,OAAL,GAAe,SADT,EACoBhF,QAAQA,MAD5B,EACoCX,SAASA;EAD7C,iBAAlB,CAAX;EAGA,uBAAO,OAAK+F,OAAL,CAAazF,IAAb,CAAP;EACH,aAZM,EAaNmC,KAbM,CAaA,aAAK;EACR,oBAAIkC,MAAM,IAAIvD,KAAJ,2DAAkEwC,EAAE/B,OAApE,CAAV;EACA,uBAAOP,EAAEQ,MAAF,CAAS6C,GAAT,CAAP;EACH,aAhBM,CAAP;EAiBH;;EAKD;EACA;;EAEA;;;;;;;;kCAKSkB,IAAI7F,SAAS;EAAA;;EAElB,mBAAOsB,EAAEG,OAAF,CAAWoE,EAAX,EACNtD,IADM,CACA,cAAM;EACT,oBAAIjC,OAAO,OAAKwF,YAAL,CAAkB;EACzBvF,4BAAO,KADkB,EACXC,KAAI,OAAKmF,OAAL,GAAe,SAAf,GAA2BE,EADpB,EACwB7F,SAAQA;EADhC,iBAAlB,CAAX;EAGA,uBAAO,OAAK+F,OAAL,CAAazF,IAAb,CAAP;EACH,aANM,EAONmC,KAPM,CAOA,aAAK;EACR,oBAAIkC,MAAM,IAAIvD,KAAJ,kDAAyDyE,EAAzD,UAAgEjC,EAAE/B,OAAlE,CAAV;EACA,uBAAOP,EAAEQ,MAAF,CAAS6C,GAAT,CAAP;EACH,aAVM,CAAP;EAWH;;EAGD;;;;;;;;sCAKatE,KAAKL,SAAS;EAAA;;EAEvB,mBAAOsB,EAAEG,OAAF,CAAWpB,GAAX,EACNkC,IADM,CACA,kBAAU;;EAEb,oBAAG5B,UAAU,OAAOA,OAAOwF,QAAd,KAA4B,WAAzC,EAAsD;EAClD;EACA;EACAxF,6BAASA,OAAOwF,QAAP,EAAT;EACH;EACD,oBAAI7F,OAAO,OAAKwF,YAAL,CAAkB;EACzBvF,4BAAO,KADkB,EACXC,KAAK,OAAKmF,OAAL,GAAe,QADT,EACmBhF,QAAQA,MAD3B,EACmCX,SAASA;EAD5C,iBAAlB,CAAX;EAGA,uBAAO,OAAK+F,OAAL,CAAazF,IAAb,CAAP;EACH,aAZM,EAaNmC,KAbM,CAaA,aAAK;EACR,oBAAIkC,MAAM,IAAIvD,KAAJ,yDAAgEwC,EAAE/B,OAAlE,CAAV;EACA,uBAAOP,EAAEQ,MAAF,CAAS6C,GAAT,CAAP;EACH,aAhBM,CAAP;EAiBH;;EAID;;;;oCAEW8B,KAAK;EACZ,gBAAG,CAACA,GAAJ,EAAS,OAAO,IAAP;;EAET,gBAAG,CAACA,IAAIC,IAAR,EAAc,OAAO,IAAP;;EAEd,gBAAGyB,UAAUlD,YAAV,KAA2BwB,IAAIC,IAA/B,IAAuC,YAAYD,IAAIC,IAA1D,EAAgE;EAC5D,uBAAOD,IAAIZ,EAAX;EACH;;EAED,gBAAG,CAACY,IAAI2D,WAAL,IAAoB,CAAC3D,IAAI2D,WAAJ,CAAgBC,MAAxC,EAAgD,OAAO,IAAP;EAChD,gBAAIC,MAAM7D,IAAI2D,WAAJ,CAAgBG,MAAhB,CAAuB;EAAA,uBAAM,CAAC1E,GAAG1B,OAAH,CAAW,OAAX,CAAP;EAAA,aAAvB,CAAV;EACA,gBAAG,CAACmG,IAAID,MAAR,EAAgB,OAAO,IAAP;EAChB,mBAAOC,IAAI,CAAJ,EAAOE,OAAP,CAAe,OAAf,EAAuB,EAAvB,CAAP;EACH;;EAMD;;EAEA;;;;;;;;;;;uCAQcxK,SAAS;;EAEnB,gBAAG,KAAK0F,WAAL,CAAiBvB,OAAjB,CAAyBnE,QAAQO,MAAjC,IAAyC,CAA5C,EACI,MAAM,IAAIa,KAAJ,8BAAqCpB,QAAQO,MAA7C,CAAN;;EAEJ,gBAAG,CAACP,QAAQQ,GAAZ,EACI,MAAM,IAAIY,KAAJ,wCAAN;;EAEJpB,oBAAQE,OAAR,GAAkB,KAAKA,OAAvB;;EAEA,mBAAO,KAAKyG,iBAAL,CAAuB3G,OAAvB,CAAP;EACH;;;4CAEiBA,SAAS;EACvB,mBAAO,KAAKyF,MAAL,CAAYkB,iBAAZ,CAA8B3G,OAA9B,CAAP;EACH;;;kCAEOM,MAAM;EACV,mBAAO,KAAKmF,MAAL,CAAYM,OAAZ,CAAoBzF,IAApB,CAAP;EACH;;;;;AClXL,mBAAe;EACXmK,WAAmB,MADR;EAEXC,WAAmB,GAFR;EAGXC,cAAmB,SAHR;EAIXC,SAAmB,KAJR;EAKXC,gBAAmB,WALR;EAMXC,sBAAmB,gBANR;EAOXC,oBAAmB,eAPR;EAQXC,aAAmB,YARR;EASXC,mBAAmB,gBATR;EAUXC,eAAmB,UAVR;EAWXC,kBAAmB,aAXR;EAYXC,gBAAmB,WAZR;EAaXC,mBAAmB,cAbR;EAcXC,sBAAmB,iBAdR;EAeXC,oBAAmB,eAfR;EAgBXC,gBAAmB,WAhBR;EAiBXC,mBAAmB,cAjBR;EAkBXC,iBAAmB,YAlBR;EAmBXC,gBAAmB,WAnBR;EAoBXC,mBAAmB,cApBR;EAqBXC,iBAAmB,YArBR;EAsBXC,gBAAmB,YAtBR;EAuBXC,YAAmB,QAvBR;EAwBXC,aAAmB,SAxBR;EAyBXC,oBAAmB,aAzBR;EA0BXC,mBAAmB,aA1BR;EA2BXC,cAAmB,UA3BR;EA4BXC,qBAAmB,cA5BR;EA6BXC,oBAAmB,cA7BR;EA8BXC,YAAmB,eA9BR;EA+BXC,UAAmB,aA/BR;EAgCXC,mBAAmB,cAhCR;;EAkCXC,YAAmB,eAlCR;EAmCXC,YAAmB,QAnCR;;EAqCX;EACAC,eAAmB;EAtCR,CAAf;;ECCA,IAAMC,uBAAuB,CACzB,EAAE5J,OAAM,WAAR,EAA2B6J,OAAO,YAAlC,EADyB,EAEzB,EAAE7J,OAAM,YAAR,EAA2B6J,OAAO,YAAlC,EAFyB,EAGzB,EAAE7J,OAAM,UAAR,EAA2B6J,OAAO,YAAlC,EAHyB,EAIzB,EAAE7J,OAAM,WAAR,EAA2B6J,OAAO,YAAlC,EAJyB,EAKzB,EAAE7J,OAAM,eAAR,EAA2B6J,OAAO,wBAAlC,EALyB,EAMzB,EAAE7J,OAAM,cAAR,EAA2B6J,OAAO,yBAAlC,EANyB,EAOzB,EAAE7J,OAAM,aAAR,EAA2B6J,OAAO,WAAlC,EAPyB,CAA7B;;MAWMC;EAEF,uBAAc;EAAA;;;EAEV,aAAKC,YAAL,GAAoB;EAChBjE,kBAAM,CADU;EAEhBC,kBAAM,EAFU;EAGhBa,kBAAM;EAHU,SAApB;;EAMA,aAAK5B,KAAL,GAAa;EACTc,kBAAM,CADG;EAETC,kBAAM,EAFG;EAGTa,kBAAM;EAHG,SAAb;EAMH;;;;qCAIU;EACP,gBAAIZ,SAAS,EAAb;EACA,iBAAI,IAAIC,IAAR,IAAgB,KAAKjB,KAArB,EAA4B;EACxB,oBAAIhF,QAAQ,KAAKgF,KAAL,CAAWiB,IAAX,CAAZ;EACA,oBAAGjG,UAAU,IAAV,IAAkB,OAAOA,MAAMkG,IAAb,KAAuB,WAA5C,EAAyD;EACrDlG,4BAAQA,MAAMmG,IAAN,CAAW,GAAX,CAAR;EACH;EACDH,uBAAOC,IAAP,IAAejG,KAAf;EACH;EACD,mBAAOgG,MAAP;EACH;;EAGD;;;;;oCAGUgE,MAAMhK,OAAO;EACnB,iBAAKiK,YAAL,CAAkBD,IAAlB,EAAwBhK,KAAxB;EACA,mBAAO,IAAP;EACH;;;uCAEagK,MAAMhK,OAAO;EACvB,gBAAGA,UAAU,IAAV,IAAkBA,UAAUqD,SAA/B,EACI,OAAO,KAAK2B,KAAL,CAAWgF,IAAX,CAAP,CADJ,KAGI,KAAKhF,KAAL,CAAWgF,IAAX,IAAmBhK,KAAnB;EACP;;;uCAEamE,KAAK;EACf,mBAAO,KAAKa,KAAL,CAAWb,GAAX,CAAP;EACH;;;0CAEgBV,KAAK;EAClB,iBAAI,IAAIyG,CAAR,IAAazG,GAAb,EAAkB;EACd,oBAAGA,IAAIvF,cAAJ,CAAmBgM,CAAnB,CAAH,EAA0B;EACtB,yBAAKD,YAAL,CAAkBC,CAAlB,EAAqBzG,IAAIyG,CAAJ,CAArB;EACH;EACJ;EACJ;;EAGD;;;;;4BAGEC,MAAM;EACJ,iBAAK/D,IAAL,CAAU+D,IAAV;EACA,mBAAO,IAAP;EACH;;EAED;;;;;;+BAGMA,MAAM;EACR,iBAAKF,YAAL,CAAkBG,WAAgB1C,KAAlC,EAAyCyC,IAAzC;EACH;;;iCAEM;EACH,mBAAO,KAAKE,YAAL,CAAkBD,WAAgB1C,KAAlC,CAAP;EACH;;EAGD;;;EAGA;;;;;;sCAGYxC,OAAO;EACf,iBAAKoF,cAAL,CAAoBpF,KAApB;EACA,mBAAO,IAAP;EACH;;EAED;;;;;;yCAGgBA,OAAO;EACnB,gBAAGA,SAAS,OAAOA,MAAMgB,IAAb,KAAuB,WAAnC,EACIhB,QAAQ,CAACA,KAAD,CAAR;EACJ,iBAAK+E,YAAL,CAAkBG,WAAgB3C,KAAlC,EAAyCvC,KAAzC;EACH;;EAED;;;;;;2CAGkB;EACd,mBAAO,KAAKmF,YAAL,CAAkBD,WAAgB3C,KAAlC,CAAP;EACH;;EAGD;;;EAGA;;;;;;;;;;gCAOM8C,UAAU;EACZ,iBAAKjE,QAAL,CAAciE,QAAd;EACA,mBAAO,IAAP;EACH;;EAED;;;;;;;;;;mCAOUA,UAAU;EAChB,gBAAGA,YAAY,OAAOA,SAASrE,IAAhB,KAA0B,WAAzC,EACIqE,WAAW,CAACA,QAAD,CAAX;EACJ,iBAAKN,YAAL,CAAkBG,WAAgBT,SAAlC,EAA6CY,QAA7C;EACH;;EAED;;;;;;;;;;qCAOY;EACR,mBAAO,KAAKF,YAAL,CAAkBD,WAAgBT,SAAlC,CAAP;EACH;;EAGD;;;EAGA;;;;;;+BAGM7D,OAAM;EACR,iBAAKkB,OAAL,CAAalB,KAAb;EACA,mBAAO,IAAP;EACH;;;kCAEOA,MAAM;EACV,gBAAGmB,MAAMnB,IAAN,KAAeA,OAAK,CAAL,GAAO,CAAzB,EAA4B;EAC5B,iBAAKd,KAAL,CAAWc,IAAX,GAAkBA,OAAK,CAAvB;EACH;;;oCAES;EACN,mBAAO,KAAKd,KAAL,CAAWc,IAAlB;EACH;;;qCAEU;EACP,iBAAKkB,OAAL,CAAa,KAAKhC,KAAL,CAAWc,IAAX,GAAgB,CAA7B;EACH;;;yCAEc;EACX,iBAAKkB,OAAL,CAAa,KAAKhC,KAAL,CAAWc,IAAX,GAAgB,CAA7B;EACH;;EAGD;;;EAGA;;;;;;mCAGUC,MAAM;EACZ,iBAAKmB,WAAL,CAAiBnB,IAAjB;EACA,mBAAO,IAAP;EACH;;;sCAEYA,MAAM;EACf,gBAAGkB,MAAMlB,IAAN,KAAeA,OAAK,CAAL,GAAO,CAAzB,EAA4B;EAC5B,iBAAKf,KAAL,CAAWe,IAAX,GAAkBA,OAAK,CAAvB;EACH;;;wCAEa;EACV,mBAAO,KAAKf,KAAL,CAAWe,IAAlB;EACH;;EAGD;;;EAGA;;;;;;;+BAIMa,OAAMC,OAAO;EACf,iBAAKC,OAAL,CAAaF,KAAb,EAAmBC,KAAnB;EACA,mBAAO,IAAP;EACH;;EAED;;;;;;;kCAISD,MAAMC,OAAO;EACjBA,oBAASA,UAAUA,UAAU,KAAV,IAAmBA,UAAU,MAAvC,CAAD,GAAmD,MAAnD,GAA4DA,KAApE;EACA,gBAAGD,QAAQA,KAAKzF,OAAL,CAAa,GAAb,IAAkB,CAA7B,EACGyF,OAAOA,OAAO,GAAP,GAAaC,KAApB;EACH,iBAAK7B,KAAL,CAAW4B,IAAX,GAAkBA,IAAlB;EACJ;;;oCAES;EACN,mBAAO,KAAK5B,KAAL,CAAW4B,IAAlB;EACH;;;yCAEc;EACX,mBAAO,KAAK5B,KAAL,CAAW4B,IAAX,CAAgBG,KAAhB,CAAsB,GAAtB,EAA2B,CAA3B,CAAP;EACH;;;yCAEc;EACX,mBAAO,KAAK/B,KAAL,CAAW4B,IAAX,CAAgBG,KAAhB,CAAsB,GAAtB,EAA2B,CAA3B,MAAkC,KAAzC;EACH;;EAED;;;;;;2CAGiB;EACb,mBAAO6C,qBAAqBY,KAArB,CAA2B,CAA3B,CAAP;EACH;;EAGD;;;EAGA;;;;;;kCAGS;EACL,iBAAKxF,KAAL,GAAa,KAAK+E,YAAlB;EACH;;;;;MCnQCU;EAEF,uBAAYjN,GAAZ,EAAiB+E,UAAjB,EAA6B;EAAA;;EACzB,aAAKC,MAAL,CAAYhF,GAAZ;EACA,aAAKiF,MAAL,GAAcF,UAAd;EACA,aAAKrF,OAAL,GAAe,KAAf;EACA,aAAKwF,WAAL,GAAmB,CAAC,KAAD,EAAQ,MAAR,EAAgB,KAAhB,EAAuB,QAAvB,EAAiC,OAAjC,CAAnB;EACH;;;;iCAEMC,SAAS;EACZ,iBAAKC,OAAL,GAAeD,OAAf;EACA,iBAAKA,OAAL,GAAeA,UAAU,kBAAzB;EACH;;EAED;;;;;;;;kCAKSqC,OAAOhI,SAAS;EACrB,gBAAIQ,MAAM,KAAKmF,OAAL,GAAe,UAAzB;EACA,mBAAO,KAAK+H,OAAL,CAAalN,GAAb,EAAkBwH,KAAlB,EAAyBhI,OAAzB,EACNyC,KADM,CACA,aAAK;EACR,oBAAIkC,MAAM,IAAIvD,KAAJ,uDAA8DwC,EAAE/B,OAAhE,CAAV;EACA,uBAAOP,EAAEQ,MAAF,CAAS6C,GAAT,CAAP;EACH,aAJM,CAAP;EAKH;;EAGD;;;;;;;;gCAKOqD,OAAOhI,SAAS;EACnB,gBAAIQ,MAAM,KAAKmF,OAAL,GAAe,QAAzB;EACA,mBAAO,KAAK+H,OAAL,CAAalN,GAAb,EAAkBwH,KAAlB,EAAyBhI,OAAzB,EACNyC,KADM,CACA,aAAK;EACR,oBAAIkC,MAAM,IAAIvD,KAAJ,iDAAwDwC,EAAE/B,OAA1D,CAAV;EACA,uBAAOP,EAAEQ,MAAF,CAAS6C,GAAT,CAAP;EACH,aAJM,CAAP;EAKH;;EAID;;;;;;;;kCAKSqD,OAAOhI,SAAS;EACrB,gBAAIQ,MAAM,KAAKmF,OAAL,GAAe,UAAzB;EACA,mBAAO,KAAK+H,OAAL,CAAalN,GAAb,EAAkBwH,KAAlB,EAAyBhI,OAAzB,EACNyC,KADM,CACA,aAAK;EACR,oBAAIkC,MAAM,IAAIvD,KAAJ,qDAA4DwC,EAAE/B,OAA9D,CAAV;EACA,uBAAOP,EAAEQ,MAAF,CAAS6C,GAAT,CAAP;EACH,aAJM,CAAP;EAKH;;EAMD;;EAGA;;;;;;kCAGSnE,KAAKwH,OAAOhI,SAAS;EAAA;;EAC1B,mBAAOsB,EAAEG,OAAF,CAAW,IAAX,EACNc,IADM,CACA,YAAM;;EAET,oBAAGyF,SAAS,OAAOA,MAAM7B,QAAb,KAA2B,WAAvC,EAAoD;EAChD;EACA;EACA6B,4BAAQA,MAAM7B,QAAN,EAAR;EACH;;EAED,oBAAI7F,OAAO,MAAKwF,YAAL,CAAkB;EACzBvF,4BAAO,KADkB,EACXC,KAAIA,GADO,EACFG,QAAOqH,KADL,EACYhI,SAAQA;EADpB,iBAAlB,CAAX;EAGA,uBAAO,MAAK+F,OAAL,CAAazF,IAAb,CAAP;EACH,aAbM,CAAP;EAcH;;EAID;;;;;;;;;;;uCAQcN,SAAS;;EAEnB,gBAAG,KAAK0F,WAAL,CAAiBvB,OAAjB,CAAyBnE,QAAQO,MAAjC,IAAyC,CAA5C,EACI,MAAM,IAAIa,KAAJ,8BAAqCpB,QAAQO,MAA7C,CAAN;;EAEJ,gBAAG,CAACP,QAAQQ,GAAZ,EACI,MAAM,IAAIY,KAAJ,wCAAN;;EAEJpB,oBAAQE,OAAR,GAAkB,KAAKA,OAAvB;;EAEA,mBAAO,KAAKyG,iBAAL,CAAuB3G,OAAvB,CAAP;EACH;;;4CAEiBA,SAAS;EACvB,mBAAO,KAAKyF,MAAL,CAAYkB,iBAAZ,CAA8B3G,OAA9B,CAAP;EACH;;;kCAEOM,MAAM;EACV,mBAAO,KAAKmF,MAAL,CAAYM,OAAZ,CAAoBzF,IAApB,CAAP;EACH;;;;;ACrHL,oBAAgB;EACZqN,aAAsB,UADV;EAEZC,cAAsB,WAFV;EAGZC,mBAAsB,eAHV;EAIZC,qBAAsB,iBAJV;EAKZC,qBAAsB,iBALV;EAMZC,uBAAsB,mBANV;EAOZ9I,eAAsB,aAPV;EAQZ+I,cAAsB,WARV;EASZC,WAAsB,QATV;EAUZC,cAAsB;EAVV,CAAhB;;MCAMC,SAAS;EACXC,WAAkB,OADP;EAEXC,iBAAkB,aAFP;EAGXtC,aAAkB,SAHP;EAIXG,cAAkB,UAJP;EAKXtB,gBAAkB,WALP;EAMXC,sBAAkB,gBANP;EAOXH,cAAkB,UAPP;EAQX4D,YAAkB,QARP;EASXC,gBAAkB,YATP;EAUXC,YAAkB,QAVP;EAWX3C,gBAAkB,YAXP;EAYXC,YAAkB,QAZP;EAaX2C,cAAkB,UAbP;EAcXC,iBAAkB,aAdP;EAeXC,oBAAkB,eAfP;EAgBXC,cAAkB,UAhBP;EAiBXC,cAAkB,UAjBP;EAkBXC,mBAAkB,eAlBP;EAmBXC,mBAAkB,QAnBP;EAoBXC,aAAkB,QApBP;EAqBXC,gBAAkB,YArBP;;EAuBXC,kBAAkB,aAvBP;EAwBXC,UAAkB,MAxBP;EAyBXC,cAAkB,UAzBP;;EA2BXC,gBAAkB,WA3BP;EA4BXC,gBAAkB,WA5BP;EA6BXC,YAAkB,QA7BP;EA8BXC,gBAAkB,WA9BP;EA+BXC,kBAAkB,aA/BP;;EAiCXC,YAAkB,QAjCP;EAkCXC,iBAAkB,aAlCP;EAmCXC,eAAkB,WAnCP;;EAqCXC,mBAAkB,OArCP;;EAuCX1K,oBAAkB;;EAvCP,CAAf;;AA2CA,MAAM2K,SAAS;EACXtF,WAAkB,OADP;EAEX8D,YAAkB,QAFP;EAGXC,gBAAkB,YAHP;EAIXvD,mBAAkB,cAJP;EAKX+E,qBAAkB,SALP;EAMXlE,gBAAkB,YANP;EAOXjB,gBAAkB,WAPP;EAQXoE,aAAkB;EARP,CAAf;;EAYA,IAAMgB,iBAAiB,CACnB7B,OAAOpC,OADY,EACHoC,OAAOjC,QADJ,EACciC,OAAOvD,UADrB,EAEnBuD,OAAOI,UAFY,EAEAJ,OAAOG,MAFP,EAEeH,OAAOE,WAFtB,CAAvB;;EAKA,IAAM4B,iBAAiB,CACnBH,OAAOtF,KADY,EAEnBsF,OAAOvB,UAFY,EAGnBuB,OAAO9E,aAHY,EAInB8E,OAAOC,eAJY,EAKnBD,OAAOjE,UALY,EAMnBiE,OAAOlF,UANY,CAAvB;;EASA,IAAM+B,yBAAuB,CACzB,EAAE5J,OAAM,WAAR,EAA2B6J,OAAO,YAAlC,EADyB,EAEzB,EAAE7J,OAAM,YAAR,EAA2B6J,OAAO,YAAlC,EAFyB,EAGzB,EAAE7J,OAAM,UAAR,EAA2B6J,OAAO,YAAlC,EAHyB,EAIzB,EAAE7J,OAAM,WAAR,EAA2B6J,OAAO,YAAlC,EAJyB,EAKzB,EAAE7J,OAAM,eAAR,EAA2B6J,OAAO,wBAAlC,EALyB,EAMzB,EAAE7J,OAAM,cAAR,EAA2B6J,OAAO,yBAAlC,EANyB,EAOzB,EAAE7J,OAAM,aAAR,EAA2B6J,OAAO,WAAlC,EAPyB,CAA7B;;MAWM5E;EAEF,qBAAc;EAAA;;;EAEV,aAAK8E,YAAL,GAAoB;EAChBjE,kBAAM,CADU;EAEhBC,kBAAM,EAFU;EAGhBoH,mBAAO,CAHS;EAIhBvG,kBAAM,eAJU;EAKhBwG,oBAAQH,eAAezC,KAAf,CAAqB,CAArB,CALQ;EAMhB6C,2BAAeH,eAAe1C,KAAf,CAAqB,CAArB;EANC,SAApB;;EASA,aAAKxF,KAAL,GAAa;EACTc,kBAAM,CADG;EAETC,kBAAM,EAFG;EAGToH,mBAAO,CAHE;EAITvG,kBAAM,eAJG;EAKTwG,oBAAQH,eAAezC,KAAf,CAAqB,CAArB,CALC;EAMT6C,2BAAeH,eAAe1C,KAAf,CAAqB,CAArB;EANN,SAAb;EASH;;;;qCAIU;EACP,gBAAIxE,SAAS,EAAb;EACA,iBAAI,IAAIC,IAAR,IAAgB,KAAKjB,KAArB,EAA4B;EACxB,oBAAIhF,QAAQ,KAAKgF,KAAL,CAAWiB,IAAX,CAAZ;EACA,oBAAGjG,UAAU,IAAV,IAAkB,OAAOA,MAAMkG,IAAb,KAAuB,WAA5C,EAAyD;EACrDlG,4BAAQA,MAAMmG,IAAN,CAAW,GAAX,CAAR;EACH;EACDH,uBAAOC,IAAP,IAAejG,KAAf;EACH;EACD,mBAAOgG,MAAP;EACH;;EAGD;;;;;oCAGUgE,MAAMhK,OAAO;EACnB,iBAAKiK,YAAL,CAAkBD,IAAlB,EAAwBhK,KAAxB;EACA,mBAAO,IAAP;EACH;;;uCAEagK,MAAMhK,OAAO;EACvB,gBAAGA,UAAU,IAAV,IAAkBA,UAAUqD,SAA5B;EACE,mBAAOrD,MAAMkG,IAAb,KAAuB,WAAvB,IAAsC,CAAClG,MAAMqH,MADlD;EAEI,uBAAO,KAAKrC,KAAL,CAAWgF,IAAX,CAAP,CAFJ,KAII,KAAKhF,KAAL,CAAWgF,IAAX,IAAmBhK,KAAnB;EACP;;;uCAEamE,KAAK;EACf,mBAAO,KAAKa,KAAL,CAAWb,GAAX,CAAP;EACH;;;0CAEgBV,KAAK;EAClB,iBAAI,IAAIyG,CAAR,IAAazG,GAAb,EAAkB;EACd,oBAAGA,IAAIvF,cAAJ,CAAmBgM,CAAnB,CAAH,EAA0B;EACtB,yBAAKD,YAAL,CAAkBC,CAAlB,EAAqBzG,IAAIyG,CAAJ,CAArB;EACH;EACJ;EACJ;;EAGD;;;;;4BAGEC,MAAM;EACJ,iBAAK/D,IAAL,CAAU+D,IAAV;EACA,mBAAO,IAAP;EACH;;EAED;;;;;;+BAGMA,MAAM;EACR,iBAAKF,YAAL,CAAkBqD,WAAW5F,KAA7B,EAAoCyC,IAApC;EACH;;;iCAEM;EACH,mBAAO,KAAKE,YAAL,CAAkBiD,WAAW5F,KAA7B,CAAP;EACH;;EAGD;;;;;mCAGSyC,MAAM;EACX,iBAAK/D,IAAL,CAAU+D,IAAV;EACA,mBAAO,IAAP;EACH;;EAED;;;;;;sCAGaA,MAAM;EACf,gBAAGA,QAAQ,OAAOA,KAAKjE,IAAZ,KAAsB,WAAjC,EACIiE,OAAO,CAACA,IAAD,CAAP;EACJ,iBAAKF,YAAL,CAAkBqD,WAAW3F,QAA7B,EAAuCwC,IAAvC;EACH;;;wCAEa;EACV,mBAAO,KAAKE,YAAL,CAAkBiD,WAAW3F,QAA7B,CAAP;EACH;;EAGD;;;;;8BAGKpG,MAAK;EACN,iBAAKgM,MAAL,CAAYhM,IAAZ;EACA,mBAAO,IAAP;EACH;;;iCAEMA,KAAK;EACR,iBAAK0I,YAAL,CAAkBqD,WAAW1F,GAA7B,EAAkCrG,GAAlC;EACH;;;mCAEQ;EACL,mBAAO,KAAK8I,YAAL,CAAkBiD,WAAW1F,GAA7B,CAAP;EACH;;EAGD;;;;;gCAGM1C,QAAO;EACT,iBAAKoB,QAAL,CAAcpB,MAAd;EACA,mBAAO,IAAP;EACH;;EAED;;;;;;mCAGUA,OAAO;EACb,gBAAGA,SAAS,OAAOA,MAAMgB,IAAb,KAAuB,WAAnC,EACIhB,QAAQ,CAACA,KAAD,CAAR;EACJ,iBAAK+E,YAAL,CAAkBqD,WAAW7F,KAA7B,EAAoCvC,KAApC;EACH;;;qCAEW;EACR,mBAAO,KAAKmF,YAAL,CAAkBiD,WAAW7F,KAA7B,CAAP;EACH;;EAGD;;;;;oCAGU+F,MAAM;EACZ,iBAAKC,YAAL,CAAkBD,IAAlB;EACA,mBAAO,IAAP;EACH;;EAED;;;;uCACcA,MAAM;EAChB,iBAAKvD,YAAL,CAAkBqD,WAAWzF,UAA7B,EAAyC2F,IAAzC;EACH;;EAED;;;;yCACgB;EACZ,mBAAO,KAAKnD,YAAL,CAAkBiD,WAAWzF,UAA7B,CAAP;EACH;;EAGD;;;;;yCAGe2F,MAAM;EACjB,iBAAKE,iBAAL,CAAuBF,IAAvB;EACA,mBAAO,IAAP;EACH;;EAED;;;;4CACmBA,MAAM;EACrB,iBAAKvD,YAAL,CAAkBqD,WAAWxF,gBAA7B,EAA+C0F,IAA/C;EACH;;EAED;;;;8CACqB;EACjB,mBAAO,KAAKnD,YAAL,CAAkBiD,WAAWxF,gBAA7B,CAAP;EACH;;EAGD;;;EAGA;;;;;;;;;;;;;iCAUO6F,SAAQC,WAAW;EACtB,iBAAKC,SAAL,CAAeF,OAAf,EAAuBC,SAAvB;EACA,mBAAO,IAAP;EACH;;EAGD;;;;;;;;;;;oCAQWD,QAAQC,WAAW;EAC1B,gBAAGD,UAAU,OAAOA,OAAOzH,IAAd,KAAwB,WAArC,EACIyH,SAAS,CAACA,MAAD,CAAT;;EAEJ;EACA,iBAAK1D,YAAL,CAAkBqD,WAAWpF,SAA7B,EAAwC,IAAxC;EACA,iBAAK+B,YAAL,CAAkBqD,WAAWnF,YAA7B,EAA2C,IAA3C;EACA,iBAAK8B,YAAL,CAAkBqD,WAAWlF,UAA7B,EAAyC,IAAzC;;EAEA,gBAAI0F,QAAQF,aAAaN,WAAWpF,SAApC;EACA,iBAAK+B,YAAL,CAAkB6D,KAAlB,EAAyBH,MAAzB;EACH;;;sCAEY;EACT,mBAAO,KAAKtD,YAAL,CAAkBiD,WAAWpF,SAA7B,KACH,KAAKmC,YAAL,CAAkBiD,WAAWnF,YAA7B,CADG,IAEH,KAAKkC,YAAL,CAAkBiD,WAAWlF,UAA7B,CAFJ;EAGH;;EAGD;;;EAGA;;;;;;;;;;;;qCASW2F,aAAYH,WAAW;EAC9B,iBAAKI,aAAL,CAAmBD,WAAnB,EAA+BH,SAA/B;EACA,mBAAO,IAAP;EACH;;EAED;;;;;;;;;;;wCAQeG,YAAYH,WAAW;EAClC,gBAAGG,cAAc,OAAOA,WAAW7H,IAAlB,KAA4B,WAA7C,EACI6H,aAAa,CAACA,UAAD,CAAb;;EAEJ;EACA,iBAAK9D,YAAL,CAAkBqD,WAAWjF,aAA7B,EAA4C,IAA5C;EACA,iBAAK4B,YAAL,CAAkBqD,WAAWhF,gBAA7B,EAA+C,IAA/C;EACA,iBAAK2B,YAAL,CAAkBqD,WAAW/E,cAA7B,EAA6C,IAA7C;;EAEA,gBAAIuF,QAAQF,aAAaN,WAAWjF,aAApC;EACA,iBAAK4B,YAAL,CAAkB6D,KAAlB,EAAyBC,UAAzB;EACH;;;0CAEgB;EACb,mBAAO,KAAK1D,YAAL,CAAkBiD,WAAWjF,aAA7B,KACH,KAAKgC,YAAL,CAAkBiD,WAAWhF,gBAA7B,CADG,IAEH,KAAK+B,YAAL,CAAkBiD,WAAW/E,cAA7B,CAFJ;EAGH;;EAGD;;;EAGA;;;;;;;;;;;;;iCAUOjB,KAAKsG,WAAW;EACnB,iBAAKK,SAAL,CAAe3G,GAAf,EAAoBsG,SAApB;EACA,mBAAO,IAAP;EACH;;EAED;;;;;;;;;;;;oCASWtG,KAAKsG,WAAW;EACvB,gBAAGtG,OAAO,OAAOA,IAAIpB,IAAX,KAAqB,WAA/B,EACIoB,MAAM,CAACA,GAAD,CAAN;;EAEJ;EACA,iBAAK2C,YAAL,CAAkBqD,WAAW9E,UAA7B,EAAyC,IAAzC;EACA,iBAAKyB,YAAL,CAAkBqD,WAAW7E,aAA7B,EAA4C,IAA5C;EACA,iBAAKwB,YAAL,CAAkBqD,WAAW5E,WAA7B,EAA0C,IAA1C;;EAEA,gBAAIoF,QAAQF,aAAaN,WAAW9E,UAApC;EACA,iBAAKyB,YAAL,CAAkB6D,KAAlB,EAAyBxG,GAAzB;EACH;;;sCAEY;EACT,mBAAO,KAAK+C,YAAL,CAAkBiD,WAAW9E,UAA7B,KACH,KAAK6B,YAAL,CAAkBiD,WAAW7E,aAA7B,CADG,IAEH,KAAK4B,YAAL,CAAkBiD,WAAW5E,WAA7B,CAFJ;EAGH;;EAGD;;;EAGA;;;;;;;;;;;;;kCAUQwF,UAASN,WAAW;EACxB,iBAAKO,UAAL,CAAgBD,QAAhB,EAAyBN,SAAzB;EACA,mBAAO,IAAP;EACH;;EAED;;;;;;;;;;;;qCASYM,SAASN,WAAW;EAC5B,gBAAGM,WAAW,OAAOA,QAAQhI,IAAf,KAAyB,WAAvC,EACIgI,UAAU,CAACA,OAAD,CAAV;;EAEJ;EACA,iBAAKjE,YAAL,CAAkBqD,WAAW3E,UAA7B,EAAyC,IAAzC;EACA,iBAAKsB,YAAL,CAAkBqD,WAAW1E,aAA7B,EAA4C,IAA5C;EACA,iBAAKqB,YAAL,CAAkBqD,WAAWzE,WAA7B,EAA0C,IAA1C;;EAEA,gBAAIiF,QAAQF,aAAaN,WAAW3E,UAApC;EACA,iBAAKsB,YAAL,CAAkB6D,KAAlB,EAAyBI,OAAzB;EACH;;;uCAEY;EACT,mBAAO,KAAK7D,YAAL,CAAkBiD,WAAW3E,UAA7B,KACH,KAAK0B,YAAL,CAAkBiD,WAAW1E,aAA7B,CADG,IAEH,KAAKyB,YAAL,CAAkBiD,WAAWzE,WAA7B,CAFJ;EAGH;;EAGD;;EAEA;;;;;;uCAGa3D,OAAO;EAChB,iBAAKkJ,eAAL,CAAqBlJ,KAArB;EACA,mBAAO,IAAP;EACH;;EAED;;;;;;0CAGiBA,OAAO;EACpB,gBAAGA,SAAS,OAAOA,MAAMgB,IAAb,KAAuB,WAAnC,EACIhB,QAAQ,CAACA,KAAD,CAAR;EACJ,iBAAK+E,YAAL,CAAkBqD,WAAWrF,aAA7B,EAA4C/C,KAA5C;EACH;;;4CAEkB;EACf,mBAAO,KAAKmF,YAAL,CAAkBiD,WAAWrF,aAA7B,CAAP;EACH;;EAGD;;;;;qCAGWoG,KAAK;EACZ,iBAAKC,aAAL,CAAmBD,GAAnB;EACA,mBAAO,IAAP;EACH;;EAED;;;;;;wCAGeE,YAAY;EACvB,iBAAKtE,YAAL,CAAkBqD,WAAWxE,UAA7B,EAAyCyF,UAAzC;EACH;;;0CAEgB;EACb,mBAAO,KAAKlE,YAAL,CAAkBiD,WAAWxE,UAA7B,CAAP;EACH;;EAGD;;;;;mCAGS0F,MAAMC,eAAe;EAC1B,iBAAKC,WAAL,CAAiBF,IAAjB,EAAuBC,aAAvB;EACA,mBAAO,IAAP;EACH;;EAED;;;;;;;sCAIaD,MAAMC,eAAe;;EAE9B;EACA,gBAAG,CAACD,IAAJ,EAAU;EACN,qBAAKvE,YAAL,CAAkBqD,WAAWlE,eAA7B,EAA8C,IAA9C;EACA,qBAAKa,YAAL,CAAkBqD,WAAWjE,cAA7B,EAA6C,IAA7C;EACA;EACH;;EAED,gBAAIsF,MAAMF,kBAAkBA,kBAAkB,IAAlB,IAA0BA,kBAAkB,MAA9D,CAAV;EACA,gBAAIxI,OAAO0I,MAAMrB,WAAWlE,eAAjB,GAAmCkE,WAAWjE,cAAzD,CAV8B;EAW9B,gBAAIuF,UAAUD,MAAMrB,WAAWjE,cAAjB,GAAkCiE,WAAWlE,eAA3D,CAX8B;EAY9B,gBAAI/L,MAAOmR,QAAQA,KAAKK,OAAd,GAAyBL,KAAKK,OAAL,EAAzB,GAA0CL,IAApD;;EAEA,iBAAKvE,YAAL,CAAkB2E,OAAlB,EAA2B,IAA3B;EACA,iBAAK3E,YAAL,CAAkBhE,IAAlB,EAAwB5I,GAAxB;EACH;;;wCAEc;EACX,mBAAQ,KAAKgN,YAAL,CAAkBiD,WAAWlE,eAA7B,KACA,KAAKiB,YAAL,CAAkBiD,WAAWjE,cAA7B,CADR;EAEH;;EAGD;;;;;kCAGQmF,MAAMC,eAAe;EACzB,iBAAKK,UAAL,CAAgBN,IAAhB,EAAsBC,aAAtB;EACA,mBAAO,IAAP;EACH;;EAED;;;;;;;qCAIYD,MAAMC,eAAe;;EAE7B;EACA,gBAAG,CAACD,IAAJ,EAAU;EACN,qBAAKvE,YAAL,CAAkBqD,WAAWrE,cAA7B,EAA6C,IAA7C;EACA,qBAAKgB,YAAL,CAAkBqD,WAAWpE,aAA7B,EAA4C,IAA5C;EACA;EACH;;EAED,gBAAIyF,MAAMF,kBAAkBA,kBAAkB,IAAlB,IAA0BA,kBAAkB,MAA9D,CAAV;EACA,gBAAIxI,OAAO0I,MAAMrB,WAAWrE,cAAjB,GAAkCqE,WAAWpE,aAAxD,CAV6B;EAW7B,gBAAI0F,UAAUD,MAAMrB,WAAWpE,aAAjB,GAAiCoE,WAAWrE,cAA1D,CAX6B;EAY7B,gBAAI5L,MAAOmR,QAAQA,KAAKK,OAAd,GAAyBL,KAAKK,OAAL,EAAzB,GAA0CL,IAApD;;EAEA,iBAAKvE,YAAL,CAAkB2E,OAAlB,EAA2B,IAA3B;EACA,iBAAK3E,YAAL,CAAkBhE,IAAlB,EAAwB5I,GAAxB;EACH;;;uCAEa;EACV,mBAAQ,KAAKgN,YAAL,CAAkBiD,WAAWrE,cAA7B,KACA,KAAKoB,YAAL,CAAkBiD,WAAWpE,aAA7B,CADR;EAEH;;EAGD;;;;;iCAGO7E,MAAM;EACT,iBAAKsC,SAAL,CAAetC,IAAf;EACA,mBAAO,IAAP;EACH;;EAED;;;;;;oCAGWA,MAAM;EACb,gBAAGA,QAAQ,OAAOA,KAAK0K,YAAZ,KAA8B,WAAzC,EACI1K,OAAOA,KAAK0K,YAAL,EAAP;EACJ,iBAAK9E,YAAL,CAAkBqD,WAAWvE,MAA7B,EAAqC1E,IAArC;EACH;;EAED;;;;;;sCAGa;EACT,mBAAO,KAAKgG,YAAL,CAAkBiD,WAAWvE,MAA7B,CAAP;EACH;;EAGD;;;;;iCAGOyF,MAAM;EACT,iBAAKQ,YAAL,CAAkBR,IAAlB;EACA,mBAAO,IAAP;EACH;;;uCAEaA,MAAM;EAChB,gBAAGA,QAAQA,gBAAgBS,IAA3B,EACIT,OAAOA,KAAKK,OAAL,EAAP;EACJ,iBAAK5E,YAAL,CAAkBqD,WAAWhE,MAA7B,EAAqCkF,IAArC;EACH;;;yCAEe;EACZ,gBAAIA,OAAO,KAAKnE,YAAL,CAAkB,KAAKuD,SAAL,CAAetE,MAAjC,CAAX;EACA,gBAAGkF,IAAH,EAASA,OAAO,IAAIS,IAAJ,CAAST,IAAT,CAAP;EACT,mBAAOA,IAAP;EACH;;EAGD;;;;;+BAGKA,MAAM;EACP,iBAAKU,UAAL,CAAgBV,IAAhB;EACA,mBAAO,IAAP;EACH;;;qCAEWA,MAAM;EACd,gBAAGA,QAAQA,gBAAgBS,IAA3B,EACIT,OAAOA,KAAKK,OAAL,EAAP;EACJ,iBAAK5E,YAAL,CAAkBqD,WAAW/D,IAA7B,EAAmCiF,IAAnC;EACH;;;uCAEa;EACV,gBAAIA,OAAO,KAAKnE,YAAL,CAAkB,KAAKuD,SAAL,CAAerE,IAAjC,CAAX;EACA,gBAAGiF,IAAH,EAASA,OAAO,IAAIS,IAAJ,CAAST,IAAT,CAAP;EACT,mBAAOA,IAAP;EACH;;EAGD;;;;;kCAGQW,OAAOC,KAAK;EAChB,iBAAKC,UAAL,CAAgBF,KAAhB,EAAuBC,GAAvB;EACA,mBAAO,IAAP;EACH;;;qCAEUD,OAAOC,KAAK;EACnB,iBAAKE,MAAL,CAAYH,KAAZ;EACA,iBAAKI,IAAL,CAAUH,GAAV;EACH;;EAGD;;;;;wCAGclK,OAAO;EACjB,iBAAKsK,gBAAL,CAAsBtK,KAAtB;EACA,mBAAO,IAAP;EACH;;;2CAEgBA,OAAO;EACpB,gBAAGA,SAAS,OAAOA,MAAMgB,IAAb,KAAuB,WAAnC,EACIhB,QAAQ,CAACA,KAAD,CAAR;EACJ,iBAAK+E,YAAL,CAAkBqD,WAAW9D,aAA7B,EAA4CtE,KAA5C;EACH;;;6CAEkB;EACf,mBAAO,KAAKmF,YAAL,CAAkBiD,WAAW9D,aAA7B,CAAP;EACH;;EAGD;;;;;iCAGOiG,OAAO;EACV,iBAAKC,SAAL,CAAeD,KAAf;EACA,mBAAO,IAAP;EACH;;EAED;;;;;;oCAGWA,OAAO;EACd,gBAAGA,SAAS,OAAOA,MAAMvJ,IAAb,KAAuB,WAAnC,EACIuJ,QAAQ,CAACA,KAAD,CAAR;EACJ,iBAAKxF,YAAL,CAAkBqD,WAAW7D,MAA7B,EAAqCgG,KAArC;EACH;;;sCAEW;EACR,mBAAO,KAAKpF,YAAL,CAAkBiD,WAAW7D,MAA7B,CAAP;EACH;;EAED;;;;;;mCAGSO,MAAM;EACX,gBAAI2F,SAAS,KAAKC,SAAL,MAAoB,EAAjC;EACAD,mBAAOzJ,IAAP,CAAY8D,IAAZ;EACA,iBAAK0F,SAAL,CAAeC,MAAf;EACH;;EAED;;;;;;sCAGY3F,MAAM;EACd,gBAAI2F,SAAS,KAAKC,SAAL,MAAoB,EAAjC;EACA,gBAAIC,MAAMF,OAAOxO,OAAP,CAAe6I,IAAf,CAAV;EACA,gBAAG6F,OAAK,CAAR,EAAW;EACPF,uBAAOG,MAAP,CAAcD,GAAd,EAAmB,CAAnB;EACA,qBAAKH,SAAL,CAAeC,MAAf;EACH;EACJ;;EAGD;;;;;iCAGOvC,SAAQ;EACX,iBAAK2C,SAAL,CAAe3C,OAAf;EACA,mBAAO,IAAP;EACH;;EAED;;;;;;oCAGWA,QAAQ;EACf,gBAAGA,UAAU,OAAOA,OAAOlH,IAAd,KAAwB,WAArC,EACIkH,SAAS,CAACA,MAAD,CAAT;EACJ,iBAAKnD,YAAL,CAAkBqD,WAAW5D,MAA7B,EAAqC0D,MAArC;EACH;;;sCAEW;EACR,mBAAO,KAAK/C,YAAL,CAAkBiD,WAAW5D,MAA7B,CAAP;EACH;;EAGD;;;EAGA;;;;;;+BAGM5D,OAAM;EACR,iBAAKkB,OAAL,CAAalB,KAAb;EACA,mBAAO,IAAP;EACH;;;kCAEOA,MAAM;EACV,gBAAGmB,MAAMnB,IAAN,KAAeA,OAAK,CAAL,GAAO,CAAzB,EAA4B;EAC5B,iBAAKd,KAAL,CAAWc,IAAX,GAAkBA,OAAK,CAAvB;EACH;;;oCAES;EACN,mBAAO,KAAKd,KAAL,CAAWc,IAAlB;EACH;;;qCAEU;EACP,iBAAKkB,OAAL,CAAa,KAAKhC,KAAL,CAAWc,IAAX,GAAgB,CAA7B;EACH;;;yCAEc;EACX,iBAAKkB,OAAL,CAAa,KAAKhC,KAAL,CAAWc,IAAX,GAAgB,CAA7B;EACH;;EAGD;;;EAGA;;;;;;mCAGUC,MAAM;EACZ,iBAAKmB,WAAL,CAAiBnB,IAAjB;EACA,mBAAO,IAAP;EACH;;;sCAEYA,MAAM;EACf,gBAAGkB,MAAMlB,IAAN,KAAeA,OAAK,CAAL,GAAO,CAAzB,EAA4B;EAC5B,iBAAKf,KAAL,CAAWe,IAAX,GAAkBA,OAAK,CAAvB;EACH;;;wCAEa;EACV,mBAAO,KAAKf,KAAL,CAAWe,IAAlB;EACH;;EAGD;;;EAGA;;;;;;;+BAIMa,OAAMC,OAAO;EACf,iBAAKC,OAAL,CAAaF,KAAb,EAAmBC,KAAnB;EACA,mBAAO,IAAP;EACH;;EAED;;;;;;;kCAISD,MAAMC,OAAO;EACjBA,oBAASA,UAAUA,UAAU,KAAV,IAAmBA,UAAU,MAAvC,CAAD,GAAmD,MAAnD,GAA4DA,KAApE;EACA,gBAAGD,QAAQA,KAAKzF,OAAL,CAAa,GAAb,IAAkB,CAA7B,EACGyF,OAAOA,OAAO,GAAP,GAAaC,KAApB;EACH,iBAAK7B,KAAL,CAAW4B,IAAX,GAAkBA,IAAlB;EACJ;;;oCAES;EACN,mBAAO,KAAK5B,KAAL,CAAW4B,IAAlB;EACH;;;yCAEc;EACX,mBAAO,KAAK5B,KAAL,CAAW4B,IAAX,CAAgBG,KAAhB,CAAsB,GAAtB,EAA2B,CAA3B,CAAP;EACH;;;yCAEc;EACX,mBAAO,KAAK/B,KAAL,CAAW4B,IAAX,CAAgBG,KAAhB,CAAsB,GAAtB,EAA2B,CAA3B,MAAkC,KAAzC;EACH;;EAED;;;;;;2CAGiB;EACb,mBAAO6C,uBAAqBY,KAArB,CAA2B,CAA3B,CAAP;EACH;;EAGD;;;EAGA;;;;;;kCAGS;EACL,iBAAKxF,KAAL,GAAa,KAAK+E,YAAlB;EACH;;;;;ECn0BU,yBAAW;EACtB,WAAO,IAAI9E,OAAJ,EAAP;EACH;;ECID;;;;;EAKA,IAAM+K,iBAAiB,SAAjBA,cAAiB,CAAS3S,GAAT,EAAcsF,OAAd,EAAuBJ,UAAvB,EAAmC;EACtD,QAAImB,OAAQ,OAAOrG,GAAP,KAAgB,QAAjB,GACPA,GADO,GACAA,OAAOA,IAAIqG,IAAX,GAAkBrG,IAAIqG,IAAtB,GAA6B,IADxC;EAEA,QAAG,CAACA,IAAJ,EAAU,MAAM,IAAItF,KAAJ,CAAU,qDAAV,CAAN;EACV,QAAG,CAACuE,OAAJ,EAAa,MAAM,IAAIvE,KAAJ,CAAU,yBAAV,CAAN;EACb,QAAG,CAACmE,UAAJ,EAAgB,MAAM,IAAInE,KAAJ,CAAU,qDAAV,CAAN;EAChB,YAAOsF,IAAP;EACI,aAAKyB,UAAUrD,KAAf;EAAwB,mBAAO,IAAIgC,YAAJ,CAAmBnB,OAAnB,EAA4BJ,UAA5B,CAAP;EACxB,aAAK4C,UAAUtD,OAAf;EAAwB,mBAAO,IAAIgD,cAAJ,CAAmBlC,OAAnB,EAA4BJ,UAA5B,CAAP;EACxB,aAAK4C,UAAUpD,GAAf;EAAwB,mBAAO,IAAI8B,UAAJ,CAAmBlB,OAAnB,EAA4BJ,UAA5B,CAAP;EACxB,aAAK4C,UAAUnD,OAAf;EAAwB,mBAAO,IAAIuD,cAAJ,CAAmB5C,OAAnB,EAA4BJ,UAA5B,CAAP;EACxB,aAAK4C,UAAUvD,OAAf;EAAwB,mBAAO,IAAIgC,cAAJ,CAAmBjB,OAAnB,EAA4BJ,UAA5B,CAAP;EACxB;EAAwB,mBAAO,IAAID,WAAJ,CAAmBK,OAAnB,EAA4BJ,UAA5B,CAAP;EAN5B;EAQH,CAdD;;ACdA,eAAe;;EAEX;EACA;;EAEA0N,eAAW,mBAASjT,OAAT,EAAkB;EACzBqD,eAAOC,MAAP,CAAc,IAAd,EAAoBtD,OAApB;EACH;EAPU,CAAf;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}