"use strict";function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _get=function e(t,r,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var u=Object.getPrototypeOf(t);return null===u?void 0:e(u,r,i)}if("value"in n)return n.value;var s=n.get;if(void 0!==s)return s.call(i)},_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"function"==typeof define&&define.amd?define([],function(){return e.ItemTypes=t()}):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e.ItemTypes=t():GeoPlatform.ItemTypes=t()}(window,function(){return{DATASET:"dcat:Dataset",SERVICE:"regp:Service",LAYER:"Layer",MAP:"Map",GALLERY:"Gallery",ORGANIZATION:"org:Organization",CONCEPT:"skos:Concept",CONCEPT_SCHEME:"skos:ConceptScheme",STANDARD:"dct:Standard"}}),function(e,t){"function"==typeof define&&define.amd?define([],function(){return e.QueryParameters=t()}):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e.QueryParameters=t():GeoPlatform.QueryParameters=t()}(window,function(){return{TYPES:"type",QUERY:"q",KEYWORDS:"keyword",URI:"uri",CREATED_BY:"createdBy",CONTRIBUTED_BY:"contributedBy",CREATOR:"creator.id",SVC_TYPES:"serviceType.id",THEMES_ID:"theme.id",THEMES_LABEL:"theme.label",THEMES_URI:"theme.uri",PUBLISHERS:"publisher.id",PUBLISHERS_LABEL:"publisher.label",PUBLISHERS_URI:"publisher.uri",USED_BY:"usedBy.id",USED_BY_LABEL:"usedBy.label",USED_BY_URI:"usedBy.uri",SCHEMES_ID:"scheme.id",SCHEMES_LABEL:"scheme.label",SCHEMES_URI:"scheme.uri",VISIBILITY:"visibility",EXTENT:"extent",MODIFIED_BEFORE:"modified.max",MODIFIED_AFTER:"modified.min",BEGINS:"startDate.min",ENDS:"endDate.max",RESOURCE_TYPE:"resourceType",FOR_TYPES:"for"}}),function(e,t){"function"==typeof define&&define.amd?define([],function(){return e.QueryFacets=t()}):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e.QueryFacets=t():GeoPlatform.QueryFacets=t()}(window,function(){return{TYPES:"types",THEMES:"themes",PUBLISHERS:"publishers",SERVICE_TYPES:"serviceTypes",CONCEPT_SCHEMES:"schemes",VISIBILITY:"visibility",CREATED_BY:"createdBy",USED_BY:"usedBy.id"}}),function(e,t){"function"==typeof define&&define.amd?define(["QueryParameters","QueryFacets"],function(r,i){return e.Query=t(r,i)}):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e.Query=t(require("./parameters"),require("./facets")):GeoPlatform.Query=t(GeoPlatform.QueryParameters,GeoPlatform.QueryFacets)}(window,function(e,t){var r=["created","modified","createdBy","publishers","themes","description"],i=[t.TYPES,t.PUBLISHERS,t.SERVICE_TYPES,t.CONCEPT_SCHEMES,t.VISIBILITY,t.CREATED_BY],n=[{value:"label,asc",label:"Name (A-Z)"},{value:"label,desc",label:"Name (Z-A)"},{value:"type,asc",label:"Type (A-Z)"},{value:"type,desc",label:"Type (Z-A)"},{value:"modified,desc",label:"Most recently modified"},{value:"modified,asc",label:"Least recently modified"},{value:"_score,desc",label:"Relevance"}];return function(){function t(){_classCallCheck(this,t),this.defaultQuery={page:0,size:10,total:0,sort:"modified,desc",fields:r.slice(0),includeFacets:i.slice(0)},this.query={page:0,size:10,total:0,sort:"modified,desc",fields:r.slice(0),includeFacets:i.slice(0)}}return _createClass(t,[{key:"getQuery",value:function(){var e={};for(var t in this.query){var r=this.query[t];null!==r&&void 0!==r.push&&(r=r.join(",")),e[t]=r}return e}},{key:"parameter",value:function(e,t){return this.setParameter(e,t),this}},{key:"setParameter",value:function(e,t){null===t||void 0===t?delete this.query[e]:this.query[e]=t}},{key:"getParameter",value:function(e){return this.getParameter(e)}},{key:"applyParameters",value:function(e){for(var t in e)e.hasOwnProperty(t)&&this.setParameter(t,e[t])}},{key:"q",value:function(e){return this.setQ(e),this}},{key:"setQ",value:function(t){this.setParameter(e.QUERY,t)}},{key:"getQ",value:function(){return this.getParameter(e.QUERY)}},{key:"keywords",value:function(e){return this.setQ(e),this}},{key:"setKeywords",value:function(t){t&&void 0!==t.push&&(t=t.join(",")),this.setParameter(e.KEYWORDS,t)}},{key:"getKeywords",value:function(){return this.getParameter(e.KEYWORDS)}},{key:"uri",value:function(e){return this.setUri(e),this}},{key:"setUri",value:function(t){this.setParameter(e.URI,t)}},{key:"getUri",value:function(){return this.getParameter(e.URI)}},{key:"types",value:function(e){return this.setTypes(e),this}},{key:"setTypes",value:function(t){t&&"undefined"===t.push&&(t=[t]),this.setParameter(e.TYPES,t)}},{key:"getTypes",value:function(){return this.getParameter(e.TYPES)}},{key:"createdBy",value:function(e){return this.setCreatedBy(e),this}},{key:"setCreatedBy",value:function(t){this.setParameter(e.CREATED_BY,t)}},{key:"getCreatedBy",value:function(){return this.getParameter(e.CREATED_BY)}},{key:"themes",value:function(e,t){return this.setThemes(e,t),this}},{key:"setThemes",value:function(t,r){t&&"undefined"===t.push&&(t=[t]),this.setParameter(e.THEMES_ID,null),this.setParameter(e.THEMES_LABEL,null),this.setParameter(e.THEMES_URI,null);var i=r||e.THEMES_ID;this.setParameter(i,t)}},{key:"getThemes",value:function(){return this.getParameter(e.THEMES_ID)||this.getParameter(e.THEMES_LABEL)||this.getParameter(e.THEMES_URI)}},{key:"publishers",value:function(e,t){return this.setPublishers(e,t),this}},{key:"setPublishers",value:function(t,r){t&&"undefined"===t.push&&(t=[t]),this.setParameter(e.PUBLISHERS_ID,null),this.setParameter(e.PUBLISHERS_LABEL,null),this.setParameter(e.PUBLISHERS_URI,null);var i=r||e.PUBLISHERS_ID;this.setParameter(i,t)}},{key:"getPublishers",value:function(){return this.getParameter(e.PUBLISHERS_ID)||this.getParameter(e.PUBLISHERS_LABEL)||this.getParameter(e.PUBLISHERS_URI)}},{key:"usedBy",value:function(e,t){return this.setUsedBy(e,t),this}},{key:"setUsedBy",value:function(t,r){t&&"undefined"===t.push&&(t=[t]),this.setParameter(e.USED_BY_ID,null),this.setParameter(e.USED_BY_LABEL,null),this.setParameter(e.USED_BY_URI,null);var i=r||e.USED_BY_ID;this.setParameter(i,t)}},{key:"getUsedBy",value:function(){return this.getParameter(e.USED_BY_ID)||this.getParameter(e.USED_BY_LABEL)||this.getParameter(e.USED_BY_URI)}},{key:"schemes",value:function(e,t){return this.setSchemes(e,t),this}},{key:"setSchemes",value:function(t,r){t&&"undefined"===t.push&&(t=[t]),this.setParameter(e.SCHEMES_ID,null),this.setParameter(e.SCHEMES_LABEL,null),this.setParameter(e.SCHEMES_URI,null);var i=r||e.SCHEMES_ID;this.setParameter(i,t)}},{key:"getSchemes",value:function(){return this.getParameter(e.SCHEMES)||this.getParameter(e.SCHEMES_LABEL)||this.getParameter(e.SCHEMES_URI)}},{key:"serviceTypes",value:function(e){return this.setServiceTypes(e),this}},{key:"setServiceTypes",value:function(t){t&&"undefined"===t.push&&(t=[t]),this.setParameter(e.SERVICE_TYPES,t)}},{key:"getServiceTypes",value:function(){return this.getParameter(e.SERVICE_TYPES)}},{key:"visibility",value:function(e){return this.setVisibility(e),this}},{key:"setVisibility",value:function(t){this.setParameter(e.VISIBILITY,t)}},{key:"getVisibility",value:function(){this.getParameter(e.VISIBILITY)}},{key:"modified",value:function(e,t){return this.setModified(e,t),this}},{key:"setModified",value:function(t,r){if(!t)return this.setParameter(e.MODIFIED_BEFORE,null),void this.setParameter(e.MODIFIED_AFTER,null);var i=r&&(!0===r||"true"===r),n=i?e.MODIFIED_BEFORE:e.MODIFIED_AFTER,u=i?e.MODIFIED_AFTER:e.MODIFIED_BEFORE,s=t&&t.getTime?t.getTime():t;this.setParameter(u,null),this.setParameter(n,s)}},{key:"getModified",value:function(){return this.getParameter(e.MODIFIED_BEFORE)||this.getParameter(e.MODIFIED_AFTER)}},{key:"extent",value:function(e){return this.setExtent(e),this}},{key:"setExtent",value:function(t){t&&void 0!==t.toBboxString&&(t=t.toBboxString()),this.setParameter(e.EXTENT,t)}},{key:"getExtent",value:function(){return this.getParameter(e.EXTENT)}},{key:"begins",value:function(e){return this.setBeginDate(e),this}},{key:"setBeginDate",value:function(t){t&&t instanceof Date&&(t=t.getTime()),this.setParameter(e.BEGINS,t)}},{key:"getBeginDate",value:function(){var e=this.getParameter(this.parameter.BEGINS);return e&&(e=new Date(e)),e}},{key:"ends",value:function(e){return this.setEndDate(e),this}},{key:"setEndDate",value:function(t){t&&t instanceof Date&&(t=t.getTime()),this.setParameter(e.ENDS,t)}},{key:"getEndDate",value:function(){var e=this.getParameter(this.parameter.ENDS);return e&&(e=new Date(e)),e}},{key:"between",value:function(e,t){return this.setBetween(e,t),this}},{key:"setBetween",value:function(e,t){this.begins(e),this.ends(t)}},{key:"resourceTypes",value:function(e){return this.setResourceTypes(e),this}},{key:"setResourceTypes",value:function(t){t&&"undefined"===t.push&&(t=[t]),this.setParameter(e.RESOURCE_TYPE,t)}},{key:"getResourceTypes",value:function(){return this.getParameter(e.RESOURCE_TYPE)}},{key:"facets",value:function(e){return this.setFacets(e),this}},{key:"setFacets",value:function(e){this.query.includeFacets=e}},{key:"getFacets",value:function(){return this.query.includeFacets}},{key:"addFacet",value:function(e){var t=(this.getFacets()||[]).push(e);this.setFacets(t)}},{key:"removeFacet",value:function(e){var t=this.getFacets()||[],r=t.indexOf(e);r>=0&&(t.splice(r,1),this.setFacets(t))}},{key:"fields",value:function(e){return this.setFields(e),this}},{key:"setFields",value:function(e){e&&void 0===e.push&&(e=[e]),this.query.fields=e}},{key:"getFields",value:function(){return this.query.fields}},{key:"page",value:function(e){return this.setPage(e),this}},{key:"setPage",value:function(e){isNaN(e)||1*e<0||(this.query.page=1*e)}},{key:"getPage",value:function(){return this.query.page}},{key:"nextPage",value:function(){this.setPage(this.query.page+1)}},{key:"previousPage",value:function(){this.setPage(this.query.page-1)}},{key:"pageSize",value:function(e){return this.setPageSize(e),this}},{key:"setPageSize",value:function(e){isNaN(e)||1*e<0||(this.query.size=1*e)}},{key:"getPageSize",value:function(){return this.query.size}},{key:"sort",value:function(e,t){return this.setSort(e,t),this}},{key:"setSort",value:function(e,t){t=!t||"asc"===t&&"desc"===t?t:"desc",e&&e.indexOf(",")<0&&(e=e+","+t),this.query.sort=e}},{key:"getSort",value:function(){return this.query.sort}},{key:"getSortField",value:function(){return this.query.sort.split(",")[0]}},{key:"getSortOrder",value:function(){return"asc"===this.query.sort.split(",")[1]}},{key:"getSortOptions",value:function(){return n.slice(0)}},{key:"clear",value:function(){this.query=this.defaultQuery}}]),t}()}),function(e,t){"function"==typeof define&&define.amd?define(["Query"],function(r){return e.QueryFactory=t(r)}):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e.QueryFactory=t(require("./query")):GeoPlatform.QueryFactory=t(GeoPlatform.Query)}(window,function(e){return function(){return new e}}),function(e,t){"function"==typeof define&&define.amd?define([],function(){return e.KGClassifiers=t()}):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e.KGClassifiers=t():GeoPlatform.KGClassifiers=t()}(window,function(){return{PURPOSE:"purposes",FUNCTION:"functions",TOPIC_PRIMARY:"primaryTopics",TOPIC_SECONDARY:"secondaryTopics",SUBJECT_PRIMARY:"primarySubjects",SUBJECT_SECONDARY:"secondarySubjects",COMMUNITY:"communities",AUDIENCE:"audiences",PLACE:"places",CATEGORY:"categories"}}),function(e,t){"function"==typeof define&&define.amd?define(["QueryParameters"],function(r){return e.KGQuery=t(r)}):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e.KGQuery=t(require("./parameters")):GeoPlatform.KGQuery=t(GeoPlatform.QueryParameters)}(window,function(e){var t=[{value:"label,asc",label:"Name (A-Z)"},{value:"label,desc",label:"Name (Z-A)"},{value:"type,asc",label:"Type (A-Z)"},{value:"type,desc",label:"Type (Z-A)"},{value:"modified,desc",label:"Most recently modified"},{value:"modified,asc",label:"Least recently modified"},{value:"_score,desc",label:"Relevance"}];return function(){function r(){_classCallCheck(this,r),this.defaultQuery={page:0,size:10,sort:"modified,desc"},this.query={page:0,size:10,sort:"modified,desc"}}return _createClass(r,[{key:"getQuery",value:function(){var e={};for(var t in this.query){var r=this.query[t];null!==r&&void 0!==r.push&&(r=r.join(",")),e[t]=r}return e}},{key:"parameter",value:function(e,t){return this.setParameter(e,t),this}},{key:"setParameter",value:function(e,t){null===t||void 0===t?delete this.query[e]:this.query[e]=t}},{key:"getParameter",value:function(e){return this.getParameter(e)}},{key:"applyParameters",value:function(e){for(var t in e)e.hasOwnProperty(t)&&this.setParameter(t,e[t])}},{key:"q",value:function(e){return this.setQ(e),this}},{key:"setQ",value:function(t){this.setParameter(e.QUERY,t)}},{key:"getQ",value:function(){return this.getParameter(e.QUERY)}},{key:"classifiers",value:function(e){return this.setClassifiers(e),this}},{key:"setClassifiers",value:function(t){t&&"undefined"===t.push&&(t=[t]),this.setParameter(e.TYPES,t)}},{key:"getClassifiers",value:function(){return this.getParameter(e.TYPES)}},{key:"types",value:function(e){return this.setTypes(e),this}},{key:"setTypes",value:function(t){t&&"undefined"===t.push&&(t=[t]),this.setParameter(e.FOR_TYPES,t)}},{key:"getTypes",value:function(){return this.getParameter(e.FOR_TYPES)}},{key:"page",value:function(e){return this.setPage(e),this}},{key:"setPage",value:function(e){isNaN(e)||1*e<0||(this.query.page=1*e)}},{key:"getPage",value:function(){return this.query.page}},{key:"nextPage",value:function(){this.setPage(this.query.page+1)}},{key:"previousPage",value:function(){this.setPage(this.query.page-1)}},{key:"pageSize",value:function(e){return this.setPageSize(e),this}},{key:"setPageSize",value:function(e){isNaN(e)||1*e<0||(this.query.size=1*e)}},{key:"getPageSize",value:function(){return this.query.size}},{key:"sort",value:function(e,t){return this.setSort(e,t),this}},{key:"setSort",value:function(e,t){t=!t||"asc"===t&&"desc"===t?t:"desc",e&&e.indexOf(",")<0&&(e=e+","+t),this.query.sort=e}},{key:"getSort",value:function(){return this.query.sort}},{key:"getSortField",value:function(){return this.query.sort.split(",")[0]}},{key:"getSortOrder",value:function(){return"asc"===this.query.sort.split(",")[1]}},{key:"getSortOptions",value:function(){return t.slice(0)}},{key:"clear",value:function(){this.query=this.defaultQuery}}]),r}()}),function(e,t){"function"==typeof define&&define.amd?define(["jquery","q"],function(r,i){return e.JQueryHttpClient=t(r,i)}):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e.JQueryHttpClient=t(require("jquery"),require("q")):GeoPlatform.JQueryHttpClient=t(jQuery,Q)}(window,function(e,t){return function(){function r(e){_classCallCheck(this,r),e=e||{},this.setTimeout(e.timeout||1e4),this.setAuthToken(e.token)}return _createClass(r,[{key:"setTimeout",value:function(e){this.timeout=e}},{key:"setAuthToken",value:function(e){e&&"string"==typeof e?this.token=function(){return e}:e&&"function"==typeof e&&(this.token=e)}},{key:"createRequestOpts",value:function(e){var t={method:e.method,url:e.url,timeout:e.timeout||this.timeout};if(!0===e.json&&(t.dataType="json"),e.params&&(t.data=e.params,t.processData=!0),e.data&&(t.data=e.data,t.processData=e.processData||!1,t.contentType="application/json"),this.token){var r=this.token();r&&(t.headers=t.headers||{},t.headers.Authorization="Bearer "+r)}if(e.options)for(var i in e.options)e.options.hasOwnProperty(i)&&(t[i]=e.options[i]);return t}},{key:"execute",value:function(r){var i=t.defer();return r.success=function(e){i.resolve(e)},r.error=function(e,t,r){i.reject(new Error(r))},e.ajax(r),i.promise}}]),r}()}),function(e,t){"function"==typeof define&&define.amd?define(["q"],function(r){return e.ItemService=t(r)}):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e.ItemService=t(require("q")):GeoPlatform.ItemService=t(Q)}(window,function(e){return function(){function t(e,r){_classCallCheck(this,t),this.setUrl(e),this.client=r,this.timeout=1e4,this.httpMethods=["GET","POST","PUT","DELETE","PATCH"]}return _createClass(t,[{key:"setUrl",value:function(e){this.apiBase=e,this.baseUrl=e+"/api/items"}},{key:"get",value:function(t,r){var i=this;return e.resolve(t).then(function(e){var t=i.buildRequest({method:"GET",url:i.baseUrl+"/"+e,options:r});return i.execute(t)}).catch(function(r){var i=new Error("ItemService.get() - Error fetching item "+t+": "+r.message);return e.reject(i)})}},{key:"save",value:function(t,r){var i=this;return e.resolve(t).then(function(e){var t="POST",n=i.baseUrl;e.id&&(t="PUT",n+="/"+e.id);var u=i.buildRequest({method:t,url:n,data:e,options:r});return i.execute(u)}).catch(function(t){var r=new Error("ItemService.save() - Error saving item: "+t.message);return e.reject(r)})}},{key:"remove",value:function(t,r){var i=this;return e.resolve(this.baseUrl+"/"+t).then(function(e){var t=i.buildRequest({method:"DELETE",url:e,options:r});return i.execute(t)}).then(function(e){return!0}).catch(function(r){var i=new Error("ItemService.remove() - Error deleting item "+t+": "+r.message);return e.reject(i)})}},{key:"patch",value:function(t,r,i){var n=this;return e.resolve(this.baseUrl+"/"+t).then(function(e){var t=n.buildRequest({method:"PATCH",url:e,data:r,options:i});return n.execute(t)}).catch(function(r){var i=new Error("ItemService.patch() - Error patching item "+t+": "+r.message);return e.reject(i)})}},{key:"search",value:function(t,r){var i=this;return e.resolve(t).then(function(e){e&&void 0!==e.getQuery&&(e=e.getQuery());var t=i.buildRequest({method:"GET",url:i.baseUrl,params:e,options:r});return i.execute(t)}).catch(function(t){var r=new Error("ItemService.search() - Error searching items: "+t.message);return e.reject(r)})}},{key:"import",value:function(t,r,i){var n=this;return e.resolve(!0).then(function(){if(!t||t.indexOf("http")<0)throw new Error("Must provide a valid URL or File");var e="string"!=typeof t,u={method:"POST",url:n.apiBase+"/api/import",processData:!0,formData:!0,options:i};e?(u.file=t,u.data={format:r}):u.data={url:t,format:r};var s=n.buildRequest(u);return n.execute(s)}).catch(function(t){var r=new Error("ItemService.import() - Error importing item: "+t.message);return e.reject(r)})}},{key:"export",value:function(t,r,i){var n=this;return e.resolve(!0).then(function(){var e=n.baseUrl+"/"+t+"/export",u=n.buildRequest({method:"GET",url:e,params:{format:r},json:!1,options:i});return n.execute(u)}).catch(function(t){var r=new Error("ItemService.export() - Error exporting item: "+t.message);return e.reject(r)})}},{key:"getUri",value:function(t,r){var i=this;return e.resolve(t).then(function(e){if(!e||!e.type)throw new Error("Must provide an object with a type property");var t=i.apiBase+"/api/utils/uri",n=i.buildRequest({method:"POST",url:t,data:e,options:r});return i.execute(n)}).catch(function(t){var r=new Error("ItemService.getUri() - Error getting URI for item: "+t.message);return e.reject(r)})}},{key:"buildRequest",value:function(e){if(this.httpMethods.indexOf(e.method)<0)throw new Error("Unsupported HTTP method "+e.method);if(!e.url)throw new Error("Must specify a URL for HTTP requests");return e.timeout=this.timeout,this.createRequestOpts(e)}},{key:"createRequestOpts",value:function(e){return this.client.createRequestOpts(e)}},{key:"execute",value:function(e){return this.client.execute(e)}}]),t}()}),function(e,t){"function"==typeof define&&define.amd?define(["q","ItemService"],function(r,i){return e.LayerService=t(r,i)}):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e.LayerService=t(require("q"),require("./item")):GeoPlatform.LayerService=t(Q,GeoPlatform.ItemService)}(window,function(e,t){return function(t){function r(e,t){return _classCallCheck(this,r),_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t))}return _inherits(r,t),_createClass(r,[{key:"setUrl",value:function(e){_get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"setUrl",this).call(this,e),this.baseUrl=e+"/api/layers"}},{key:"style",value:function(t){var r=this;return e.resolve(!0).then(function(){var e=r.baseUrl+"/"+id+"/style",i=r.buildRequest({method:"GET",url:e,options:t});return r.execute(i)}).catch(function(t){var r=new Error("LayerService.style() - Error fetching style: "+t.message);return e.reject(r)})}},{key:"describe",value:function(t,r,i){var n=this;return e.resolve(r).then(function(e){if(!e)throw new Error("Must provide describe parameters to use");var r=["bbox","height","width","x","y"],u=r.find(function(t){return!e[t]});if(u)throw new Error("Must specify "+u+" in describe req");var s={srs:"EPSG:4326",bbox:e.bbox,height:e.height,width:e.width,info_format:"text/xml",x:e.x,y:e.y,i:e.x,j:e.y},o=n.baseUrl+"/"+t+"/describe",a=n.buildRequest({method:"GET",url:o,params:s,options:i});return n.execute(a)}).catch(function(t){var r=new Error("LayerService.describe() -\n                    Error describing layer feature: "+t.message);return e.reject(r)})}},{key:"validate",value:function(t,r,i){var n=this;return e.resolve(r).then(function(e){if(!e)throw new Error("Must provide parameters to use in layer validation");var r=n.baseUrl+"/"+t+"/validate",u=n.buildRequest({method:"GET",url:r,params:e,options:i});return n.execute(u)}).catch(function(t){var r=new Error("LayerService.describe() -\n                    Error describing layer feature: "+t.message);return e.reject(r)})}}]),r}(t)}),function(e,t){"function"==typeof define&&define.amd?define(["q","ItemTypes","ItemService"],function(r,i,n){return e.ServiceService=t(r,i,n)}):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e.ServiceService=t(require("q"),require("../shared/types"),require("./item")):GeoPlatform.ServiceService=t(Q,GeoPlatform.ItemTypes,GeoPlatform.ItemService)}(window,function(e,t,r){return function(r){function i(e,t){return _classCallCheck(this,i),_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,t))}return _inherits(i,r),_createClass(i,[{key:"setUrl",value:function(e){_get(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"setUrl",this).call(this,e),this.baseUrl=e+"/api/services"}},{key:"about",value:function(t,r){var i=this;return e.resolve(t).then(function(e){if(!e)throw new Error("Must provide service to get metadata about");var t=i.buildRequest({method:"POST",url:i.baseUrl+"/about",data:e,options:r});return i.execute(t)}).catch(function(t){var r=new Error("ServiceService.about() -\n                    Error describing service: "+t.message);return e.reject(r)})}},{key:"types",value:function(r){var i=this,n=(new Query).types(t.STANDARD).resourceTypes("ServiceType").pageSize(50).getQuery();return e.resolve(n).then(function(e){var t=i.apiBase+"/api/items",n=i.buildRequest({method:"GET",url:t,params:e,options:r});return i.execute(n)}).then(function(e){return e.results}).catch(function(t){var r=new Error("ServiceService.types() -\n                    Error fetching service types: "+t.message);return e.reject(r)})}},{key:"import",value:function(t,r){var i=this;return e.resolve(t).then(function(e){var t=i.baseUrl+"/import",n=i.buildRequest({method:"POST",url:t,data:e,options:r});return i.execute(n)}).catch(function(t){var r=new Error("ServiceService.import() -\n                    Error importing service: "+t.message);return e.reject(r)})}},{key:"harvest",value:function(t,r){var i=this;return e.resolve(t).then(function(e){var t=i.baseUrl+"/"+e+"/harvest",n=i.buildRequest({method:"GET",url:t,options:r});return i.execute(n)}).catch(function(t){var r=new Error("ServiceService.harvest() -\n                    Error harvesting layers from service: "+t.message);return e.reject(r)})}},{key:"liveTest",value:function(t,r){var i=this;return e.resolve(t).then(function(e){var t=i.baseUrl+"/"+e+"/test",n=i.buildRequest({method:"GET",url:t,options:r});return i.execute(n)}).catch(function(t){var r=new Error("ServiceService.liveTest() -\n                    Error testing service: "+t.message);return e.reject(r)})}},{key:"statistics",value:function(t,r){var i=this;return e.resolve(t).then(function(e){var t=i.baseUrl+"/"+e+"/statistics",n=i.buildRequest({method:"GET",url:t,options:r});return i.execute(n)}).catch(function(t){var r=new Error("ServiceService.statistics() -\n                    Error getting service statistics: "+t.message);return e.reject(r)})}}]),i}(r)}),function(e,t){"function"==typeof define&&define.amd?define(["q","ItemService"],function(r,i){return e.GalleryService=t(r,i)}):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e.GalleryService=t(require("q"),require("./item")):GeoPlatform.GalleryService=t(Q,GeoPlatform.ItemService)}(window,function(e,t){return function(t){function r(e,t){return _classCallCheck(this,r),_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t))}return _inherits(r,t),_createClass(r,[{key:"setUrl",value:function(e){_get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"setUrl",this).call(this,e),this.baseUrl=e+"/api/galleries"}},{key:"addItem",value:function(t,r,i){var n=this;return e.resolve(!0).then(function(){var e=n.baseUrl+"/"+t+"/items",u=n.buildRequest({method:"POST",url:e,data:r,options:i});return n.execute(u)}).catch(function(t){var r=new Error("GalleryService.addItem() - Error adding item: "+t.message);return e.reject(r)})}},{key:"removeItem",value:function(t,r,i){var n=this;return e.resolve(this.baseUrl+"/"+t+"/items/"+r).then(function(e){var t=n.buildRequest({method:"DELETE",url:e,options:i});return n.execute(t)}).then(function(e){return!0}).catch(function(t){var r=new Error("GalleryService.addItem() - Error adding item: "+t.message);return e.reject(r)})}}]),r}(t)}),function(e,t){"function"==typeof define&&define.amd?define(["q","ItemService"],function(r,i){return e.MapService=t(r,i)}):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e.MapService=t(require("q"),require("./item")):GeoPlatform.MapService=t(Q,GeoPlatform.ItemService)}(window,function(e,t){return function(e){function t(e,r){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return _inherits(t,e),_createClass(t,[{key:"setUrl",value:function(e){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setUrl",this).call(this,e),this.baseUrl=e+"/api/maps"}}]),t}(t)}),function(e,t){"function"==typeof define&&define.amd?define(["q","ItemService"],function(r,i){return e.DatasetService=t(r,i)}):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e.DatasetService=t(require("q"),require("./item")):GeoPlatform.DatasetService=t(Q,GeoPlatform.ItemService)}(window,function(e,t){return function(e){function t(e,r){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return _inherits(t,e),_createClass(t,[{key:"setUrl",value:function(e){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setUrl",this).call(this,e),this.baseUrl=e+"/api/datasets"}}]),t}(t)}),function(e,t){"function"==typeof define&&define.amd?define(["q"],function(r){return e.UtilsService=t(r)}):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e.UtilsService=t(require("q")):GeoPlatform.UtilsService=t(Q)}(window,function(e){return function(){function t(e,r){_classCallCheck(this,t),this.setUrl(e),this.client=r,this.timeout=1e4,this.httpMethods=["GET","POST","PUT","DELETE","PATCH"]}return _createClass(t,[{key:"setUrl",value:function(e){this.baseUrl=e}},{key:"capabilities",value:function(t,r,i){var n=this,u=this.baseUrl+"/api/capabilities";return t&&(u+="/"+t),e.resolve(u).then(function(e){var t=n.buildRequest({method:"GET",url:e,params:r||{},options:i});return n.execute(t)}).catch(function(t){var r=new Error("UtilsService.capabilities() - Error getting capabilities: "+t.message);return e.reject(r)})}},{key:"parseFile",value:function(t,r,i){var n=this,u=this.baseUrl+"/api/utils/parse";return e.resolve(u).then(function(e){var u=n.buildRequest({method:"POST",url:e,data:{format:r},file:t,formData:!0,options:i});return n.execute(u)}).then(function(e){return e.body}).catch(function(t){var r=new Error("UtilsService.parseFile() - Error parsing file: "+t.message);return e.reject(r)})}},{key:"buildRequest",value:function(e){if(this.httpMethods.indexOf(e.method)<0)throw new Error("Unsupported HTTP method "+e.method);if(!e.url)throw new Error("Must specify a URL for HTTP requests");return e.timeout=this.timeout,this.createRequestOpts(e)}},{key:"createRequestOpts",value:function(e){return this.client.createRequestOpts(e)}},{key:"execute",value:function(e){return this.client.execute(e)}}]),t}()}),function(e,t){"function"==typeof define&&define.amd?define(["q","QueryParameters"],function(r,i){return e.KGService=t(r,i)}):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e.KGService=t(require("q"),require("../shared/parameters")):GeoPlatform.KGService=t(Q,GeoPlatform.QueryParameters)}(window,function(e,t){return function(){function t(e,r){_classCallCheck(this,t),this.setUrl(e),this.client=r,this.timeout=1e4,this.httpMethods=["GET","POST","PUT","DELETE","PATCH"]}return _createClass(t,[{key:"setUrl",value:function(e){this.apiBase=e,this.baseUrl=e+"/api/recommender"}},{key:"suggest",value:function(t,r){var i=this.baseUrl+"/suggest";return this._search(i,t,r).catch(function(t){var r=new Error("KGService.suggest() - Error suggesting concepts: "+t.message);return e.reject(r)})}},{key:"types",value:function(t,r){var i=this.baseUrl+"/types";return this._search(i,t,r).catch(function(t){var r=new Error("KGService.types() - Error searching types: "+t.message);return e.reject(r)})}},{key:"sources",value:function(t,r){var i=this.baseUrl+"/sources";return this._search(i,t,r).catch(function(t){var r=new Error("KGService.sources() - Error searching sources: "+t.message);return e.reject(r)})}},{key:"_search",value:function(t,r,i){var n=this;return e.resolve(!0).then(function(){r&&void 0!==r.getQuery&&(r=r.getQuery());var e=n.buildRequest({method:"GET",url:t,params:r,options:i});return n.execute(e)})}},{key:"buildRequest",value:function(e){if(this.httpMethods.indexOf(e.method)<0)throw new Error("Unsupported HTTP method "+e.method);if(!e.url)throw new Error("Must specify a URL for HTTP requests");return e.timeout=this.timeout,this.createRequestOpts(e)}},{key:"createRequestOpts",value:function(e){return this.client.createRequestOpts(e)}},{key:"execute",value:function(e){
return this.client.execute(e)}}]),t}()}),function(e,t){"function"==typeof define&&define.amd?define(["ItemTypes","ItemService","LayerService","ServiceService","GalleryService","DatasetService","MapService"],function(r,i,n,u,s,o,a){return e.ServiceFactory=t(r,i,n,u,s,o,a)}):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e.ServiceFactory=t(require("../shared/types"),require("./item"),require("./layer"),require("./service"),require("./gallery"),require("./dataset"),require("./map")):GeoPlatform.ServiceFactory=t(GeoPlatform.ItemTypes,GeoPlatform.ItemService,GeoPlatform.LayerService,GeoPlatform.ServiceService,GeoPlatform.GalleryService,GeoPlatform.DatasetService,GeoPlatform.MapService)}(window,function(e,t,r,i,n,u,s){return function(o,a,c){var l="string"==typeof o?o:o&&o.type?o.type:null;if(!l)throw new Error("Must provide a type or object with a type specified");if(!a)throw new Error("Must provide a base url");if(!c)throw new Error("Must provide an http client to use to make requests");switch(l){case e.LAYER:return new r(a,c);case e.SERVICE:return new i(a,c);case e.MAP:return new s(a,c);case e.GALLERY:return new n(a,c);case e.DATASET:return new u(a,c);default:return new t(a,c)}}});