/*
This software has been approved for release by the U.S. Department of the Interior. Although the software has been subjected to rigorous review, the DOI reserves the right to update the software as needed pursuant to further analysis and review. No warranty, expressed or implied, is made by the DOI or the U.S. Government as to the functionality of the software and related material nor shall the fact of release constitute any such warranty. Furthermore, the software is released on condition that neither the DOI nor the U.S. Government shall be held liable for any damages resulting from its authorized or unauthorized use.
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("axios")):"function"==typeof define&&define.amd?define("@geoplatform/client",["exports","axios"],t):t((e.geoplatform=e.geoplatform||{},e.geoplatform.client={}),e.axios)}(this,function(e,t){"use strict";t=t&&t.hasOwnProperty("default")?t["default"]:t;var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function r(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var o,s=(r(n,o=Error),n.prototype.setError=function(e){this.error=e},n.prototype.setStatus=function(e){this.status=this.statusCode=e},n);function n(e){var t=o.call(this,e)||this;return t.status=500,t.statusCode=500,t.error=null,t}var a={DATASET:"dcat:Dataset",SERVICE:"regp:Service",LAYER:"Layer",MAP:"Map",GALLERY:"Gallery",COMMUNITY:"Community",APPLICATION:"Application",TOPIC:"Topic",WEBSITE:"WebSite",ORGANIZATION:"org:Organization",CONTACT:"vcard:VCard",PERSON:"foaf:Person",CONCEPT:"skos:Concept",CONCEPT_SCHEME:"skos:ConceptScheme",STANDARD:"dct:Standard",RIGHTS_STATEMENT:"dct:RightsStatement"},u={};u[a.DATASET]="Dataset",u[a.SERVICE]="Service",u[a.LAYER]="Layer",u[a.MAP]="Map",u[a.GALLERY]="Gallery",u[a.COMMUNITY]="Community",u[a.APPLICATION]="Application",u[a.TOPIC]="Topic",u[a.WEBSITE]="WebSite",u[a.ORGANIZATION]="Organization",u[a.CONTACT]="Contact",u[a.PERSON]="Person",u[a.CONCEPT]="Concept",u[a.CONCEPT_SCHEME]="Concept Scheme",u[a.STANDARD]="Standard",u[a.RIGHTS_STATEMENT]="Rights Statement";var c="http://www.geoplatform.gov",p=["http://www.geoplatform.gov/spec/esri-feature-rest","http://www.geoplatform.gov/spec/esri-image-rest","http://www.geoplatform.gov/spec/esri-map-rest","http://www.geoplatform.gov/spec/esri-tile-rest"];function l(e){if(null===e)return"";if("string"==typeof e)return e.toLowerCase().replace(/\s/g,"");if("object"!=typeof e)return"";var t="";for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];null!=i&&(t+=(i+"").toLowerCase().replace(/\s/g,""))}return t}function h(e){!function o(e){if(!e)return;var t=e.serviceType||e.conformsTo;if(!t)return;if(0<=p.indexOf(t.uri)){var r=e.href||e.accessURL,i=r.match(/(Map|Feature|Image)(Server\/\d+)/i);i&&2<i.length&&(r=r.replace(i[2],"Server/"),e.href&&(e.href=r),e.accessURL&&(e.accessURL=r))}}(e);var t=e.accessURL||e.href;if(!t||!t.length)return null;var r=(t=(t=(t=(t+"").trim().toLowerCase()).replace(/http(s)?:\/\//,"")).replace(/&?request=[A-Za-z]+/i,"").replace(/&?service=(WMS|WFS|WCS|CSW)/i,"").replace(/&?version=[0-9\.]*/i,"").replace(/&?layers=[A-Za-z0-9\-\:_,]*/i,"").replace(/&?srs=[A-Za-z0-9\:]*/i,"").replace(/&?crs=[A-Za-z0-9\:]*/i,"").replace(/&?format=[A-Za-z\/]*/i,"").replace(/&?bbox=[0-9,\.]*/i,""))[t.length-1];return"/"!==r&&"?"!==r||(t=t.substring(0,t.length-1)),t}var f={factories:{},register:function(e,t){this.factories[e]=t},create:function(e,t){if(!e||!e.type)return null;if("function"!=typeof t)throw new Error("Must specify a MD5 function when using URIFactory");var r=this.factories[e.type];return r?r(e,t):null}};f.register(a.DATASET,function(e,t){var r=(e.publisher||e.publishers||[]).map(function(e){return e.label||""}).join(""),i=l({title:e.title,pub:r});return c+"/id/dataset/"+t(i)}),f.register(a.SERVICE,function(e,t){var r=l(h(e));return c+"/id/service/"+t(r)}),f.register(a.LAYER,function(e,t){var r="",i=e.servicedBy||e.services;i&&i.length&&(r=i[0].accessURL||i[0].href||"");var o=e.accessURL||e.href||"",s=r+(e.layerName||"")+o;if(!s.length)return null;var n=l(s);return c+"/id/layer/"+t(n)}),f.register(a.MAP,function(e,t){var r=e.createdBy||e._createdBy||"",i=(e.identifiers||e.identifier||[]).join(""),o=l({title:e.title,author:r,identifiers:i});return c+"/id/map/"+t(o)}),f.register(a.GALLERY,function(e,t){var r=e.createdBy||e._createdBy||"",i=l({title:e.title,author:r});return c+"/id/gallery/"+t(i)}),f.register(a.COMMUNITY,function(e,t){var r=l({title:e.title});return c+"/id/community/"+t(r)}),f.register(a.ORGANIZATION,function(e,t){var r=l(e.label||e.name);return c+"/id/organization/"+t(r)}),f.register(a.PERSON,function(e,t){var r=l(e.name);return c+"/id/person/"+t(r)}),f.register(a.CONTACT,function(e,t){var r={};return(e.email||e.hasEmail)&&(r.email=e.email||e.hasEmail),e.tel&&(r.tel=e.tel),(e.orgName||e["organization-name"])&&(r.orgName=e.orgName||e["organization-name"]),e.positionTitle&&(r.positionTitle=e.positionTitle),r=l(r),c+"/id/contact/"+t(r)}),f.register(a.CONCEPT,function(e,t){var r=e.inScheme||e.scheme,i=l(r?r.label||r.prefLabel:""),o=l(e.label||e.prefLabel);return c+"/id/metadata-codelists/"+t(i)+"/"+t(o)}),f.register(a.CONCEPT_SCHEME,function(e,t){var r=l(e.label||e.prefLabel);return c+"/id/metadata-codelists/"+t(r)}),f.register(a.APPLICATION,function(e,t){if(!e||!e.title)return null;var r=e.createdBy||e._createdBy||"",i=l({title:e.title,author:r});return c+"/id/application/"+t(i)}),f.register(a.TOPIC,function(e,t){if(!e||!e.title)return null;var r=e.createdBy||e._createdBy||"",i=l({title:e.title,author:r});return c+"/id/topic/"+t(i)}),f.register(a.WEBSITE,function(e,t){if(!e||!e.landingPage)return null;var r=l(e.landingPage);return c+"/id/website/"+t(r)});var E={ALTERNATE_TITLE:"alternateTitles",BEGINS:"startDate.min",CLASSIFIERS:"classifiers",CREATED:"created",CREATED_BEFORE:"created.max",CREATED_AFTER:"created.min",CREATED_BY:"createdBy",CREATOR:"creator.id",CONTRIBUTED_BY:"contributedBy",ENDS:"endDate.max",EXTENT:"extent",IDENTIFIERS:"identifiers",KEYWORDS:"keywords",LAST_MODIFIED_BY:"lastModifiedBy",MODIFIED:"modified",MODIFIED_BEFORE:"modified.max",MODIFIED_AFTER:"modified.min",PUBLISHERS_ID:"publisher.id",PUBLISHERS_LABEL:"publisher.label",PUBLISHERS_URI:"publisher.uri",CONTACTS_ID:"contacts.id",CONTACTS_LABEL:"contacts.label",CONTACTS_URI:"contacts.uri",QUERY:"q",SCHEMES_ID:"scheme.id",SCHEMES_LABEL:"scheme.label",SCHEMES_URI:"scheme.uri",SIMILAR_TO:"similarTo",STATUS:"status",SERVICE_TYPES:"serviceType.id",THEMES_ID:"theme.id",THEMES_LABEL:"theme.label",THEMES_URI:"theme.uri",TOPICS_ID:"topic.id",TOPICS_LABEL:"topic.label",TOPICS_URI:"topic.uri",TYPES:"type",URI:"uri",USED_BY_ID:"usedBy.id",USED_BY_LABEL:"usedBy.label",USED_BY_URI:"usedBy.uri",VISIBILITY:"visibility",RESOURCE_TYPE:"resourceType",DATASET:"dataset",LANDING_PAGE:"landingPage",PURPOSE:"purpose",RELIABILITY:"reliability",RELIABILITY_MIN:"reliability.min",RELIABILITY_MAX:"reliability.max",ONLINE:"online",COMPLIANT:"compliant",SPEED:"speed",SPEED_MIN:"speed.min",SPEED_MAX:"speed.max",LIKES:"likes",LIKES_MIN:"likes.min",LIKES_MAX:"likes.max",VIEWS:"views",VIEWS_MIN:"views.min",VIEWS_MAX:"views.max",HREF:"href",LAYER_TYPE:"layerType",LAYER_NAME:"layerName",PARENT_LAYER:"parentLayer",SUB_LAYER:"subLayer",SERVICE:"service",MAP_LAYER:"mapLayer",GALLERY_ITEM:"galleryItem",FACETS:"includeFacets",FIELDS:"fields",SORT:"sort",PAGE:"page",PAGE_SIZE:"size",FOR_TYPES:"for"},y=[{value:"label,asc",label:"Name (A-Z)"},{value:"label,desc",label:"Name (Z-A)"},{value:"type,asc",label:"Type (A-Z)"},{value:"type,desc",label:"Type (Z-A)"},{value:"modified,desc",label:"Most recently modified"},{value:"modified,asc",label:"Least recently modified"},{value:"_score,desc",label:"Relevance"}],g=(m.prototype.getQuery=function(){var e={};for(var t in this.query){var r=this.query[t];null!==r&&"undefined"!=typeof r.push&&(r=r.join(",")),e[t]=r}return e},m.prototype.parameter=function(e,t){return this.setParameter(e,t),this},m.prototype.setParameter=function(e,t){null===t||t===undefined?delete this.query[e]:this.query[e]=t},m.prototype.getParameter=function(e){return this.query[e]},m.prototype.applyParameters=function(e){for(var t in e)e.hasOwnProperty(t)&&this.setParameter(t,e[t])},m.prototype.q=function(e){return this.setQ(e),this},m.prototype.setQ=function(e){this.setParameter(E.QUERY,e)},m.prototype.getQ=function(){return this.getParameter(E.QUERY)},m.prototype.classifiers=function(e){return this.setClassifiers(e),this},m.prototype.setClassifiers=function(e){e&&("string"==typeof e&&(e=e=[e]),this.setParameter(E.TYPES,e))},m.prototype.getClassifiers=function(){return this.getParameter(E.TYPES)},m.prototype.types=function(e){return this.setTypes(e),this},m.prototype.setTypes=function(e){e&&("string"==typeof e&&(e=[e]),this.setParameter(E.FOR_TYPES,e))},m.prototype.getTypes=function(){return this.getParameter(E.FOR_TYPES)},m.prototype.page=function(e){return this.setPage(e),this},m.prototype.setPage=function(e){isNaN(e)||1*e<0||(this.query.page=1*e)},m.prototype.getPage=function(){return this.query.page},m.prototype.nextPage=function(){this.setPage(this.query.page+1)},m.prototype.previousPage=function(){this.setPage(this.query.page-1)},m.prototype.pageSize=function(e){return this.setPageSize(e),this},m.prototype.setPageSize=function(e){isNaN(e)||1*e<0||(this.query.size=1*e)},m.prototype.getPageSize=function(){return this.query.size},m.prototype.sort=function(e,t){return this.setSort(e,t),this},m.prototype.setSort=function(e,t){t=t||"desc",e&&e.indexOf(",")<0&&(e=e+","+t),this.query.sort=e},m.prototype.getSort=function(){return this.query.sort},m.prototype.getSortField=function(){return this.query.sort.split(",")[0]},m.prototype.getSortOrder=function(){return"asc"===this.query.sort.split(",")[1]},m.prototype.getSortOptions=function(){return y.slice(0)},m.prototype.clear=function(){this.query=this.defaultQuery},m);function m(){this.defaultQuery={page:0,size:10,sort:"modified,desc"},this.query={page:0,size:10,sort:"modified,desc"}}var d={PURPOSE:"purpose",FUNCTION:"function",TOPIC_PRIMARY:"primaryTopic",TOPIC_SECONDARY:"secondaryTopic",SUBJECT_PRIMARY:"primarySubject",SUBJECT_SECONDARY:"secondarySubject",COMMUNITY:"community",AUDIENCE:"audience",PLACE:"place",CATEGORY:"category"},v={ACCESS_RIGHTS:"rights",ALTERNATE_TITLES:"alternateTitles",ANNOTATIONS:"annotations",CLASSIFIERS:"classifiers",CONCEPT_SCHEME:"scheme",CONTACTS:"contacts",CREATED:"created",CREATED_BY:"createdBy",DATASETS:"datasets",DESCRIPTION:"description",DISTRIBUTIONS:"distributions",EXTENT:"extent",GALLERY_ITEMS:"items",HREF:"href",IDENTIFIERS:"identifiers",KEYWORDS:"keywords",LABEL:"label",LAST_MODIFIED_BY:"lastModifiedBy",LAYERS:"layers",LAYER_TYPE:"layerType",LAYER_NAME:"layerName",LEGEND:"legend",MODIFIED:"modified",PARENT_LAYER:"parentLayer",PUBLISHERS:"publishers",RESOURCE_TYPES:"resourceTypes",SERVICE_TYPE:"serviceType",SERVICES:"services",SPATIAL:"spatial",STATISTICS:"statistics",STATUS:"status",SUB_LAYERS:"subLayers",TEMPORAL:"temporal",THEMES:"themes",THUMBNAIL:"thumbnail",TOPICS:"topics",USED_BY:"usedBy",VISIBILITY:"visibility",LANDING_PAGE:"landingPage"},S=[v.CREATED,v.MODIFIED,v.CREATED_BY,v.PUBLISHERS,v.THEMES,v.DESCRIPTION],T={ALTERNATE_TITLES:"alternateTitles",CONCEPT_SCHEMES:"schemes",CREATED_BY:"createdBy",HREF:"href",IDENTIFIERS:"identifiers",LAYER_TYPE:"layerType",LAYER_NAME:"layerName",LIKES:"likes",ONLINE:"online",PUBLISHERS:"publishers",CONTACTS:"contacts",RELIABILITY:"reliability",SERVICE_TYPES:"serviceTypes",SPEED:"speed",STATUS:"status",THEMES:"themes",TOPICS:"topics",TYPES:"type",USED_BY:"usedBy",VIEWS:"views",VISIBILITY:"visibility"},P=[T.TYPES,T.PUBLISHERS,T.SERVICE_TYPES,T.CONCEPT_SCHEMES,T.VISIBILITY,T.CREATED_BY],I={};I[T.TYPES]=E.TYPES,I[T.THEMES]=E.THEMES_ID,I[T.TOPICS]=E.TOPICS_ID,I[T.PUBLISHERS]=E.PUBLISHERS_ID,I[T.CONTACTS]=E.CONTACTS_ID,I[T.CONCEPT_SCHEMES]=E.SCHEMES_ID,I[T.USED_BY]=E.USED_BY_ID;var R=[{value:"label,asc",label:"Name (A-Z)"},{value:"label,desc",label:"Name (Z-A)"},{value:"type,asc",label:"Type (A-Z)"},{value:"type,desc",label:"Type (Z-A)"},{value:"modified,desc",label:"Most recently modified"},{value:"modified,asc",label:"Least recently modified"},{value:"_score,desc",label:"Relevance"}],b=/^\-?\d+(\.\d*)?,\-?\d+(\.\d*)?,\-?\d+(\.\d*)?,\-?\d+(\.\d*)?$/;function O(e){var t=e;return null!==t&&"undefined"==typeof t.push&&(t=[t]),null===t||t.length||(t=null),t}var A=(C.prototype.getQuery=function(){var e={};for(var t in this.query){var r=this.query[t];null!==r&&"undefined"!=typeof r.push&&(r=r.join(",")),e[t]=r}return e},C.prototype.clone=function(){var e=new C,t=JSON.parse(JSON.stringify(this.query));return e.applyParameters(t),e},C.prototype.parameter=function(e,t){return this.setParameter(e,t),this},C.prototype.setParameter=function(e,t){null===t||t===undefined||"undefined"!=typeof t.push&&!t.length?delete this.query[e]:this.query[e]=t},C.prototype.getParameter=function(e){return this.query[e]},C.prototype.clearParameter=function(e){delete this.query[e]},C.prototype.applyParameters=function(e){for(var t in e)e.hasOwnProperty(t)&&this.setParameter(t,e[t])},C.prototype.setFacetParameter=function(e,t){var r=I[e];r||console.log("WARN : Query.applyFacetParameter() - unable to map facet to known parameter '"+e+"', using as direct parameter which may not operate as intended"),this.setParameter(r||e,t)},C.prototype.q=function(e){return this.setQ(e),this},C.prototype.setQ=function(e){this.setParameter(E.QUERY,e)},C.prototype.getQ=function(){return this.getParameter(E.QUERY)},C.prototype.keywords=function(e){return this.setKeywords(e),this},C.prototype.setKeywords=function(e){this.setParameter(E.KEYWORDS,O(e))},C.prototype.getKeywords=function(){return this.getParameter(E.KEYWORDS)},C.prototype.uri=function(e){return this.setUri(e),this},C.prototype.setUri=function(e){this.setParameter(E.URI,e)},C.prototype.getUri=function(){return this.getParameter(E.URI)},C.prototype.types=function(e){return this.setTypes(e),this},C.prototype.setTypes=function(e){this.setParameter(E.TYPES,O(e))},C.prototype.getTypes=function(){return this.getParameter(E.TYPES)},C.prototype.createdBy=function(e){return this.setCreatedBy(e),this},C.prototype.setCreatedBy=function(e){this.setParameter(E.CREATED_BY,e)},C.prototype.getCreatedBy=function(){return this.getParameter(E.CREATED_BY)},C.prototype.lastModifiedBy=function(e){return this.setLastModifiedBy(e),this},C.prototype.setLastModifiedBy=function(e){this.setParameter(E.LAST_MODIFIED_BY,e)},C.prototype.getLastModifiedBy=function(){return this.getParameter(E.LAST_MODIFIED_BY)},C.prototype.themes=function(e,t){return this.setThemes(e,t),this},C.prototype.setThemes=function(e,t){this.setParameter(E.THEMES_ID,null),this.setParameter(E.THEMES_LABEL,null),this.setParameter(E.THEMES_URI,null);var r=t||E.THEMES_ID;this.setParameter(r,O(e))},C.prototype.getThemes=function(){return this.getParameter(E.THEMES_ID)||this.getParameter(E.THEMES_LABEL)||this.getParameter(E.THEMES_URI)},C.prototype.topics=function(e,t){return this.setTopics(e,t),this},C.prototype.setTopics=function(e,t){this.setParameter(E.TOPICS_ID,null),this.setParameter(E.TOPICS_LABEL,null),this.setParameter(E.TOPICS_URI,null);var r=t||E.TOPICS_ID;this.setParameter(r,O(e))},C.prototype.getTopics=function(){return this.getParameter(E.TOPICS_ID)||this.getParameter(E.TOPICS_LABEL)||this.getParameter(E.TOPICS_URI)},C.prototype.publishers=function(e,t){return this.setPublishers(e,t),this},C.prototype.setPublishers=function(e,t){this.setParameter(E.PUBLISHERS_ID,null),this.setParameter(E.PUBLISHERS_LABEL,null),this.setParameter(E.PUBLISHERS_URI,null);var r=t||E.PUBLISHERS_ID;this.setParameter(r,O(e))},C.prototype.getPublishers=function(){return this.getParameter(E.PUBLISHERS_ID)||this.getParameter(E.PUBLISHERS_LABEL)||this.getParameter(E.PUBLISHERS_URI)},C.prototype.contacts=function(e,t){return this.setContacts(e,t),this},C.prototype.setContacts=function(e,t){this.setParameter(E.CONTACTS_ID,null),this.setParameter(E.CONTACTS_LABEL,null),this.setParameter(E.CONTACTS_URI,null);var r=t||E.CONTACTS_ID;this.setParameter(r,O(e))},C.prototype.getContacts=function(){return this.getParameter(E.CONTACTS_ID)||this.getParameter(E.CONTACTS_LABEL)||this.getParameter(E.CONTACTS_URI)},C.prototype.usedBy=function(e,t){return this.setUsedBy(e,t),this},C.prototype.setUsedBy=function(e,t){this.setParameter(E.USED_BY_ID,null),this.setParameter(E.USED_BY_LABEL,null),this.setParameter(E.USED_BY_URI,null);var r=t||E.USED_BY_ID;this.setParameter(r,O(e))},C.prototype.getUsedBy=function(){return this.getParameter(E.USED_BY_ID)||this.getParameter(E.USED_BY_LABEL)||this.getParameter(E.USED_BY_URI)},C.prototype.schemes=function(e,t){return this.setSchemes(e,t),this},C.prototype.setSchemes=function(e,t){this.setParameter(E.SCHEMES_ID,null),this.setParameter(E.SCHEMES_LABEL,null),this.setParameter(E.SCHEMES_URI,null);var r=t||E.SCHEMES_ID;this.setParameter(r,O(e))},C.prototype.getSchemes=function(){return this.getParameter(E.SCHEMES_ID)||this.getParameter(E.SCHEMES_LABEL)||this.getParameter(E.SCHEMES_URI)},C.prototype.serviceTypes=function(e){return this.setServiceTypes(e),this},C.prototype.setServiceTypes=function(e){this.setParameter(E.SERVICE_TYPES,O(e))},C.prototype.getServiceTypes=function(){return this.getParameter(E.SERVICE_TYPES)},C.prototype.visibility=function(e){return this.setVisibility(e),this},C.prototype.setVisibility=function(e){this.setParameter(E.VISIBILITY,e)},C.prototype.getVisibility=function(){return this.getParameter(E.VISIBILITY)},C.prototype.status=function(e){return this.setStatus(e),this},C.prototype.setStatus=function(e){this.setParameter(E.STATUS,e)},C.prototype.getStatus=function(){return this.getParameter(E.STATUS)},C.prototype.extent=function(e){return this.setExtent(e),this},C.prototype.setExtent=function(e){if(e)if("undefined"!=typeof e.toBboxString)e=e.toBboxString();else if("undefined"!=typeof e.push&&e.length&&"undefined"!=typeof e[0].push)e=e[0][1]+","+e[0][0]+","+e[1][1]+","+e[1][0];else{if("string"!=typeof e)throw new Error("Invalid argument: bbox must be one of Leaflet.Bounds, nested array, or bbox string");if(!b.test(e))throw new Error("Invalid argument: bbox string must be in form of 'minx,miny,maxx,maxy'")}this.setParameter(E.EXTENT,e)},C.prototype.getExtent=function(){return this.getParameter(E.EXTENT)},C.prototype.classifier=function(e,t){return this.setClassifier(e,t),this},C.prototype.setClassifier=function(e,t){var r=O(t);this.setParameter(E.CLASSIFIERS+"."+e,r)},C.prototype.getClassifier=function(e){return this.getParameter(E.CLASSIFIERS+"."+e)||[]},C.prototype.classifiers=function(e){return this.setClassifiers(e),this},C.prototype.setClassifiers=function(t){var r=this,i=Object.keys(d).map(function(e){return d[e]});t&&"object"==typeof t&&!Array.isArray(t)?Object.keys(t).forEach(function(e){~i.indexOf(e)&&r.setClassifier(e,t[e])}):i.forEach(function(e){r.clearParameter(E.CLASSIFIERS+"."+e)})},C.prototype.getClassifiers=function(){var t=this,r={};return Object.keys(d).map(function(e){return d[e]}).forEach(function(e){r[e]=t.getClassifier(e)}),r},C.prototype.modified=function(e,t){return this.setModified(e,t),this},C.prototype.setModified=function(e,t){if(!e)return this.setParameter(E.MODIFIED_BEFORE,null),void this.setParameter(E.MODIFIED_AFTER,null);e instanceof Date||(e=new Date(e));var r=t&&(!0===t||"true"===t),i=r?E.MODIFIED_BEFORE:E.MODIFIED_AFTER,o=r?E.MODIFIED_AFTER:E.MODIFIED_BEFORE,s=e&&e.getTime?e.getTime():e;this.setParameter(o,null),this.setParameter(i,s)},C.prototype.getModified=function(){var e=this.getParameter(E.MODIFIED_BEFORE)||this.getParameter(E.MODIFIED_AFTER);return e&&"number"==typeof e&&(e=new Date(e)),e},C.prototype.created=function(e,t){return this.setCreated(e,t),this},C.prototype.setCreated=function(e,t){if(!e)return this.setParameter(E.CREATED_BEFORE,null),void this.setParameter(E.CREATED_AFTER,null);e instanceof Date||(e=new Date(e));var r=t&&(!0===t||"true"===t),i=r?E.CREATED_BEFORE:E.CREATED_AFTER,o=r?E.CREATED_AFTER:E.CREATED_BEFORE,s=e&&e.getTime?e.getTime():e;this.setParameter(o,null),this.setParameter(i,s)},C.prototype.getCreated=function(){var e=this.getParameter(E.CREATED_BEFORE)||this.getParameter(E.CREATED_AFTER);return e&&"number"==typeof e&&(e=new Date(e)),e},C.prototype.begins=function(e){return this.setBeginDate(e),this},C.prototype.setBeginDate=function(e){e&&e instanceof Date&&(e=e.getTime()),this.setParameter(E.BEGINS,e)},C.prototype.getBeginDate=function(){var e=this.getParameter(E.BEGINS);return e&&(e=new Date(e)),e},C.prototype.ends=function(e){return this.setEndDate(e),this},C.prototype.setEndDate=function(e){e&&e instanceof Date&&(e=e.getTime()),this.setParameter(E.ENDS,e)},C.prototype.getEndDate=function(){var e=this.getParameter(E.ENDS);return e&&(e=new Date(e)),e},C.prototype.between=function(e,t){return this.setBetween(e,t),this},C.prototype.setBetween=function(e,t){this.begins(e),this.ends(t)},C.prototype.resourceTypes=function(e){return this.setResourceTypes(e),this},C.prototype.setResourceTypes=function(e){this.setParameter(E.RESOURCE_TYPE,O(e))},C.prototype.getResourceTypes=function(){return this.getParameter(E.RESOURCE_TYPE)},C.prototype.facets=function(e){return this.setFacets(e),this},C.prototype.setFacets=function(e){this.setParameter(E.FACETS,O(e))},C.prototype.getFacets=function(){return this.getParameter(E.FACETS)},C.prototype.addFacet=function(e){var t=this.getFacets()||[];t.push(e),this.setFacets(t)},C.prototype.removeFacet=function(e){var t=this.getFacets()||[],r=t.indexOf(e);0<=r&&(t.splice(r,1),this.setFacets(t))},C.prototype.fields=function(e){return this.setFields(e),this},C.prototype.setFields=function(e){this.setParameter(E.FIELDS,O(e))},C.prototype.getFields=function(){return this.getParameter(E.FIELDS)},C.prototype.addField=function(e){var t=this.getFields()||[];t.push(e),this.setFields(t)},C.prototype.removeField=function(e){var t=this.getFields()||[],r=t.indexOf(e);0<=r&&(t.splice(r,1),this.setFields(t))},C.prototype.page=function(e){return this.setPage(e),this},C.prototype.setPage=function(e){isNaN(e)||1*e<0||this.setParameter(E.PAGE,1*e)},C.prototype.getPage=function(){return this.getParameter(E.PAGE)},C.prototype.nextPage=function(){this.setPage(this.getPage()+1)},C.prototype.previousPage=function(){this.setPage(this.getPage()-1)},C.prototype.pageSize=function(e){return this.setPageSize(e),this},C.prototype.setPageSize=function(e){isNaN(e)||1*e<0||this.setParameter(E.PAGE_SIZE,1*e)},C.prototype.getPageSize=function(){return this.getParameter(E.PAGE_SIZE)},C.prototype.sort=function(e,t){return this.setSort(e,t),this},C.prototype.setSort=function(e,t){t=t||"desc",e&&e.indexOf(",")<0&&(e=e+","+t),this.setParameter(E.SORT,e)},C.prototype.getSort=function(){return this.getParameter(E.SORT)},C.prototype.getSortField=function(){var e=this.getSort();return e&&e.length?e.split(",")[0]:null},C.prototype.getSortOrder=function(){var e=this.getSort();return e&&e.length?e.split(",")[1]:null},C.prototype.getSortOptions=function(){return R.slice(0)},C.prototype.clear=function(){this.query=JSON.parse(JSON.stringify(this.defaultQuery))},C);function C(e){this.defaultQuery={},this.defaultQuery[E.PAGE.toString()]=0,this.defaultQuery[E.PAGE_SIZE.toString()]=10,this.defaultQuery[E.SORT.toString()]="modified,desc",this.defaultQuery[E.FIELDS.toString()]=S.slice(0),this.defaultQuery[E.FACETS.toString()]=P.slice(0),e&&e.defaults&&(Object.assign(this.defaultQuery,e.defaults),delete e.defaults),this.query=JSON.parse(JSON.stringify(this.defaultQuery)),e&&this.applyParameters(e)}var _={ualUrl:"https://ual.geoplatform.gov",configure:function(e){Object.assign(this,e)}},w=(D.prototype.setTimeout=function(e){this.timeout=e},D.prototype.setAuthToken=function(e){e&&"string"==typeof e?this.token=function(){return e}:e&&"function"==typeof e&&(this.token=e)},D.prototype.createRequestOpts=function(e){throw new Error("Must implement 'createRequestOpts' in a sub-class")},D.prototype.execute=function(e){return Promise.reject(new Error("Must overrdie 'execute' in a sub-class"))},D);function D(e){this.timeout=5e3,e=e||{},this.setTimeout(e.timeout||3e4),this.setAuthToken(e.token)}var L,U=(r(N,L=w),N.prototype.createRequestOpts=function(e){var t={method:e.method,url:e.url,timeout:e.timeout||this.timeout};if(!0===e.json&&(t.responseType="json"),e.params&&(t.params=e.params),e.data&&(t.data=e.data,t.contentType="application/json"),this.token){var r=this.token();r&&(t.headers=t.headers||{},t.headers.Authorization="Bearer "+r,t.withCredentials=!0)}if(e.options)for(var i in e.options)e.options.hasOwnProperty(i)&&(t[i]=e.options[i]);return t},N.prototype.execute=function(e){if(void 0===t)throw new Error("Axios not found, check that you have included it as a dependency of the application or use a different HttpClient implementation");return t(e).then(function(e){return e.data})["catch"](function(e){var t=new s(e.message);throw e.response&&(t=new s(e.response.data)),t})},N);function N(e){return L.call(this,e)||this}var M=(B.prototype.setUrl=function(e){this.apiBase=e,this.baseUrl=e+"/api/items"},B.prototype.setTimeout=function(e){this._timeout=e},B.prototype.timeout=function(e){return this.setTimeout(e),this},B.prototype.getClient=function(){return this.client},B.prototype.setLogger=function(e){this.logger=e},B.prototype.logError=function(e){this.logger&&this.logger.error&&this.logger.error(e)},B.prototype.logDebug=function(e){this.logger&&this.logger.debug&&this.logger.debug(e)},B.prototype.get=function(r,i){var o=this,e=this.baseUrl+"/"+r;return i&&i.version&&(e+="/versions/"+i.version),Promise.resolve(e).then(function(e){var t=o.buildRequest({method:"GET",url:e,options:i});return o.execute(t)})["catch"](function(e){var t=new Error("Error fetching item "+r+": "+e.message);throw Object.assign(t,e),o.logError("ItemService.get() - "+t.message),t})},B.prototype.save=function(e,s){var n=this;return Promise.resolve(e).then(function(r){var i="POST",o=n.baseUrl;if(r.id)i="PUT",o+="/"+r.id;else if(!r.uri)return n.getUri(r,s).then(function(e){r.uri=e;var t=n.buildRequest({method:i,url:o,data:r,options:s});return n.execute(t)});var e=n.buildRequest({method:i,url:o,data:r,options:s});return n.execute(e)})["catch"](function(e){var t=new Error("Error saving item: "+e.message);throw Object.assign(t,e),n.logError("ItemService.save() - "+t.message),t})},B.prototype.remove=function(r,i){var o=this;return Promise.resolve(this.baseUrl+"/"+r).then(function(e){var t=o.buildRequest({method:"DELETE",url:e,options:i});return o.execute(t)}).then(function(){return!0})["catch"](function(e){var t=new Error("Error deleting item "+r+": "+e.message);throw Object.assign(t,e),o.logError("ItemService.remove() - "+t.message),t})},B.prototype.patch=function(r,i,o){var s=this;return Promise.resolve(this.baseUrl+"/"+r).then(function(e){var t=s.buildRequest({method:"PATCH",url:e,data:i,options:o});return s.execute(t)})["catch"](function(e){var t=new Error("Error patching item "+r+": "+e.message);throw Object.assign(t,e),s.logError("ItemService.patch() - "+t.message),t})},B.prototype.clone=function(r,i,o){var s=this;return Promise.resolve(this.baseUrl+"/"+r+"/clone").then(function(e){var t=s.buildRequest({method:"POST",url:e,data:i,options:o});return s.execute(t)})["catch"](function(e){var t=new Error("Error cloning item "+r+": "+e.message);throw Object.assign(t,e),s.logError("ItemService.clone() - "+t.message),t})},B.prototype.search=function(e,i){var o=this;return Promise.resolve(e).then(function(e){var t={};t=e&&"function"==typeof e.getQuery?e.getQuery():"object"==typeof e?e:{};var r=o.buildRequest({method:"GET",url:o.baseUrl,params:t,options:i});return o.execute(r)})["catch"](function(e){var t=new Error("Error searching items: "+e.message);throw Object.assign(t,e),o.logError("ItemService.search() - "+t.message),t})},B.prototype["import"]=function(i,o,s){var n=this;return Promise.resolve(!0).then(function(){if(null===i||i===undefined)throw new Error("Must provide a valid URL or File");var e="string"!=typeof i,t={method:"POST",url:n.apiBase+"/api/import",processData:!0,formData:!0,options:s};e?(t.file=i,t.data={format:o}):(t.formData=!1,t.data={url:i,format:o}),s&&s.overwrite&&(t.data.overwrite=!!s.overwrite+"",delete s.overwrite);var r=n.buildRequest(t);return n.execute(r)})["catch"](function(e){var t=new Error("Error importing item: "+e.message);throw Object.assign(t,e),409!==e.status&&!~e.message.indexOf("Item already exists")||Object.assign(t,{status:409}),e.item&&Object.assign(t,{item:e.item}),n.logError("ItemService.import() - "+t.message),t})},B.prototype["export"]=function(r,i,o){var s=this;return Promise.resolve(!0).then(function(){var e=s.baseUrl+"/"+r+"/export",t=s.buildRequest({method:"GET",url:e,params:{format:i},json:!1,options:o});return s.execute(t)})["catch"](function(e){var t=e.message;(e.statusCode&&406===e.statusCode||"406"===e.statusCode)&&(t="Unsupported export format specified '"+i+"'");var r=new Error("Error exporting item: "+t);throw Object.assign(r,e),s.logError("ItemService.export() - "+r.message),r})},B.prototype.getUri=function(e,i){var o=this;return Promise.resolve(e).then(function(e){if(!e||!e.type)throw new Error("Must provide an object with a type property");var t=o.apiBase+"/api/utils/uri";(i=i||{}).responseType="text";var r=o.buildRequest({method:"POST",url:t,data:e,options:i});return o.execute(r)})["catch"](function(e){var t=new Error("Error getting URI for item: "+e.message);throw Object.assign(t,e),o.logError("ItemService.getUri() - "+t.message),t})},B.prototype.getMultiple=function(e,i){var o=this;return Promise.resolve(e).then(function(e){var t=o.apiBase+"/api/fetch",r=o.buildRequest({method:"POST",url:t,data:e,options:i});return o.execute(r)})["catch"](function(e){var t=new Error("Error fetching items: "+e.message);throw Object.assign(t,e),o.logError("ItemService.getMultiple() - "+t.message),t})},B.prototype.exists=function(e,i){var o=this;return Promise.resolve(e).then(function(e){var t=o.apiBase+"/api/utils/exists",r=o.buildRequest({method:"POST",url:t,data:e,options:i});return o.execute(r)})["catch"](function(e){var t=new Error("Error resolving items: "+e.message);throw Object.assign(t,e),o.logError("ItemService.exists() - "+t.message),t})},B.prototype.like=function(r,i){var o=this;return Promise.resolve(r.id).then(function(e){var t=o.apiBase+"/api/items/"+e+"/likes",r=o.buildRequest({method:"PUT",url:t,options:i});return o.execute(r)})["catch"](function(e){var t=new Error("Error liking item "+r.id+": "+e.message);throw Object.assign(t,e),o.logError("ItemService.like() - "+t.message),t})},B.prototype.view=function(r,i){var o=this;return Promise.resolve(r.id).then(function(e){var t=o.apiBase+"/api/items/"+e+"/views",r=o.buildRequest({method:"PUT",url:t,options:i});return o.execute(r)})["catch"](function(e){var t=new Error("Error incrementing views for item "+r.id+": "+e.message);throw Object.assign(t,e),o.logError("ItemService.like() - "+t.message),t})},B.prototype.associations=function(r,i,o){var s=this;return Promise.resolve(r).then(function(e){var t=s.baseUrl+"/"+e+"/associations",r=s.buildRequest({method:"GET",url:t,params:i||{},options:o});return s.execute(r)})["catch"](function(e){var t=new Error("Error fetching associations for item "+r+": "+e.message);throw Object.assign(t,e),s.logError("ItemService.associations() - "+t.message),t})},B.prototype.versions=function(r,i,o){var s=this;return Promise.resolve(r).then(function(e){var t=s.baseUrl+"/"+e+"/versions",r=s.buildRequest({method:"GET",url:t,params:i,options:o});return s.execute(r)})["catch"](function(e){var t=new Error("Error fetching versions for item "+r+": "+e.message);throw Object.assign(t,e),s.logError("ItemService.versions() - "+t.message),t})},B.prototype.buildRequest=function(e){if(this.httpMethods.indexOf(e.method)<0)throw new Error("Unsupported HTTP method "+e.method);if(!e.url)throw new Error("Must specify a URL for HTTP requests");return e.timeout=this._timeout||3e4,this.createRequestOpts(e)},B.prototype.createRequestOpts=function(e){var t=this.client.createRequestOpts(e);return this.logDebug("ItemService.createRequestOpts() - "+JSON.stringify(t)),t},B.prototype.execute=function(e){return this.client.execute(e)["catch"](function(e){return null==e&&(e=new Error("ItemService.execute() - Request failed but didn't return an error. This is most likely because the request timed out")),Promise.reject(e)})},B);function B(e,t){this._timeout=3e4,this.httpMethods=["GET","POST","PUT","DELETE","PATCH"],this.setUrl(e),this.client=t}var q,x=(r(Y,q=M),Y.prototype.setUrl=function(e){q.prototype.setUrl.call(this,e),this.baseUrl=e+"/api/datasets"},Y);function Y(e,t){return q.call(this,e,t)||this}var F,G=(r(j,F=M),j.prototype.setUrl=function(e){F.prototype.setUrl.call(this,e),this.baseUrl=e+"/api/maps"},j);function j(e,t){return F.call(this,e,t)||this}var H,Q=(r(k,H=M),k.prototype.setUrl=function(e){H.prototype.setUrl.call(this,e),this.baseUrl=e+"/api/layers"},k.prototype.style=function(e,i){var o=this;return Promise.resolve(e).then(function(e){var t=o.baseUrl+"/"+e+"/style",r=o.buildRequest({method:"GET",url:t,options:i});return o.execute(r)})["catch"](function(e){var t=new Error("Error fetching style: "+e.message);throw Object.assign(t,e),o.logError("LayerService.style() - "+t.message),t})},k.prototype.describe=function(s,e,n){var a=this;return Promise.resolve(e).then(function(t){if(!t)throw new Error("Must provide describe parameters to use");var e=["bbox","height","width","x","y"].find(function(e){return!t[e]});if(e)throw new Error("Must specify "+e+" in describe req");var r={srs:"EPSG:4326",bbox:t.bbox,height:t.height,width:t.width,info_format:"text/xml",x:t.x,y:t.y,i:t.x,j:t.y},i=a.baseUrl+"/"+s+"/describe",o=a.buildRequest({method:"GET",url:i,params:r,options:n});return a.execute(o)})["catch"](function(e){var t=new Error("Error describing layer feature: "+e.message);throw Object.assign(t,e),a.logError("LayerService.describe() - "+t.message),t})},k.prototype.validate=function(i,e,o){var s=this;return Promise.resolve(e).then(function(e){if(!e)throw new Error("Must provide parameters to use in layer validation");var t=s.baseUrl+"/"+i+"/validate",r=s.buildRequest({method:"GET",url:t,params:e,options:o});return s.execute(r)})["catch"](function(e){var t=new Error("Error validating layer request: "+e.message);throw Object.assign(t,e),s.logError("LayerService.describe() - "+t.message),t})},k);function k(e,t){return H.call(this,e,t)||this}var V,z=(r(W,V=M),W.prototype.setUrl=function(e){V.prototype.setUrl.call(this,e),this.baseUrl=e+"/api/services"},W.prototype.about=function(e,r){var i=this;return Promise.resolve(e).then(function(e){if(!e)throw new Error("Must provide service to get metadata about");var t=i.buildRequest({method:"POST",url:i.baseUrl+"/about",data:e,options:r});return i.execute(t)})["catch"](function(e){var t=new Error("Error describing service: "+e.message);throw Object.assign(t,e),i.logError("ServiceService.about() - "+t.message),t})},W.prototype.types=function(i){var o=this,e=(new A).types(a.STANDARD).resourceTypes("ServiceType").pageSize(50).getQuery();return Promise.resolve(e).then(function(e){var t=o.apiBase+"/api/items",r=o.buildRequest({method:"GET",url:t,params:e,options:i});return o.execute(r)}).then(function(e){return e.results})["catch"](function(e){var t=new Error("Error fetching service types: "+e.message);throw Object.assign(t,e),o.logError("ServiceService.types() - "+t.message),t})},W.prototype["import"]=function(e,i){var o=this;return Promise.resolve(e).then(function(e){var t=o.baseUrl+"/import",r=o.buildRequest({method:"POST",url:t,data:e,options:i});return o.execute(r)})["catch"](function(e){var t=new Error("Error importing service: "+e.message);throw Object.assign(t,e),o.logError("ServiceService.import() - "+t.message),t})},W.prototype.harvest=function(e,i){var o=this;return Promise.resolve(e).then(function(e){var t=o.baseUrl+"/"+e+"/harvest",r=o.buildRequest({method:"GET",url:t,options:i});return o.execute(r)})["catch"](function(e){var t=new Error("Error harvesting layers from service: "+e.message);throw Object.assign(t,e),o.logError("ServiceService.harvest() - "+t.message),t})},W.prototype.liveTest=function(e,i){var o=this;return Promise.resolve(e).then(function(e){var t=o.baseUrl+"/"+e+"/test",r=o.buildRequest({method:"GET",url:t,options:i});return o.execute(r)})["catch"](function(e){var t=new Error("Error testing service: "+e.message);throw Object.assign(t,e),o.logError("ServiceService.liveTest() - "+t.message),t})},W.prototype.statistics=function(e,i){var o=this;return Promise.resolve(e).then(function(e){var t=o.baseUrl+"/"+e+"/statistics",r=o.buildRequest({method:"GET",url:t,options:i});return o.execute(r)})["catch"](function(e){var t=new Error("Error getting service statistics: "+e.message);throw Object.assign(t,e),o.logError("ServiceService.statistics() - "+t.message),t})},W);function W(e,t){return V.call(this,e,t)||this}var K,Z=(r(J,K=M),J.prototype.setUrl=function(e){K.prototype.setUrl.call(this,e),this.baseUrl=e+"/api/galleries"},J.prototype.addItem=function(r,i,o){var s=this;return Promise.resolve(!0).then(function(){var e=s.baseUrl+"/"+r+"/items",t=s.buildRequest({method:"POST",url:e,data:i,options:o});return s.execute(t)})["catch"](function(e){var t=new Error("Error adding item: "+e.message);throw Object.assign(t,e),s.logError("GalleryService.addItem() - "+t.message),t})},J.prototype.removeItem=function(e,t,r){var i=this;return Promise.resolve(this.baseUrl+"/"+e+"/items/"+t).then(function(e){var t=i.buildRequest({method:"DELETE",url:e,options:r});return i.execute(t)}).then(function(){return!0})["catch"](function(e){var t=new Error("Error adding item: "+e.message);throw Object.assign(t,e),i.logError("GalleryService.addItem() - "+t.message),t})},J);function J(e,t){return K.call(this,e,t)||this}var X=($.prototype.setUrl=function(e){this.baseUrl=e},$.prototype.setLogger=function(e){this.logger=e},$.prototype.logError=function(e){this.logger&&this.logger.error&&this.logger.error(e)},$.prototype.logDebug=function(e){this.logger&&this.logger.debug&&this.logger.debug(e)},$.prototype.capabilities=function(e,r,i){var o=this,t=this.baseUrl+"/api/capabilities";return e&&(t+="/"+e),Promise.resolve(t).then(function(e){var t=o.buildRequest({method:"GET",url:e,params:r||{},options:i});return o.execute(t)})["catch"](function(e){var t=new Error("Error getting capabilities: "+e.message);throw Object.assign(t,e),o.logError("UtilsService.capabilities() - "+t.message),t})},$.prototype.parseFile=function(r,i,o){var s=this,e=this.baseUrl+"/api/utils/parse";return Promise.resolve(e).then(function(e){var t=s.buildRequest({method:"POST",url:e,data:{format:i},file:r,formData:!0,options:o});return s.execute(t)}).then(function(e){return e})["catch"](function(e){var t=new Error("Error parsing file: "+e.message);throw Object.assign(t,e),s.logError("UtilsService.parseFile() - "+t.message),t})},$.prototype.locate=function(r,i){var o=this,e=this.baseUrl+"/api/utils/gazetteer";return Promise.resolve(e).then(function(e){var t=o.buildRequest({method:"GET",url:e,params:{location:r},options:i});return o.execute(t)}).then(function(e){return e})["catch"](function(e){var t=new Error("Error resolving location: "+e.message);throw Object.assign(t,e),o.logError("UtilsService.locate() - "+t.message),t})},$.prototype.buildRequest=function(e){if(this.httpMethods.indexOf(e.method)<0)throw new Error("Unsupported HTTP method "+e.method);if(!e.url)throw new Error("Must specify a URL for HTTP requests");return e.timeout=this.timeout||_.timeout||3e4,this.createRequestOpts(e)},$.prototype.createRequestOpts=function(e){return this.client.createRequestOpts(e)},$.prototype.execute=function(e){return this.client.execute(e)["catch"](function(e){return null==e&&(e=new Error("UtilsService.execute() - Request failed but didn't return an error. This is most likely because the request timed out")),Promise.reject(e)})},$);function $(e,t){this.timeout=3e4,this.httpMethods=["GET","POST","PUT","DELETE","PATCH"],this.client=t,this.baseUrl=e,this.timeout=_.timeout||3e4}var ee=(te.prototype.getQuery=function(){var e={};for(var t in this._query){var r=this._query[t];null!==r&&"undefined"!=typeof r.push&&(r=r.join(",")),e[t]=r}return e},te.prototype.q=function(e){return this.setQ(e),this},te.prototype.setQ=function(e){this._query.q=e},te.prototype.getQ=function(){return this._query.q},te.prototype.types=function(e){return this.setTypes(e),this},te.prototype.setTypes=function(e){var t;t=e&&Array.isArray(e)?e.join(","):e,this._query.types=t},te.prototype.getTypes=function(){return this._query.types},te.prototype.groups=function(e){return this.setGroups(e),this},te.prototype.setGroups=function(e){var t;t=e&&Array.isArray(e)?e.join(","):e,this._query.groups=t},te.prototype.getGroups=function(){return this._query.groups},te.prototype.orgs=function(e){return this.setOrgs(e),this},te.prototype.setOrgs=function(e){var t;t=e&&Array.isArray(e)?e.join(","):e,this._query.orgs=t},te.prototype.getOrgs=function(){return this._query.orgs},te.prototype.extent=function(e){return this.setExtent(e),this},te.prototype.setExtent=function(e){this._query.bbox=e},te.prototype.getExtent=function(){return this._query.bbox},te.prototype.sort=function(e,t){return this.setSort(e,t),this},te.prototype.setSort=function(e,t){t=t||"desc",e&&e.indexOf(",")<0&&(e=e+","+t),this._query.sort=e},te.prototype.getSort=function(){return this._query.sort},te.prototype.getSortField=function(){return this._query.sort.split(",")[0]},te.prototype.getSortOrder=function(){return"asc"===this._query.sort.split(",")[1]},te.prototype.page=function(e){return this.setPage(e),this},te.prototype.setPage=function(e){isNaN(e)||1*e<0||(this._query.page=1*e)},te.prototype.getPage=function(){return this._query.page},te.prototype.nextPage=function(){this.setPage(this._query.page+1)},te.prototype.previousPage=function(){this.setPage(this._query.page-1)},te.prototype.pageSize=function(e){return this.setPageSize(e),this},te.prototype.setPageSize=function(e){isNaN(e)||1*e<0||(this._query.size=1*e)},te.prototype.getPageSize=function(){return this._query.size},te);function te(){this._query={page:0,size:10}}var re=(ie.prototype.setUrl=function(e){this.baseUrl=e+"/api/agol"},ie.prototype.getOrg=function(r,i){var o=this;return Promise.resolve(r).then(function(e){var t=o.buildRequest({method:"GET",url:o.baseUrl+"/orgs/"+e,options:i});return o.execute(t)})["catch"](function(e){var t=new Error("AgolService.getOrg() - Error fetching org "+r+": "+e.message);throw Object.assign(t,e),t})},ie.prototype.searchOrgs=function(e,i){var o=this;return Promise.resolve(e).then(function(e){var t=e.getQuery(),r=o.buildRequest({method:"GET",url:o.baseUrl+"/orgs",params:t,options:i});return o.execute(r)})["catch"](function(e){var t=new Error("AgolService.searchOrgs() - Error searching orgs: "+e.message);throw Object.assign(t,e),t})},ie.prototype.getGroup=function(r,i){var o=this;return Promise.resolve(r).then(function(e){var t=o.buildRequest({method:"GET",url:o.baseUrl+"/groups/"+e,options:i});return o.execute(t)})["catch"](function(e){var t=new Error("AgolService.getGroup() - Error fetching group "+r+": "+e.message);throw Object.assign(t,e),t})},ie.prototype.searchGroups=function(e,i){var o=this;return Promise.resolve(e).then(function(e){var t=e.getQuery(),r=o.buildRequest({method:"GET",url:o.baseUrl+"/groups",params:t,options:i});return o.execute(r)})["catch"](function(e){var t=new Error("AgolService.searchGroups() - Error searching groups: "+e.message);throw Object.assign(t,e),t})},ie.prototype.getItem=function(r,i){var o=this;return Promise.resolve(r).then(function(e){var t=o.buildRequest({method:"GET",url:o.baseUrl+"/items/"+e,options:i});return o.execute(t)})["catch"](function(e){var t=new Error("AgolService.getItem() - Error fetching item "+r+": "+e.message);throw Object.assign(t,e),t})},ie.prototype.searchItems=function(e,i){var o=this;return Promise.resolve(e).then(function(e){var t=e.getQuery(),r=o.buildRequest({method:"GET",url:o.baseUrl+"/items",params:t,options:i});return o.execute(r)})["catch"](function(e){var t=new Error("AgolService.searchItems() - Error searching items: "+e.message);throw Object.assign(t,e),t})},ie.prototype.getAgolId=function(e){if(!e)return null;if(!e.type)return null;if(a.ORGANIZATION===e.type||"Group"===e.type)return e.id;if(!e.identifiers||!e.identifiers.length)return null;var t=e.identifiers.filter(function(e){return~e.indexOf("agol:")});return t.length?t[0].replace("agol:",""):null},ie.prototype.buildRequest=function(e){if(this.httpMethods.indexOf(e.method)<0)throw new Error("Unsupported HTTP method "+e.method);if(!e.url)throw new Error("Must specify a URL for HTTP requests");return e.timeout=this.timeout||_.timeout||3e4,this.createRequestOpts(e)},ie.prototype.createRequestOpts=function(e){return this.client.createRequestOpts(e)},ie.prototype.execute=function(e){var i=this;return new Promise(function(t,r){i.client.execute(e).then(function(e){return t(e)})["catch"](function(e){null==e&&(e=new Error("AGOLService.execute() - Request failed but didn't return an error. This is most likely because the request timed out")),r(e)})})},ie);function ie(e,t){this.timeout=3e4,this.httpMethods=["GET","POST","PUT","DELETE","PATCH"],this.setUrl(e),this.client=t,this.timeout=3e4}var oe={UNKNOWN:"Unknown Category",DATASET:"Dataset",SERVICE:"Service",LAYER:"Layer",MAP:"Map",GALLERY:"Gallery",COMMUNITY:"Community",CONTACT:"Contact",ORGANIZATION:"Organization",CONCEPT:"Concept",CONCEPT_SCHEME:"Concept Scheme",APPLICATION:"Application",TOPIC:"Topic",WEBSITE:"WebSite",IMAGE_PRODUCT:"Image Product",RIGHTS_STATEMENT:"RightsStatement",KNOWLEDGE_GRAPH:"Knowledge Graph",USER:"User",COMMUNITY_POST:"Community Post",COMMUNITY_PAGE:"Community Page",APP_PAGE:"Application Page"},se={ACCESSED:"Accessed",DISPLAYED:"Displayed",VIEWED:"Viewed",CREATED:"Created",EDITED:"Edited",DELETED:"Deleted",CLONED:"Cloned",ADDED:"Added",REMOVED:"Removed",EXPORTED:"Exported",IMPORTED:"Imported"};var ne=(ae.prototype.getCategory=function(){return this.category},ae.prototype.getType=function(){return this.type},ae.prototype.getItem=function(){return this.item},ae.prototype.setItem=function(e){this.item=e?e.id||e:null},ae.prototype.getRelated=function(){return this.related},ae.prototype.setRelated=function(e){this.related=e?e.id||e:null},ae);function ae(e,t,r,i){if(this.item=null,this.related=null,!e||!t)throw new Error("TrackingService Event - Must specific an event category and event type when constructing events");this.category=e,this.type=t,this.setItem(r),this.setRelated(i)}var ue=(ce.prototype.logEvent=function(e,t,r,i){console.log("EVENT ("+e+") - "+t+" : "+r)},ce.prototype.logSearch=function(e,t){console.log("Query : "+JSON.stringify(e)+" found "+t+" matches")},ce);function ce(){}var pe=(le.prototype.setProvider=function(e){e&&(this.provider=e)},le.prototype.event=function(e){return this.logEvent(e),this},le.prototype.logEvent=function(e){var t=this;if(this.provider&&this.provider.logEvent&&e)if(Array.isArray(e))e.forEach(function(e){return t.logEvent(e)});else{var r=e;try{this.provider.logEvent(r.getCategory(),r.getType(),r.getItem(),r.getRelated())}catch(i){console.log("TrackingService.logEvent() - Error logging event ("+r.getCategory()+", "+r.getType()+", "+r.getItem()+") - "+i.message)}}},le.prototype.pageView=function(e,t){return this.logPageView(e,t),this},le.prototype.logPageView=function(e,t){this.logEvent(new ne(oe.APP_PAGE,se.VIEWED,e))},le.prototype.logSearch=function(e,t){this.provider.logSearch(e,t)},le);function le(e){this.provider=null,e&&"object"==typeof e&&Object.assign(this,e),this.provider||this.setProvider(new ue)}var he=(fe.prototype.setUrl=function(e){this.apiBase=e,this.baseUrl=e+"/api/recommender"},fe.prototype.suggest=function(e,t){var r=this.baseUrl+"/suggest";return this._search(r,e,t)["catch"](function(e){var t=new Error("KGService.suggest() - Error suggesting concepts: "+e.message);throw Object.assign(t,e),t})},fe.prototype.types=function(e,t){var r=this.baseUrl+"/types";return this._search(r,e,t)["catch"](function(e){var t=new Error("KGService.types() - Error searching types: "+e.message);throw Object.assign(t,e),t})},fe.prototype.sources=function(e,t){var r=this.baseUrl+"/sources";return this._search(r,e,t)["catch"](function(e){var t=new Error("KGService.sources() - Error searching sources: "+e.message);throw Object.assign(t,e),t})},fe.prototype._search=function(r,i,o){var s=this;return Promise.resolve(!0).then(function(){var e=i.getQuery(),t=s.buildRequest({method:"GET",url:r,params:e,options:o});return s.execute(t)})},fe.prototype.buildRequest=function(e){if(this.httpMethods.indexOf(e.method)<0)throw new Error("Unsupported HTTP method "+e.method);if(!e.url)throw new Error("Must specify a URL for HTTP requests");return e.timeout=this.timeout||_.timeout||3e4,this.createRequestOpts(e)},fe.prototype.createRequestOpts=function(e){return this.client.createRequestOpts(e)},fe.prototype.execute=function(e){return this.client.execute(e)["catch"](function(e){throw null==e&&(e=new Error("KGService.execute() - Request failed but didn't return an error. This is most likely because the request timed out")),e})},fe);function fe(e,t){this.timeout=3e4,this.httpMethods=["GET","POST","PUT","DELETE","PATCH"],this.setUrl(e),this.client=t}!function Ee(){!function e(){"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),i=1;i<arguments.length;i++){var o=arguments[i];if(null!=o)for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])}return r},writable:!0,configurable:!0})}()}(),e.ClientVersion="0.3.0",e.GPError=s,e.ItemTypes=a,e.ItemTypeLabels=u,e.QueryParameters=E,e.QueryFacets=T,e.Query=A,e.QueryFactory=function ye(){return new A},e.QueryFields=v,e.KGQuery=g,e.KGClassifiers=d,e.AgolQuery=ee,e.URIFactory=function ge(t){if("function"!=typeof t)throw new Error("Must specify a MD5 function when using URIFactory");return function(e){return f.create(e,t)}},e.Config=_,e.GPHttpClient=w,e.XHRHttpClient=U,e.ItemService=M,e.DatasetService=x,e.MapService=G,e.LayerService=Q,e.ServiceService=z,e.GalleryService=Z,e.UtilsService=X,e.KGService=he,e.ServiceFactory=function(e,t,r){var i="string"==typeof e?e:e&&e.type?e.type:null;if(!i)throw new Error("Must provide a type or object with a type specified");if(!t)throw new Error("Must provide a base url");if(!r)throw new Error("Must provide an http client to use to make requests");switch(i){case a.LAYER:return new Q(t,r);case a.SERVICE:return new z(t,r);case a.MAP:return new G(t,r);case a.GALLERY:return new Z(t,r);case a.DATASET:return new x(t,r);default:return new M(t,r)}},e.AgolService=re,e.TrackingEvent=ne,e.TrackingService=pe,e.TrackingCategories=oe,e.TrackingTypes=se,e.TrackingEventFactory=function me(r,e){var i=[];if(r&&e&&e.type)if(a.MAP===e.type){if(i.push(new ne(oe.MAP,r,e)),se.DISPLAYED===r&&(e.layers.forEach(function(e){if(e.layer){var t=me(r,e.layer).filter(function(e){return null!==e});t&&t.length&&(i=i.concat(t))}}),e.baseLayer)){var t=me(r,e.baseLayer).filter(function(e){return null!==e});t&&t.length&&(i=i.concat(t))}}else if(a.LAYER===e.type)i.push(new ne(oe.LAYER,r,e)),se.DISPLAYED===r&&e.services&&e.services.length&&i.push(new ne(oe.SERVICE,r,e.services[0]));else{var o=function s(e){var t=oe.UNKNOWN;if(e){var r=Object.keys(oe).map(function(e){return oe[e]});if(~r.indexOf(e))return e;if(~e.indexOf(":")){var i=e.split(":")[1];if(~r.indexOf(i))return i}}return t}(e.type);i.push(new ne(o,r,e))}return i},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=geoplatform-client.umd.min.js.map