{"version":3,"file":"geoplatform.client.js","sources":["../../src/http/client.js","../../src/http/jq.js","../../src/http/ng.js","../../src/http/node.js","../../src/shared/types.js","../../src/services/base.js","../../src/models/properties.js","../../src/models/base.js","../../src/models/item.js","../../src/models/dataset.js","../../src/models/service.js","../../src/models/layer.js","../../src/models/map.js","../../src/models/gallery.js","../../src/models/community.js","../../src/models/contact.js","../../src/models/organization.js","../../src/models/concept.js","../../src/models/concept-scheme.js","../../src/models/factory.js","../../src/services/item.js","../../src/services/dataset.js","../../src/services/map.js","../../src/services/layer.js","../../src/shared/parameters.js","../../src/shared/facets.js","../../src/shared/query.js","../../src/shared/query-factory.js","../../src/services/service.js","../../src/services/gallery.js","../../src/services/community.js","../../src/services/utils.js","../../src/shared/kg-query.js","../../src/services/kg.js","../../src/shared/classifiers.js","../../src/services/factory.js","../../src/shared/config.js"],"sourcesContent":["\n\nclass HttpClientBase {\n\n    /**\n     * @param {integer} options.timeout\n     * @param {string} options.token - the bearer token or a function to retrieve it\n     */\n    constructor(options) {\n        options = options || {};\n        this.setTimeout(options.timeout||10000);\n        this.setAuthToken(options.token);\n    }\n\n    setTimeout(timeout) {\n        this.timeout = timeout;\n    }\n\n    /**\n     * @param {string|Function} arg - specify the bearer token or a function to retrieve it\n     */\n    setAuthToken(arg) {\n        if(arg && typeof(arg) === 'string')\n            this.token = function() { return arg; };\n        else if(arg && typeof(arg) === 'function')\n            this.token = arg;\n        //else do nothing\n    }\n\n    createRequestOpts(options) {\n        throw new Error(\"HttpClientBase.createRequestOpts() - Function must be overridden by a sub-class\");\n    }\n\n\n    execute(opts) {\n        throw new Error(\"HttpClientBase.execute() - Function must be overridden by a sub-class\");\n    }\n\n}\n\nexport default HttpClientBase;\n","\nimport Q from 'q';\nimport HttpClientBase from './client';\n\nclass JQueryHttpClient extends HttpClientBase {\n\n    /**\n     * @param {integer} options.timeout\n     * @param {string} options.token - the bearer token or a function to retrieve it\n     */\n    constructor(options) {\n        super(options);\n    }\n\n    setTimeout(timeout) {\n        this.timeout = timeout;\n    }\n\n    /**\n     * @param {string|Function} arg - specify the bearer token or a function to retrieve it\n     */\n    setAuthToken(arg) {\n        if(arg && typeof(arg) === 'string')\n            this.token = function() { return arg; };\n        else if(arg && typeof(arg) === 'function')\n            this.token = arg;\n        //else do nothing\n    }\n\n    createRequestOpts(options) {\n\n        let opts = {\n            method: options.method,\n            url: options.url,\n            timeout: options.timeout || this.timeout\n        };\n\n        if(options.json === true)\n            opts.dataType = 'json';\n\n        if(options.params) {\n            opts.data = options.params;\n            opts.processData = true;\n        }\n\n        if(options.data) {\n            opts.data = options.data;\n            opts.processData = options.processData || false;\n            opts.contentType = 'application/json';\n        }\n\n        //set authorization header if one was provided\n        if(this.token) {\n            let token = this.token();\n            if(token) {\n                opts.headers = opts.headers || {};\n                opts.headers.Authorization = 'Bearer ' + token;\n            }\n        }\n\n        //copy over user-supplied options\n        if(options.options) {\n            for(let o in options.options) {\n                if(options.options.hasOwnProperty(o)) {\n                    opts[o] = options.options[o];\n                }\n            }\n        }\n\n        return opts;\n    }\n\n\n    execute(opts) {\n\n        if(typeof(jQuery) === 'undefined') {\n            throw new Error(\"jQuery is not available. Ensure it is included in your application\");\n        }\n        let d = Q.defer();\n        opts.success = function(data) { d.resolve(data); };\n        opts.error = function(xhr, status, message) { d.reject(new Error(message)); };\n        jQuery.ajax(opts);\n        return d.promise;\n    }\n\n}\n\nexport default JQueryHttpClient;\n","\nimport Q from 'q';\nimport HttpClientBase from './client';\n\nclass NGHttpClient extends HttpClientBase {\n\n    /**\n     * @param {integer} options.timeout\n     * @param {string} options.token - the bearer token or a function to retrieve it\n     * @param {Object} options.$http - angular $http service instance\n     */\n    constructor(options) {\n        super(options);\n        if(typeof(angular) === 'undefined')\n            throw new Error(\"Angular not defined\");\n        if(options.$http)\n            this.$http = options.$http;\n    }\n\n    setTimeout(timeout) {\n        this.timeout = timeout;\n    }\n\n    /**\n     * @param {string|Function} arg - specify the bearer token or a function to retrieve it\n     */\n    setAuthToken(arg) {\n        if(arg && typeof(arg) === 'string')\n            this.token = function() { return arg; };\n        else if(arg && typeof(arg) === 'function')\n            this.token = arg;\n        //else do nothing\n    }\n\n    createRequestOpts(options) {\n\n        let opts = {\n            method: options.method,\n            url: options.url,\n            timeout: options.timeout || this.timeout\n        };\n\n        if(options.json === true)\n            opts.dataType = 'json';\n\n        if(options.params) {\n            opts.params = options.params;\n        }\n\n        if(options.data) {\n            opts.data = options.data;\n        }\n\n        //set authorization token if one was provided\n        if(this.token) {\n            let token = this.token();\n            if(token) {\n                opts.headers = opts.headers || {};\n                opts.headers.Authorization = 'Bearer ' + token;\n                opts.useXDomain = true;\n            }\n        }\n\n        //copy over user-supplied options\n        if(options.options) {\n            for(let o in options.options) {\n                if(options.options.hasOwnProperty(o)) {\n                    opts[o] = options.options[o];\n                }\n            }\n        }\n\n        return opts;\n    }\n\n    execute(opts) {\n\n        if(typeof(angular) === 'undefined')\n            throw new Error(\"Angular is not defined, ensure you have included it as a dependency in your application\");\n\n        let $http = this.$http || angular.injector(['ng']).get('$http');\n        return Q.resolve( $http )\n        .then($http => {\n            if(typeof($http) === 'undefined')\n                throw new Error(\"Angular $http not resolved\");\n\n            // console.log(opts);\n            return $http(opts);\n        })\n        .then(response=>response.data)\n        .catch(response=>Q.reject(response.data));\n    }\n\n}\n\nexport default NGHttpClient;\n","\nimport Q from 'q';\nimport HttpClientBase from './client';\n\nclass NodeHttpClient extends HttpClientBase {\n\n    /**\n     * @param {integer} options.timeout\n     * @param {string} options.token - the bearer token or a function to retrieve it\n     */\n    constructor(options) {\n        super(options);\n    }\n\n    createRequestOpts(options) {\n\n        let opts = {\n            method: options.method,\n            url: options.url,\n            json: false !== options.json,\n            timeout: options.timeout || this.timeout\n        };\n\n        if(options.params) {\n            opts.qs = options.params;\n        }\n\n        if(options.file) {\n            const fs = require('fs');\n            if(!fs) throw new Error(\"Module 'fs' not available\");\n            opts.formData = {\n                file: {\n                    value:  fs.createReadStream(options.file.path),\n                    options: {\n                        filename: options.file.originalFilename\n                    }\n                }\n            };\n            Object.assign(opts.formData, options.data||{});\n\n        } else if(options.data) {\n            if(options.formData) {\n                opts.formData = options.data;\n            } else {\n                opts.body = options.data;\n            }\n        }\n\n        //set authorization header if one was provided\n        if(this.token) {\n            let token = this.token();\n            if(token) {\n                opts.auth = { 'bearer': token };\n            }\n        }\n\n        //copy over user-supplied options\n        if(options.options) {\n            for(let o in options.options) {\n                if(options.options.hasOwnProperty(o)) {\n                    opts[o] = options.options[o];\n                }\n            }\n        }\n\n        // console.log(JSON.stringify(opts));\n\n        return opts;\n    }\n\n\n\n    /**\n     *\n     */\n    execute(options) {\n        let deferred = Q.defer();\n\n        const request = require('request');\n        if(!request) {\n            throw new Error(\"Module 'request' not available\");\n        }\n        // require('request-debug')(request);\n\n        request(options, (error, response, body) => {\n            this.checkAndHandleError(error, response)\n            .then( () =>  {\n                if(options.json === false)\n                    deferred.resolve( response );\n                else\n                    deferred.resolve( body );\n            })\n            .catch( e => deferred.reject(e) );\n        });\n        return deferred.promise;\n    }\n\n\n    /**\n     *\n     */\n    checkAndHandleError (error, response) {\n\n        let props = {\n            message: null,\n            error: null,    //error type\n            status: 200\n        };\n\n        if(error) {\n            // Logger.debug(\"Error generated by request library: \" + error.code);\n\n            if(error.code === 'ETIMEDOUT' || error.code === 'ESOCKETTIMEDOUT') {\n\n                props.status = 500;\n                props.error = \"Connection Timeout\";\n                props.message = \"The response from the service took too long to read\";\n\n                if(error.connect === true) {\n                    props.message = \"Unable to establish a connection to the service\";\n                }\n\n            } else {\n                return Q.reject(error);\n            }\n\n        } else if(response.statusCode < 200 || response.statusCode > 204) {\n\n            // Logger.debug('Error returned by remote endpoint (' + response.statusCode + ')');\n            // Logger.debug(JSON.stringify(response));\n\n            props.status = response.statusCode;\n\n            if(response.body && typeof(response.body) === 'object') {\n                props = response.body;\n                props.status = props.status || response.statusCode;\n                props.message = props.message || \"An error occurred communicating with service\";\n\n                if(response.statusCode === 409) {\n                    let sidx = response.body.message.indexOf(\" \");\n                    let eidx = response.body.message.indexOf(' already exists');\n                    if(sidx >= 0 && eidx > sidx) {\n                        props.item = response.body.message.substring(sidx+1, eidx);\n                    }\n                }\n\n            } else {\n\n                switch(response.statusCode) {\n                    case 404 :\n                        props.error = \"Not Found\";\n                        props.message = response.request.uri.pathname + \" cannot be found\";\n                        break;\n                    case 401 :\n                        props.error = \"Unauthenticated\";\n                        props.message = \"You are not authenticated\";\n                        break;\n                    case 403 :\n                        props.error = \"Unauthorized\";\n                        props.message = \"You are not authorized to access \" + response.request.uri.pathname;\n                        break;\n                    case 409 :\n                        props.error = \"Conflict\";\n                        props.message = \"Item already exists\";\n\n                        // pattern received is: { ..., message: 'Resource <identifier> already exists', ... }\n                        try {\n                            let json = JSON.parse(response.body);\n                            let sidx = json.message.indexOf(\" \");\n                            let eidx = json.message.indexOf(' already exists');\n                            if(sidx >= 0 && eidx > sidx) {\n                                props.item = json.message.substring(sidx+1, eidx);\n                            }\n                        } catch( e ) {\n                            message += '.  Unable to extract existing identifier from service response';\n                        }\n                        break;\n\n                    default:\n\n                        try {\n                            let json = JSON.parse(response.body);\n                            props = json;\n                            props.status = response.statusCode;\n                            // Logger.debug(\"PARSED ERROR: \" + JSON.stringify(props));\n\n                        } catch (e) {\n                            props.error = \"Server Error\";\n                            props.message = response.body;\n                            // Logger.debug(\"DEFAULTED ERROR: \" + JSON.stringify(props));\n                        }\n                }\n\n            }\n\n        }\n\n        if( props.status < 200 || props.status > 204 ) {\n\n            props.error = props.error || \"Server Error\";\n            props.status = props.status || response.statusCode;\n            props.message = props.message || \"An error occurred communicating with service\";\n\n            let err = new Error(props.message);\n            Object.assign(err, props);\n\n            // Logger.debug(\"UTILS.checkAndHandleError : \" + err);\n            // Logger.debug(\"UTILS.checkAndHandleError : \" + JSON.stringify(err));\n            // Logger.debug(\"UTILS.checkAndHandleError : \" + err.message);\n            return Q.reject(err);\n        }\n\n        return Q.resolve();\n    }\n\n}\n\n\nexport default NodeHttpClient;\n","\n\nexport default {\n    DATASET         : \"dcat:Dataset\",\n    SERVICE         : \"regp:Service\",\n    LAYER           : \"Layer\",\n    MAP             : \"Map\",\n    GALLERY         : \"Gallery\",\n    CONTACT         : \"vcard:VCard\",\n    ORGANIZATION    : \"org:Organization\",\n    COMMUNITY       : 'Community',\n    CONCEPT         : \"skos:Concept\",\n    CONCEPT_SCHEME  : \"skos:ConceptScheme\",\n    STANDARD        : 'dct:Standard'\n};\n","\nimport Q from 'q';\n\n/**\n * BaseService\n * service for working with the GeoPlatform API to\n * retrieve and manipulate items.\n *\n * Ex Searching Items\n *      let params = { q: 'test' };\n *      itemService.search(params).then(response=>{\n *          console.log(response.results.length + \" of \" + response.totalResults);\n *      }).catch(e=>{...});\n *\n * Ex Fetch Item:\n *      itemService.get(itemId).then(item=>{...}).catch(e=>{...});\n *\n * Ex Saving Item:\n *      itemService.save(item).then(item=>{...}).catch(e=>{...});\n *\n * Ex Deleting Item:\n *      itemService.remove(itemId).then(()=>{...}).catch(e=>{...});\n *\n * Ex Patching Item:\n *      itemService.patch(itemId,patch).then(item=>{...}).catch(e=>{...});\n *\n */\nclass BaseService {\n\n    constructor(url, httpClient) {\n        this.setUrl(url);\n        this.client = httpClient;\n        this.setTimeout(10000);\n        this.httpMethods = [\"GET\", \"POST\", \"PUT\", \"DELETE\", \"PATCH\"];\n    }\n\n    setUrl(baseUrl) {\n        this.apiBase = baseUrl;\n        this.baseUrl = baseUrl + '/api/items';\n    }\n\n    /**\n     * @param {number} milliseconds - override environment variable timeout\n     */\n    setTimeout(milliseconds) {\n        this.timeout = milliseconds;\n    }\n\n    /**\n     * @param {Error} e - error generated by the api\n     * @param {string} prefixMsg - label or message to prepend to the error's message\n     * @return {Promise} rejecting with the updated error\n     */\n    _onError (e, prefixMsg) {\n\n        let code = e.statusCode || e.status || 500;\n        let title = e.error;\n        let msg = e.message;\n        if(!msg) {\n            if(code === 400) msg = \"The request was invalid\";\n            else if(code === 401) msg = \"You must sign in before making this request\";\n            else if(code === 403) msg = \"You are not authorized to make this request\";\n            else if(code === 404) msg = \"The specified resource was not found\";\n            else if(code === 409) msg = \"The resource already exists\";\n            else msg = \"The request resulted in an unspecified error\";\n        }\n\n        e.message = prefixMsg ? (prefixMsg + \": \" + msg) : msg;\n        e.status = code;\n        e.error = title;\n        return Q.reject(e);\n    }\n\n}\n\nexport default BaseService;\n","\nimport ItemTypes from '../shared/types';\n\nconst ItemProperties = {\n    ID              : { key: 'id' },\n    URI             : { key: 'uri' },\n    TYPE            : { key: 'type' },\n    CREATED         : { key: '_created' },\n    MODIFIED        : { key: 'modified' },\n    LAST_MODIFIED_BY: { key: 'lastModifiedBy' },\n    IDENTIFIERS     : { key: 'identifiers',     multi: true },\n    ALTERNATE_TITLES: { key: 'alternateTitles', multi: true },\n    CREATED_BY      : { key: 'createdBy' },\n    LABEL           : { key: 'label' },\n    TITLE           : { key: 'title' },\n    DESCRIPTION     : { key: 'description' },\n    KEYWORDS        : { key: 'keywords',        multi: true },\n    LANDING_PAGE    : { key: 'landingPage' },\n    STATUS          : { key: 'status' },\n    VISIBILITY      : { key: 'visibility' },\n    THEMES          : { key: 'themes',          multi: true,    type: 'item'    },\n    PUBLISHERS      : { key: 'publishers',      multi: true,    type: 'item'    },\n    CONTACTS        : { key: 'contacts',        multi: true,    type: 'item'    },\n    CONTRIBUTORS    : { key: 'contributors',    multi: true,    type: 'item'    },\n    DISTRIBUTIONS   : { key: 'distributions',   multi: true,    type: 'object'  },\n    RESOURCE_TYPES  : { key: 'resourceTypes',   multi: true,    type: 'object'  },\n    CLASSIFIERS     : { key: 'classifiers',     type: 'object'  },\n\n    HREF            : { key: 'href' },\n    SERVICE_TYPE    : { key: 'serviceType',     type: 'object' },\n    DATASETS        : { key: 'datasets',        multi: true, type: 'item' },\n\n    LAYER_TYPE      : { key: 'layerType' },\n    LAYER_NAME      : { key: 'layerName' },\n    LEGEND          : { key: 'legend',          type: 'object'  },\n    SERVICES        : { key: 'services',        multi: true,    type: 'item'    },\n\n    BASE_LAYER      : { key: 'baseLayer',       type: 'item'    },\n    MAP_LAYERS      : { key: 'layers',          multi: true,    type: 'object'  },\n    THUMBNAIL       : { key: 'thumbnail',       type: \"object\"  },\n    ANNOTATIONS     : { key: 'annotations',     type: 'object'  },\n\n    GALLERY_ITEMS   : { key: 'items',           multi: true,    type: 'object'  },\n\n    CONCEPT_SCHEME  : { key: 'scheme',          type: 'item'    },\n\n    FULL_NAME       : { key: 'fullName'                 },\n    ORGANIZATION_NAME : { key: 'orgName'                },\n    POSITION_TITLE  : { key: 'positionTitle'            },\n    EMAIL           : { key: 'email'                    },\n    TELEPHONE       : { key: 'tel'                      },\n    ADDRESS         : { key: 'address', type: 'object'  },\n\n    NAME                : { key: 'name' },\n    PARENT_ORGANIZATION : { key: 'subOrganizationOf', type: 'item' }\n\n};\n\nexport default ItemProperties;\n","\n\nimport ItemFactory from './factory';\nimport ItemProperties from './properties';\n\nfunction mapArray (arr, fn) {\n    let len = arr.length, res = [];\n    for(let i=0; i<len; ++i) {\n        res[i] = fn(arr[i]);\n    }\n    return res;\n}\n\n\n/**\n *\n */\nclass BaseModel {\n\n    constructor() {\n        this._data = {};\n    }\n\n    set(property, value) {\n\n        // console.log(' ');\n        // console.log('-------------------');\n        // console.log(`Item.set() - ${property.key} = ${typeof(value)}` );\n        // console.log(`Item.set() - ${property.type} / ${property.multi}`);\n\n        if(value === null || value === undefined)\n            delete this._data[property.key];\n        else {\n            let newValue = value;\n            let isItem = 'item' === property.type;\n            if(property.multi) {\n                if(typeof(value.push) === 'undefined') {\n                    // console.log('Item.set() - ' + key + ' has many but is singular: ' + typeof(value.push));\n                    newValue = isItem ? [ this.toItem(value) ] : [ value ];\n                } else {\n                    newValue = mapArray(value, v => {\n                        return isItem ? this.toItem(v) : v;\n                    });\n                }\n\n            } else if(isItem) {\n                newValue = this.toItem(value);\n            } else {\n                newValue = JSON.parse(JSON.stringify(value));\n            }\n\n            this._data[property.key] = newValue;\n        }\n        // console.log('---------------------');\n        // console.log(' ');\n\n    }\n\n    get(property) {\n        return this._data[property.key];\n    }\n\n    addTo(property, value) {\n        if(value === null || value === undefined) return;\n        if(property.multi) {\n            if(!this._data[property.key])\n                this._data[property.key] = [];\n\n            if(typeof(value.push) !== 'undefined') {\n                if('item' === property.type) {\n                    value = mapArray(value, v => this.toItem(v) );\n                } else {\n                    value = value.slice(0);\n                }\n                this._data[property.key] = this._data[property.key].concat(value);\n\n            } else {\n                if('item' === property.type) {\n                    value = this.toItem(value);\n                }\n                this._data[property.key].push(value);\n            }\n        }\n    }\n\n    removeFrom(property, value) {\n        if(value === null || value === undefined) return;\n        if(property.multi) {\n\n            let isObj = 'object' === property.type;\n            let current = this.get(property);\n            if(!current) return;\n\n            if(typeof(value.push) !== 'undefined') {\n\n                // this._data[property.key] = current.concat(value);\n                for(let i=0; i<value.length; ++i) {\n                    if(isObj) {\n                        current = this.removeObject(value, current);\n                    } else {\n                        current = this.removeValue(value, current);\n                    }\n                }\n                this._data[property.key] = current;\n\n            } else {\n\n                if(isObj) {\n                    current = this.removeObject(value, current);\n                } else {\n                    current = this.removeValue(value, current);\n                }\n                this._data[property.key] = current;\n            }\n        }\n    }\n\n    addObject(value, arr) {\n        if(!value) return;\n        arr = arr || [];\n        arr.push(value);\n        return arr;\n    }\n    removeObject(value, arr) {\n        if(!value || (!value.id && !value.uri)) return;\n        let k = value.id ? 'id' : 'uri';\n        arr = arr || [];\n        let idx = -1;\n        arr.each( (p,i) => {\n            if(p[k] === value[k])\n                idx = i;\n        });\n        if(idx>=0) {\n            arr.splice(idx, 1);\n        }\n        return arr;\n    }\n\n    addValue(value, arr) {\n        if(!value) return;\n        arr = arr || [];\n        arr.push(value);\n        return arr;\n    }\n    removeValue(value, arr) {\n        if(!value) return;\n        arr = arr || [];\n        let idx = arr.indexOf(value);\n        if(idx>=0) {\n            arr.splice(idx, 1);\n        }\n        return arr;\n    }\n\n    default(property, value) {\n        let current = this.get(property);\n        if(current === null || current === undefined)\n            this.set(property, value);\n    }\n\n    toItem(obj) {\n        // console.log(\" \");\n        if(!obj) {\n            // console.log(`Item[${this._data.type}].toItem() - Value is null`);\n            return null;\n        }\n\n        let itemFactory = this.getFactory();\n        if(itemFactory) {\n            // console.log(`Item[${this._data.type}].toItem() - INPUT: ${JSON.stringify(obj)}`);\n            let result = itemFactory(obj);\n            // console.log(`Item[${this._data.type}].toItem() - ITEMIZED: ${JSON.stringify(result)}`);\n            return result;\n        } else {\n            console.log(`WARN: Item[${this._data.type}].toItem() - No Factory!`);\n            return JSON.parse(JSON.stringify(obj));\n        }\n    }\n\n    getFactory() {\n        return ItemFactory;\n    }\n\n    /**\n     * @param {ItemProperty} property - property to be written to output JSON object\n     * @param {any} value - value associated with the property\n     * @param {Object} parentJson - parent object to write the property's value to\n     */\n    propertyToJson(property, value, parentJson) {\n\n        if(value !== null && value !== undefined) {\n\n            let isItem = 'item' === property.type;\n            let isMulti = property.multi;\n            let result = null;\n\n            if(isMulti && isItem) {\n                result = value.map( v => v.toJson() );\n            } else if(isMulti) {\n                result = value.slice(0);\n            } else if(isItem) {\n                result = value.toJson();\n            } else {\n                result = value;\n            }\n\n            parentJson[property.key] = result;\n        }\n\n    }\n}\n\n\nexport default BaseModel;\n","\n\n\nimport BaseModel from './base';\nimport ItemProperties from './properties';\n\n\n/**\n * Item\n * base class for GeoPlatform objects\n */\nclass ItemModel extends BaseModel {\n\n    constructor(data) {\n        super();\n\n        if(data) {\n\n            // console.log(' ');\n            // console.log('-------------------------------');\n            // console.log('Item() - initializing using ' + JSON.stringify(data));\n\n            for(let p in ItemProperties) {\n                let property = ItemProperties[p];\n                let key = property.key;\n                let value = data[key];\n                if(value !== null && value !== undefined) {\n                    this.set(property, value);\n                }\n            }\n            // console.log('-------------------------------');\n            // console.log(' ');\n        }\n\n        this.default(ItemProperties.KEYWORDS, []);\n        this.default(ItemProperties.IDENTIFIERS, []);\n        this.default(ItemProperties.ALTERNATE_TITLES, []);\n        this.default(ItemProperties.THEMES, []);\n        this.default(ItemProperties.CONTACTS, []);\n        this.default(ItemProperties.PUBLISHERS, []);\n        this.default(ItemProperties.CONTRIBUTORS, []);\n        this.default(ItemProperties.RESOURCE_TYPES, []);\n    }\n\n    getId() { return this.get(ItemProperties.ID); }\n    getType() { return this.get(ItemProperties.TYPE); }\n    getCreated() { return this.get(ItemProperties.CREATED); }\n    getModified() { return this.get(ItemProperties.MODIFIED); }\n    getLastModifiedBy() { return this.get(ItemProperties.LAST_MODIFIED_BY); }\n\n    //-----------------------------------------------------------\n\n    uri(value) {  this.setUri(value);  return this; }\n    getUri() { return this.get(ItemProperties.URI); }\n    setUri(value) { this.set(ItemProperties.URI, value); }\n\n    //-----------------------------------------------------------\n\n    identifiers(value) { this.setIdentifiers(value); return this; }\n    getIdentifiers() { return this.get(ItemProperties.IDENTIFIERS); }\n    setIdentifiers(value) { this.set(ItemProperties.IDENTIFIERS, value); }\n    addIdentifier(value) { this.addTo(ItemProperties.IDENTIFIERS, value); }\n    removeIdentifier(value) { this.removeFrom(ItemProperties.IDENTIFIERS, value); }\n\n    //-----------------------------------------------------------\n\n    alternateTitles(value) { this.setAlternateTitles(value); return this; }\n    getAlternateTitles() { return this.get(ItemProperties.ALTERNATE_TITLES); }\n    setAlternateTitles(value) { this.set(ItemProperties.ALTERNATE_TITLES, value); }\n    addAlternateTitle(value) { this.addTo(ItemProperties.ALTERNATE_TITLES, value); }\n    removeAlternateTitle(value) { this.removeFrom(ItemProperties.ALTERNATE_TITLES, value); }\n\n    //-----------------------------------------------------------\n\n    createdBy(value) { this.setCreatedBy(value); return this; }\n    getCreatedBy() { return this.get(ItemProperties.CREATED_BY); }\n    setCreatedBy(value) { this.set(ItemProperties.CREATED_BY, value); }\n\n    //-----------------------------------------------------------\n\n    label(value) { this.setLabel(value); return this; }\n    getLabel() { return this.get(ItemProperties.LABEL); }\n    setLabel(value) { this.set(ItemProperties.LABEL, value); }\n\n    //-----------------------------------------------------------\n\n    description(value) { this.setDescription(value); return this; }\n    getDescription() { return this.get(ItemProperties.DESCRIPTION); }\n    setDescription(value) { this.set(ItemProperties.DESCRIPTION, value); }\n\n    //-----------------------------------------------------------\n\n    keywords(value) { this.setKeywords(value); return this; }\n    getKeywords() { return this.get(ItemProperties.KEYWORDS); }\n    setKeywords(value) { this.set(ItemProperties.KEYWORDS, value); }\n\n    //-----------------------------------------------------------\n\n    landingPage(value) { this.setLandingPage(value); return this; }\n    getLandingPage() { return this.get(ItemProperties.LANDING_PAGE); }\n    setLandingPage(value) { this.set(ItemProperties.LANDING_PAGE, value); }\n\n    //-----------------------------------------------------------\n\n    status(value) { this.setStatus(value); return this; }\n    getStatus() { return this.get(ItemProperties.STATUS); }\n    setStatus(value) { this.set(ItemProperties.STATUS, value); }\n\n    //-----------------------------------------------------------\n\n    visibility(value) { this.setVisibility(value); return this; }\n    getVisibility() { return this.get(ItemProperties.VISIBILITY); }\n    setVisibility(value) { this.set(ItemProperties.VISIBILITY, value===true); }\n\n    //-----------------------------------------------------------\n\n    themes(value) { this.setThemes(value); return this; }\n    getThemes() { return this.get(ItemProperties.THEMES); }\n    setThemes(value) { this.set(ItemProperties.THEMES, value); }\n    addTheme(value) { this.addTo(ItemProperties.THEMES, value); }\n    removeTheme(value) { this.removeFrom(ItemProperties.THEMES, value); }\n\n    //-----------------------------------------------------------\n\n    publishers(value) { this.setPublishers(value); return this; }\n    getPublishers() { return this.get(ItemProperties.PUBLISHERS); }\n    setPublishers(value) { this.set(ItemProperties.PUBLISHERS, value); }\n    addPublisher(value) { this.addTo(ItemProperties.PUBLISHERS, value); }\n    removePublisher(value) { this.removeFrom(ItemProperties.PUBLISHERS, value); }\n\n    //-----------------------------------------------------------\n\n    contacts(value) { this.setContacts(value); return this; }\n    getContacts() { return this.get(ItemProperties.CONTACTS); }\n    setContacts(value) { this.set(ItemProperties.CONTACTS, value); }\n    addContact(value) { this.addTo(ItemProperties.CONTACTS, value); }\n    removeContact(value) { this.removeFrom(ItemProperties.CONTACTS, value); }\n\n    //-----------------------------------------------------------\n\n    contributors(value) { this.setContributors(value); return this; }\n    getContributors() { return this.get(ItemProperties.CONTRIBUTORS); }\n    setContributors(value) { this.set(ItemProperties.CONTRIBUTORS, value); }\n    addContributor(value) { this.addTo(ItemProperties.CONTRIBUTORS, value); }\n    removeContributor(value) { this.removeFrom(ItemProperties.CONTRIBUTORS, value); }\n\n    //-----------------------------------------------------------\n\n    resourceTypes(value) { this.setResourceTypes(value); return this; }\n    getResourceTypes() { return this.get(ItemProperties.RESOURCE_TYPES); }\n    setResourceTypes(value) { this.set(ItemProperties.RESOURCE_TYPES, value); }\n    addResourceType(value) { this.addTo(ItemProperties.RESOURCE_TYPES, value); }\n    removeResourceType(value) { this.removeFrom(ItemProperties.RESOURCE_TYPES, value); }\n\n    //-----------------------------------------------------------\n\n    distributions(value) { this.setDistributions(value); return this; }\n    getDistributions() { return this.get(ItemProperties.DISTRIBUTIONS); }\n    setDistributions(value) { this.set(ItemProperties.DISTRIBUTIONS, value); }\n    addDistribution(value) { this.addTo(ItemProperties.DISTRIBUTIONS, value); }\n    removeDistribution(value) { this.removeFrom(ItemProperties.DISTRIBUTIONS, value); }\n\n    //-----------------------------------------------------------\n\n    classifiers(value) { this.setClassifiers(value); return this; }\n    getClassifiers() { return this.get(ItemProperties.CLASSIFIERS); }\n    setClassifiers(value) {\n        if(!value || typeof(value) !== 'object') {\n            this.set(ItemProperties.CLASSIFIERS, {});\n        } else {\n            this.set(ItemProperties.CLASSIFIERS, value);\n        }\n    }\n\n    //-----------------------------------------------------------\n\n    /**\n     * @return {boolean} true if the required fields are provided\n     */\n    isValid() {\n        return this.getType() && this.getLabel();\n    }\n\n    //-----------------------------------------------------------\n\n\n    toJson() {\n        let result = {};\n        for(let p in ItemProperties) {\n            let property = ItemProperties[p];\n            let value = this.get(property);\n            this.propertyToJson(property, value, result);\n        }\n        return result;\n    }\n\n}\n\nexport default ItemModel;\n","\n\nimport ItemModel from './item';\nimport ItemTypes from '../shared/types';\nimport ItemProperties from './properties';\n\n\nclass DatasetModel extends ItemModel {\n\n    constructor(data) {\n        super(data);\n        this.set(ItemProperties.TYPE, ItemTypes.DATASET);\n        this.default(ItemProperties.SERVICES, []);\n    }\n\n    //-----------------------------------------------------------\n\n    services(value) { this.setServices(value); return this; }\n    getServices() { return this.get(ItemProperties.SERVICES); }\n    setServices(value) { this.set(ItemProperties.SERVICES, value); }\n    addService(value) { this.addTo(ItemProperties.SERVICES, value); }\n    removeService(value) { this.removeFrom(ItemProperties.SERVICES, value); }\n\n    //-----------------------------------------------------------\n\n\n}\n\nexport default DatasetModel;\n","\nimport ItemModel from './item';\nimport ItemTypes from '../shared/types';\nimport ItemProperties from './properties';\n\n\nclass ServiceModel extends ItemModel {\n\n    constructor(data) {\n        super(data);\n        this.set(ItemProperties.TYPE, ItemTypes.SERVICE);\n        this.default(ItemProperties.DATASETS, []);\n    }\n\n    //-----------------------------------------------------------\n\n    href(value) { this.setHref(value); return this; }\n    getHref() { return this.get(ItemProperties.HREF); }\n    setHref(value) { this.set(ItemProperties.HREF, value); }\n\n    //-----------------------------------------------------------\n\n    serviceType(value) { this.setServiceType(value); return this; }\n    getServiceType() { return this.get(ItemProperties.SERVICE_TYPE); }\n    setServiceType(value) { this.set(ItemProperties.SERVICE_TYPE, value); }\n\n    //-----------------------------------------------------------\n\n    datasets(value) { this.setDatasets(value); return this; }\n    getDatasets() { return this.get(ItemProperties.DATASETS); }\n    setDatasets(value) { this.set(ItemProperties.DATASETS, value); }\n    addDataset(value) { this.addTo(ItemProperties.DATASETS, value); }\n    removeDataset(value) { this.removeFrom(ItemProperties.DATASETS, value); }\n\n    //-----------------------------------------------------------\n\n\n}\n\nexport default ServiceModel;\n","\nimport ItemModel from './item';\nimport ItemTypes from '../shared/types';\nimport ItemProperties from './properties';\n\n\nclass LayerModel extends ItemModel {\n\n    constructor(data) {\n        super(data);\n        this.set(ItemProperties.TYPE, ItemTypes.LAYER);\n        this.default(ItemProperties.SERVICES, []);\n    }\n\n    //-----------------------------------------------------------\n\n    layerType(value) { this.setLayerType(value); return this; }\n    getLayerType() { return this.get(ItemProperties.LAYER_TYPE); }\n    setLayerType(value) { this.set(ItemProperties.LAYER_TYPE, value); }\n\n    //-----------------------------------------------------------\n\n    layerName(value) { this.setLayerName(value); return this; }\n    getLayerName() { return this.get(ItemProperties.LAYER_NAME); }\n    setLayerName(value) { this.set(ItemProperties.LAYER_NAME, value); }\n\n    //-----------------------------------------------------------\n\n    legend(value) { this.setLegend(value); return this; }\n    getLegend() { return this.get(ItemProperties.LEGEND); }\n    setLegend(value) { this.set(ItemProperties.LEGEND, value); }\n\n    //-----------------------------------------------------------\n\n    services(value) { this.setServices(value); return this; }\n    getServices() { return this.get(ItemProperties.SERVICES); }\n    setServices(value) { this.set(ItemProperties.SERVICES, value); }\n    addService(value) { this.addTo(ItemProperties.SERVICES, value); }\n    removeService(value) { this.removeFrom(ItemProperties.SERVICES, value); }\n\n    //-----------------------------------------------------------\n\n}\n\nexport default LayerModel;\n","\nimport ItemModel from './item';\nimport ItemTypes from '../shared/types';\nimport ItemProperties from './properties';\n\n\nconst LayerStateProperties = {\n    LAYER_ID    : { key: \"layer_id\"     },\n    LAYER       : { key: \"layer\"        },\n    OPACITY     : { key: \"opacity\"      },\n    VISIBILITY  : { key: \"visibility\"   }\n};\n\n\nclass MapModel extends ItemModel {\n\n    constructor(data) {\n        super(data);\n\n        //manually re-set the overlays because each objectc\n        // has a nested Item (layer) which needs to be item-ized\n        // and the initializer used in the constructor isn't tied\n        // to any specific instance's logic.\n        let layers = this.getLayers();\n        if(layers) {\n            this.setLayers(layers);\n        }\n\n        this.set(ItemProperties.TYPE, ItemTypes.MAP);\n        this.default(ItemProperties.MAP_LAYERS, []);\n    }\n\n    //-----------------------------------------------------------\n\n    thumbnail(value) { this.setThumbnail(value); return this; }\n    getThumbnail() { return this.get(ItemProperties.THUMBNAIL); }\n    setThumbnail(value) { this.set(ItemProperties.THUMBNAIL, value); }\n\n    //-----------------------------------------------------------\n\n    baseLayer(value) { this.setBaseLayer(value); return this; }\n    getBaseLayer() { return this.get(ItemProperties.BASE_LAYER); }\n    setBaseLayer(value) { this.set(ItemProperties.BASE_LAYER, value); }\n\n    //-----------------------------------------------------------\n\n    layers(value) { this.setLayers(value); return this; }\n    getLayers() { return this.get(ItemProperties.MAP_LAYERS); }\n    setLayers(value) {\n        let states = [];\n        if(value) {\n            if(typeof(value.push) === 'undefined') {\n                value = [value];\n            }\n            states = value.map( v => this.toLayerState(v) );\n        }\n        this.set(ItemProperties.MAP_LAYERS, states);\n    }\n    addLayer(value) {\n        if(!value) return;\n        let state = this.toLayerState(value);\n        this.addTo(ItemProperties.MAP_LAYERS, state);\n    }\n    removeLayer(value) {\n        if(!value) return;\n        //get id of layer to be removed\n        let layerId = value.id;\n        if(!layerId && value.layer) {\n            layerId = value.layer.id;\n        }\n        if(!layerId) return;    //can't remove unpersisted layers\n        //filter out selected layer from current layers and update\n        let layers = this.getLayers().filter(ls => ls.layer.id !== layerId );\n        this.set(ItemProperties.MAP_LAYERS, layers);\n    }\n\n    //-----------------------------------------------------------\n\n    annotations(value) { this.setAnnotations(value); return this; }\n    getAnnotations() { return this.get(ItemProperties.ANNOTATIONS); }\n    setAnnotations(value) { this.set(ItemProperties.ANNOTATIONS, value); }\n\n    //-----------------------------------------------------------\n\n\n    /*\n     * In order to properly handle Layers nested within plain PoJSos\n     * @override ItemModel.propertyToJson\n     */\n    propertyToJson(property, value, parentJson) {\n        if(property === ItemProperties.MAP_LAYERS && value && value.length) {\n            let json = value.map(v => this.fromLayerState(v) );\n            parentJson[property.key] = json;\n        } else {\n            super.propertyToJson(property, value, parentJson);\n        }\n    }\n\n    /**\n     * @param {Object} object\n     * @return {Object} layer state representation of the input\n     */\n    toLayerState(object) {\n        if(!object) {\n            // console.log(\"MapModel.toLayerState() - input was null\");\n            return null;\n        }\n\n        let result = {};\n\n        if(object.layer) {\n            // console.log(\"MapModel.toLayerState() - input was already a state\");\n            let layer = this.toItem(object.layer);\n            if(!layer) return null;\n            result[LayerStateProperties.LAYER.key] = layer;\n            result[LayerStateProperties.LAYER_ID.key] = layer.getId() || object.layer_id;\n            result[LayerStateProperties.OPACITY.key] = object.opacity || 1.0;\n            result[LayerStateProperties.VISIBILITY.key] =\n                object.visibility !== undefined ? object.visibility : true;\n\n        } else if(!object.layer) {\n            // console.log(\"MapModel.toLayerState() - input was a layer\");\n            let layer = this.toItem(object);\n            if(!layer) return null;\n            result[LayerStateProperties.LAYER.key] = layer;\n            result[LayerStateProperties.LAYER_ID.key] = layer.getId();\n            result[LayerStateProperties.OPACITY.key] = 1.0;\n            result[LayerStateProperties.VISIBILITY.key] = true;\n        }\n\n        return result;\n    }\n\n    /**\n     * @param {Object} state -\n     * @return {Object} JSON representation\n     */\n    fromLayerState(state) {\n        let result = {};\n        for(let p in state) {\n            let value = state[p];\n            if(LayerStateProperties.LAYER.key === p) {\n                value = value.toJson();\n            }\n            result[p] = value;\n        }\n        return result;\n    }\n\n}\n\nexport default MapModel;\n","\nimport ItemModel from './item';\nimport ItemTypes from '../shared/types';\nimport ItemProperties from './properties';\n\nconst GalleryItemProperties = {\n    ASSET_ID    : { key: \"assetId\"   },\n    ASSET       : { key: \"asset\"     },\n    ASSET_TYPE  : { key: \"assetType\" }\n};\n\n\n/**\n * Gallery\n */\nclass GalleryModel extends ItemModel {\n\n    constructor(data) {\n        super(data);\n\n        //manually re-set the overlays because each objectc\n        // has a nested Item (layer) which needs to be item-ized\n        // and the initializer used in the constructor isn't tied\n        // to any specific instance's logic.\n        let items = this.getItems();\n        if(items) {\n            this.setItems(items);\n        }\n\n        this.set(ItemProperties.TYPE, ItemTypes.GALLERY);\n        this.default(ItemProperties.GALLERY_ITEMS, []);\n    }\n\n    //-----------------------------------------------------------\n\n    items(value) { this.setItems(value); return this; }\n    getItems() { return this.get(ItemProperties.GALLERY_ITEMS); }\n    setItems(value) {\n        let items = [];\n        //ensure that items being set contain Item-ized assets\n        if(value) {\n            if(typeof(value.push) === 'undefined') {\n                value = [value];\n            }\n            items = value.map(v=>this.toGalleryItem(v));\n        }\n        this.set(ItemProperties.GALLERY_ITEMS, items);\n    }\n    addItem(value) {\n        if(!value) return;\n        let item = this.toGalleryItem(value);\n        this.addTo(ItemProperties.GALLERY_ITEMS, item);\n    }\n    removeItem(value) {\n        if(!value || typeof(value.toJson) === 'undefined') return;\n        let items = this.getItems().filter(i=>i.assetId !== value.getId());\n        this.setItems(items);\n    }\n    reorderItem(value, newPosition) {\n        let idx = -1;\n        let arr = this.getItems();\n        arr.each( (p,i) => {\n            if(p.id === value.id)\n                idx = i;\n        });\n        if(idx < 0) return;\n        arr.splice(idx, 1);\n        arr.splice(idx, 0, value);\n        this.setItems(arr);\n    }\n\n    //-----------------------------------------------------------\n\n    /*\n     * In order to properly handle Items nested within plain PoJSos\n     * @override ItemModel.propertyToJson\n     */\n    propertyToJson(property, value, parentJson) {\n        if(property === ItemProperties.GALLERY_ITEMS && value && value.length) {\n            let json = value.map(v => this.fromGalleryItem(v) ).filter(v=>v!==null);\n            parentJson[property.key] = json;\n        } else {\n            super.propertyToJson(property, value, parentJson);\n        }\n    }\n\n\n\n\n    toGalleryItem(object) {\n        if(!object) return null;\n\n        let result = {};\n\n        if(object.asset) {\n            // console.log(\"GalleryModel.toGalleryItem() - input was already an item\");\n            let asset = this.toItem(object.asset);\n            if(!asset) return null;\n            result[GalleryItemProperties.ASSET.key] = asset;\n            result[GalleryItemProperties.ASSET_ID.key] =\n                asset.getId() || object[GalleryItemProperties.ASSET_ID.key];\n            result[GalleryItemProperties.ASSET_TYPE.key] =\n                asset.getType() || object[GalleryItemProperties.ASSET_TYPE.key];\n\n\n        } else {\n            // console.log(\"GalleryModel.toGalleryItem() - input was an asset\");\n            let asset = this.toItem(object);\n            if(!asset) return null;\n            result[GalleryItemProperties.ASSET.key] = asset;\n            result[GalleryItemProperties.ASSET_ID.key] = asset.getId();\n            result[GalleryItemProperties.ASSET_TYPE.key] = asset.getType();\n\n        }\n\n        return result;\n    }\n\n    fromGalleryItem(item) {\n        let result = {};\n        for(let p in item) {\n            let value = item[p];\n            if(GalleryItemProperties.ASSET.key === p) {\n                value = value.toJson();\n            }\n            result[p] = value;\n        }\n        return result;\n    }\n\n}\n\nexport default GalleryModel;\n","\n\nimport ItemModel from './item';\nimport ItemTypes from '../shared/types';\nimport ItemProperties from './properties';\n\n\nclass CommunityModel extends ItemModel {\n\n    constructor(data) {\n        super(data);\n        this.set(ItemProperties.TYPE, ItemTypes.COMMUNITY);\n    }\n\n    //-----------------------------------------------------------\n\n\n\n    //-----------------------------------------------------------\n\n\n}\n\nexport default CommunityModel;\n","\n\nimport ItemModel from './item';\nimport ItemTypes from '../shared/types';\nimport ItemProperties from './properties';\n\n\nconst ADDRESS_STREET  = 'street';\nconst ADDRESS_CITY    = 'city';\nconst ADDRESS_STATE   = 'state';\nconst ADDRESS_ZIP     = 'zip';\nconst ADDRESS_COUNTRY = 'country';\n\n\nclass ContactModel extends ItemModel {\n\n    constructor(data) {\n        super(data);\n        this.set(ItemProperties.TYPE, ItemTypes.CONTACT);\n    }\n\n    //-----------------------------------------------------------\n\n    fullName(value) { this.setFullName(value); return this; }\n    getFullName() { return this.get(ItemProperties.FULL_NAME); }\n    setFullName(value) { this.set(ItemProperties.FULL_NAME, value); }\n\n    //-----------------------------------------------------------\n\n    orgName(value) { this.setOrgName(value); return this; }\n    getOrgName() { return this.get(ItemProperties.ORGANIZATION_NAME); }\n    setOrgName(value) { this.set(ItemProperties.ORGANIZATION_NAME, value); }\n\n    //-----------------------------------------------------------\n\n    position(value) { this.setPosition(value); return this; }\n    getPosition() { return this.get(ItemProperties.POSITION_TITLE); }\n    setPosition(value) { this.set(ItemProperties.POSITION_TITLE, value); }\n\n    //-----------------------------------------------------------\n\n    email(value) { this.setEmail(value); return this; }\n    getEmail() { return this.get(ItemProperties.EMAIL); }\n    setEmail(value) { this.set(ItemProperties.EMAIL, value); }\n\n    //-----------------------------------------------------------\n\n    phone(value) { this.setPhone(value); return this; }\n    getPhone() { return this.get(ItemProperties.TELEPHONE); }\n    setPhone(value) { this.set(ItemProperties.TELEPHONE, value); }\n\n    //-----------------------------------------------------------\n\n    address(value) { this.setAddress(value); return this; }\n    getAddress() { return this.get(ItemProperties.ADDRESS); }\n    setAddress(value) { this.set(ItemProperties.ADDRESS, value); }\n\n    //-----------------------------------------------------------\n\n    street(value) { this.setStreet(value); return this; }\n    getStreet() {\n        let address = this.getAddress();\n        return address ? address[ADDRESS_STREET] : null;\n    }\n    setStreet(value) {\n        let address = this.getAddress() || {};\n        address[ADDRESS_STREET] = value;\n        this.setAddress(address);\n    }\n\n    //-----------------------------------------------------------\n\n    city(value) { this.setCity(value); return this; }\n    getCity() {\n        let address = this.getAddress();\n        return address ? address[ADDRESS_CITY] : null;\n    }\n    setCity(value) {\n        let address = this.getAddress() || {};\n        address[ADDRESS_CITY] = value;\n        this.setAddress(address);\n    }\n\n    //-----------------------------------------------------------\n\n    state(value) { this.setState(value); return this; }\n    getState() {\n        let address = this.getAddress();\n        return address ? address[ADDRESS_STATE] : null;\n    }\n    setState(value) {\n        let address = this.getAddress() || {};\n        address[ADDRESS_STATE] = value;\n        this.setAddress(address);\n    }\n\n    //-----------------------------------------------------------\n\n    zipCode(value) { this.setZipCode(value); return this; }\n    getZipCode() {\n        let address = this.getAddress();\n        return address ? address[ADDRESS_ZIP] : null;\n    }\n    setZipCode(value) {\n        let address = this.getAddress() || {};\n        address[ADDRESS_ZIP] = value;\n        this.setAddress(address);\n    }\n\n    //-----------------------------------------------------------\n\n    country(value) { this.setCountry(value); return this; }\n    getCountry() {\n        let address = this.getAddress();\n        return address ? address[ADDRESS_COUNTRY] : null;\n    }\n    setCountry(value) {\n        let address = this.getAddress() || {};\n        address[ADDRESS_COUNTRY] = value;\n        this.setAddress(address);\n    }\n\n    //-----------------------------------------------------------\n\n}\n\nexport default ContactModel;\n","\n\nimport ItemModel from './item';\nimport ItemTypes from '../shared/types';\nimport ItemProperties from './properties';\n\n\nclass OrganizationModel extends ItemModel {\n\n    constructor(data) {\n        super(data);\n        this.set(ItemProperties.TYPE, ItemTypes.ORGANIZATION);\n    }\n\n    //-----------------------------------------------------------\n\n    name(value) { this.setName(value); return this; }\n    getName() { return this.get(ItemProperties.NAME); }\n    setName(value) { this.set(ItemProperties.NAME, value); }\n\n    //-----------------------------------------------------------\n\n    parentOrg(value) { this.setParentOrganization(value); return this; }\n    getParentOrganization() { return this.get(ItemProperties.PARENT_ORGANIZATION); }\n    setParentOrganization(value) { this.set(ItemProperties.PARENT_ORGANIZATION, value); }\n\n    //-----------------------------------------------------------\n\n\n}\n\nexport default OrganizationModel;\n","\n\nimport ItemModel from './item';\nimport ItemTypes from '../shared/types';\nimport ItemProperties from './properties';\n\nclass ConceptModel extends ItemModel {\n\n    constructor(data) {\n        super(data);\n        this.set(ItemProperties.TYPE, ItemTypes.CONCEPT);\n    }\n\n    //-----------------------------------------------------------\n\n    scheme(value) { this.setScheme(value); return this; }\n    getScheme() { return this.get(ItemProperties.CONCEPT_SCHEME); }\n    setScheme(value) { this.set(ItemProperties.CONCEPT_SCHEME, value); }\n\n    //-----------------------------------------------------------\n\n\n}\n\nexport default ConceptModel;\n","\nimport ItemModel from './item';\nimport ItemTypes from '../shared/types';\nimport ItemProperties from './properties';\n\n\nclass ConceptSchemeModel extends ItemModel {\n\n    constructor(data) {\n        super(data);\n        this.set(ItemProperties.TYPE, ItemTypes.CONCEPT_SCHEME);\n    }\n\n    //-----------------------------------------------------------\n\n\n\n    //-----------------------------------------------------------\n\n\n}\n\nexport default ConceptSchemeModel;\n","\nimport ItemTypes from '../shared/types';\nimport ItemProperties from './properties';\nimport BaseModel from './base';\nimport DatasetModel from './dataset';\nimport ServiceModel from './service';\nimport LayerModel from './layer';\nimport MapModel from './map';\nimport GalleryModel from './gallery';\nimport CommunityModel from './community';\nimport ContactModel from './contact';\nimport OrganizationModel from './organization';\nimport ConceptModel from './concept';\nimport ConceptSchemeModel from './concept-scheme';\n\n\nfunction itemFactory(type, options) {\n    let item = null;\n\n    // console.log(\" \");\n    // console.log(`ItemFactory() - Creating ${type} Item`);\n    // console.log(\" using... \" + JSON.stringify(options));\n    // console.log(\"-------------------------------\");\n\n    try {\n\n        switch(type) {\n            case ItemTypes.DATASET:         item = new DatasetModel(options); break;\n            case ItemTypes.SERVICE:         item = new ServiceModel(options); break;\n            case ItemTypes.LAYER:           item = new LayerModel(options); break;\n            case ItemTypes.MAP:             item = new MapModel(options); break;\n            case ItemTypes.GALLERY:         item = new GalleryModel(options); break;\n            case ItemTypes.COMMUNITY:       item = new CommunityModel(options); break;\n            case ItemTypes.CONTACT:         item = new ContactModel(options); break;\n            case ItemTypes.ORGANIZATION:    item = new OrganizationModel(options); break;\n            case ItemTypes.CONCEPT:         item = new ConceptModel(options); break;\n            case ItemTypes.CONCEPT_SCHEME:  item = new ConceptSchemeModel(options); break;\n            default: throw new Error(`Unsupported item type '${type}'`);\n        }\n\n    } catch(e) {\n        console.log(\"ItemFactory.parse() - Error creating \" + type +\n            \" using \" + JSON.stringify(options) +\n            \" : \" + e.message);\n        throw new Error(\"ItemFactory.parse() - Error creating \" + type +\n            \" using \" + JSON.stringify(options) +\n            \" : \" + e.message);\n    }\n\n    // console.log(`ItemFactory - done with ${item.getType()}`);\n    // console.log(\" \");\n    return item;\n}\n\n\n\n\nexport default function factory(arg) {\n\n    // console.log(\"ItemFactory() - \" + JSON.stringify(arg));\n\n    let type = null, options = null;\n    if(arg && typeof(arg) === 'string')\n        type = arg;\n    else if(arg && typeof(arg) === 'object') {\n\n        if(typeof(arg.toJson) !== 'undefined') {\n            // console.log(arg.getType() + \" is already an Item\");\n            return arg; //already an Item instance\n        }\n\n        if(arg.type)\n            type = arg.type;\n        else\n            throw new Error(\"ItemFactory() - Must specify 'type' in parameter object\");\n\n        options = arg;\n    } else {\n        throw new Error(\"Illegal argument; must be string type or object definition\");\n    }\n\n    return itemFactory(type, options);\n\n}\n","\nimport Q from 'q';\nimport BaseService from './base';\nimport ItemFactory from '../models/factory';\n\n/**\n * ItemService\n * service for working with the GeoPlatform API to\n * retrieve and manipulate items.\n *\n * Ex Searching Items\n *      let params = { q: 'test' };\n *      itemService.search(params).then(response=>{\n *          console.log(response.results.length + \" of \" + response.totalResults);\n *      }).catch(e=>{...});\n *\n * Ex Fetch Item:\n *      itemService.get(itemId).then(item=>{...}).catch(e=>{...});\n *\n * Ex Saving Item:\n *      itemService.save(item).then(item=>{...}).catch(e=>{...});\n *\n * Ex Deleting Item:\n *      itemService.remove(itemId).then(()=>{...}).catch(e=>{...});\n *\n * Ex Patching Item:\n *      itemService.patch(itemId,patch).then(item=>{...}).catch(e=>{...});\n *\n */\nclass ItemService extends BaseService {\n\n    constructor(url, httpClient) {\n        super(url, httpClient);\n    }\n\n    /**\n     * @param {string} id - identifier of item to fetch\n     * @param {Object} options - optional set of request options to apply to xhr request\n     * @return {Promise} resolving Item object or an error\n     */\n    get (id, options) {\n\n        return Q.resolve( id )\n        .then( id => {\n            let opts = this.buildRequest({\n                method:\"GET\", url:this.baseUrl + '/' + id, options:options\n            });\n            return this.execute(opts);\n        })\n        .then( obj => ItemFactory(obj) )\n        .catch(e => this._onError(e, `ItemService.get() - Error fetching item ${id}`) );\n    }\n\n    /**\n     * @param {Object} itemObj - item to create or update\n     * @param {Object} options - optional set of request options to apply to xhr request\n     * @return {Promise} resolving Item object or an error\n     */\n    save (itemObj, options) {\n\n        return Q.resolve( itemObj )\n        .then( item => {\n\n            if(item.toJson) {\n                //if passed an ItemModel instance, convert to JSON\n                item = item.toJson();\n            }\n\n            let method = 'POST',\n                url = this.baseUrl;\n            if(item.id) {\n                method = \"PUT\";\n                url += '/' + item.id;\n            }\n\n            let opts = this.buildRequest({method:method, url:url, data:item, options:options});\n            return this.execute(opts);\n\n        })\n        .then(obj => ItemFactory(obj) )\n        .catch(e => this._onError(e, `ItemService.save() - Error saving item`) );\n    }\n\n    /**\n     * @param {string} id - identifier of item to delete\n     * @param {Object} options - optional set of request options to apply to xhr request\n     * @return {Promise} resolving true if successful or an error\n     */\n    remove (id, options) {\n\n        return Q.resolve( this.baseUrl + '/' + id )\n        .then( url => {\n            let opts = this.buildRequest({\n                method:\"DELETE\", url: url, options: options\n            });\n            return this.execute(opts);\n        })\n        .then(response => true)\n        .catch(e => this._onError(e, `ItemService.remove() - Error deleting item ${id}`) );\n    }\n\n    /**\n     * @param {string} id - identifier of item to patch\n     * @param {Object} patch - HTTP-PATCH compliant set of properties to patch\n     * @param {Object} options - optional set of request options to apply to xhr request\n     * @return {Promise} resolving Item object or an error\n     */\n    patch (id, patch, options) {\n\n        return Q.resolve( this.baseUrl + '/' + id )\n        .then( url => {\n            let opts = this.buildRequest({\n                method: \"PATCH\", url: url, data: patch, options: options\n            });\n            return this.execute(opts);\n        })\n        .then( obj => ItemFactory(obj) )\n        .catch(e => this._onError(e, `ItemService.patch() - Error patching item ${id}`) );\n    }\n\n    /**\n     * @param {Object} arg - either JS object of query parameters or GeoPlatform.Query instance\n     * @param {Object} options - optional set of request options to apply to xhr request\n     * @return {Promise} resolving search results\n     */\n    search (arg, options) {\n\n        return Q.resolve( arg )\n        .then( params => {\n\n            if(params && typeof(params.getQuery) !== 'undefined') {\n                //if passed a GeoPlatform.Query object,\n                // convert to parameters object\n                params = params.getQuery();\n            }\n            let opts = this.buildRequest({\n                method:\"GET\", url: this.baseUrl, params: params, options: options\n            });\n            return this.execute(opts);\n        })\n        .catch(e => this._onError(e, `ItemService.search() - Error searching items`) );\n    }\n\n\n    /**\n     *\n     * @param {string} arg - URL to metadata document or File to upload\n     * @param {string} format - metadata format of specified document\n     * @return {Promise} resolving GeoPlatform Item\n     */\n    import (arg, format, options) {\n\n        return Q.resolve( true )\n        .then( () => {\n            if(!arg || arg.indexOf('http')<0) {\n                throw new Error(\"Must provide a valid URL or File\");\n            }\n            let isFile = typeof(arg) !== 'string';\n            let ro = {\n                method:\"POST\",\n                url: this.apiBase + '/api/import',\n                processData: true,  //for jQuery\n                formData: true,     //for Node (RequestJS)\n                options: options\n            };\n            if(isFile) {\n                ro.file = arg;\n                ro.data = { format: format };\n            } else {\n                ro.formData = false; //prevent multi-part form/data encoding\n                ro.data = { url: arg, format: format };\n            }\n            let opts = this.buildRequest(ro);\n            return this.execute(opts);\n        })\n        .catch( e => {\n            let err = new Error(`ItemService.import() - Error importing item: ${e.message}`);\n            if(e.status === 409 || ~e.message.indexOf('Item already exists')) err.status = 409;\n            if(e.item) err.item = e.item;\n            return Q.reject(err);\n        });\n    }\n\n\n\n    /**\n     * @param {string} id - identifier of the item to export\n     * @param {format} format - string mime type to export\n     * @return {Promise} resolving HTTP response object for enabling attachment downloading\n     */\n    export (id, format, options) {\n\n        return Q.resolve( true )\n        .then( () => {\n            let url = this.baseUrl + '/' + id + '/export';\n            let opts = this.buildRequest({\n                method: \"GET\", url: url,\n                params: {format:format},\n                json: false,\n                options: options\n            });\n            return this.execute(opts);\n        })\n        .catch( e => this._onError(e, `ItemService.export() - Error exporting item`) );\n    }\n\n\n    /**\n     * @param {Object} object - GP object definition to generate a URI for\n     * @param {Object} options - optional request options\n     * @return {Promise} resolving string URI\n     */\n    getUri (object, options) {\n\n        return Q.resolve( object )\n        .then( obj => {\n\n            if(!obj) {\n                let err = new Error(\"Must provide an typed object\");\n                err.status = 400;\n                err.error = \"Bad Request\";\n                throw err;\n            }\n\n            if(obj.toJson) {\n                //if passed an ItemModel instance, convert to JSON\n                obj = obj.toJson();\n            }\n\n            if(!obj.type) {\n                let err = new Error(\"Must provide a valid type on the specified object\");\n                err.status = 400;\n                err.error = \"Bad Request\";\n            }\n\n            let url = this.apiBase + '/api/utils/uri';\n            let opts = this.buildRequest({\n                method: \"POST\", url: url, data: obj, options: options\n            });\n            return this.execute(opts);\n        })\n        .catch( e => this._onError(e, `ItemService.getUri() - Error getting URI for item`) );\n\n    }\n\n    /* ----------------------------------------------------------- */\n\n    /**\n     * @param {string} method - one of \"GET\", \"POST\", \"PUT\", \"DELETE\", \"PATCH\"\n     * @param {string} url - destination of xhr request\n     * @param {Object} params - object to be sent with request as query parameters\n     * @param {Object} data - object to be sent with request as body\n     * @param {Object} options - optional object defining request options\n     * @return {Object} request options for xhr\n     */\n    buildRequest (options) {\n\n        if(this.httpMethods.indexOf(options.method)<0) {\n            let err = new Error(`Unsupported HTTP method ${options.method}`);\n            err.status = 400;\n            err.error = \"Bad Request\";\n            throw err;\n        }\n\n        if(!options.url) {\n            let err = new Error(`Must specify a URL for HTTP requests`);\n            err.status = 400;\n            err.error = \"Bad Request\";\n            throw err;\n        }\n\n        options.timeout = this.timeout;\n\n        let opts = this.createRequestOpts(options);\n\n        return opts;\n    }\n\n    createRequestOpts(options) {\n        return this.client.createRequestOpts(options);\n    }\n\n    execute(opts) {\n        return this.client.execute(opts);\n    }\n\n}\n\nexport default ItemService;\n","\nimport ItemService from './item';\n\n/**\n * GeoPlatform Map service\n * service for working with the GeoPlatform API to\n * retrieve and manipulate map objects.\n *\n * @see GeoPlatform.ItemService\n */\n\nclass DatasetService extends ItemService {\n\n    constructor(url, httpClient) {\n        super(url, httpClient);\n    }\n\n    setUrl(baseUrl) {\n        super.setUrl(baseUrl);\n        this.baseUrl = baseUrl + '/api/datasets';\n    }\n\n\n}\n\nexport default DatasetService;\n","\nimport Q from 'q';\nimport ItemService from './item';\n\n/**\n * GeoPlatform Map service\n * service for working with the GeoPlatform API to\n * retrieve and manipulate map objects.\n *\n * @see GeoPlatform.ItemService\n */\n\nclass MapService extends ItemService {\n\n    constructor(url, httpClient) {\n        super(url, httpClient);\n    }\n\n    setUrl(baseUrl) {\n        super.setUrl(baseUrl);\n        this.baseUrl = baseUrl + '/api/maps';\n    }\n\n\n}\n\nexport default MapService;\n","\n\nimport Q from 'q';\nimport ItemService from './item';\n\n/**\n * GeoPlatform Map service\n * service for working with the GeoPlatform API to\n * retrieve and manipulate map objects.\n *\n * @see GeoPlatform.ItemService\n */\n\nclass LayerService extends ItemService {\n\n    constructor(url, httpClient) {\n        super(url, httpClient);\n    }\n\n    setUrl(baseUrl) {\n        super.setUrl(baseUrl);\n        this.baseUrl = baseUrl + '/api/layers';\n    }\n\n    /**\n     * @param {Object} options - optional set of request options to apply to xhr request\n     * @return {Promise} resolving style JSON object\n     */\n    style (options) {\n        return Q.resolve( true )\n        .then( () => {\n            let url = this.baseUrl + '/' + id + '/style';\n            let opts = this.buildRequest({\n                method:\"GET\", url:url, options:options\n            });\n            return this.execute(opts);\n        })\n        .catch(e => this._onError(e, \"LayerService.style() - Error fetching style\") );\n    }\n\n    /**\n     * @param {string} id - GeoPlatform Layer identifier\n     * @param {Object} req identifying extent, x, y\n     * @param {Object} options - optional set of request options to apply to xhr request\n     * @return {Promise} resolving feature JSON object\n     */\n    describe( id, req, options ) {\n\n        return Q.resolve( req )\n        .then( (req) => {\n\n            if(!req) {\n                let err = new Error(\"Must provide describe parameters to use\");\n                err.status = 400;\n                err.error = \"Bad Request\";\n                throw err;\n            }\n\n            let keys = ['bbox', 'height', 'width', 'x', 'y'];\n            let missing = keys.find(key => !req[key]);\n            if(missing) {\n                let err = new Error(`Must specify ${missing} in describe req`);\n                err.status = 400;\n                err.error = \"Bad Request\";\n                throw err;\n            }\n\n            let params = {\n                srs         : 'EPSG:4326',\n                bbox        : req.bbox,\n                height      : req.height,\n                width       : req.width,\n                info_format : 'text/xml',\n                x           : req.x,\n                y           : req.y,\n                i           : req.x, //WMS 1.3.0\n                j           : req.y  //WMS 1.3.0\n            };\n\n            let url = this.baseUrl + '/' + id + '/describe';\n            let opts = this.buildRequest({\n                method:\"GET\", url:url, params:params, options:options\n            });\n            return this.execute(opts);\n        })\n        .catch(e => this._onError(e, \"LayerService.describe() - Error describing layer feature\") );\n    }\n\n    /**\n     * @param {string} id - GeoPlatform Layer identifier\n     * @param {Object} params describing layer request to validate\n     * @param {Object} options - optional set of request options to apply to xhr request\n     * @return {Promise} resolving empty if successful or a message if failed\n     */\n    validate(id, params, options) {\n\n        return Q.resolve( params )\n        .then( params => {\n\n            if(!params) {\n                let err = new Error(\"Must provide parameters to use in layer validation\");\n                err.status = 400;\n                err.error = \"Bad Request\";\n                throw err;\n            }\n\n            let url = this.baseUrl + '/' + id + '/validate';\n            let opts = this.buildRequest({\n                method:\"GET\", url:url, params:params, options:options\n            });\n            return this.execute(opts);\n        })\n        .catch(e => this._onError(e, \"LayerService.describe() - Error describing layer feature\") );\n    }\n\n}\n\nexport default LayerService;\n","\n\nexport default {\n    TYPES            : 'type',\n    QUERY            : 'q',\n    KEYWORDS         : 'keyword',\n    URI              : 'uri',\n    CREATED_BY       : 'createdBy',\n    CONTRIBUTED_BY   : 'contributedBy',\n    CREATOR          : 'creator.id',\n    SVC_TYPES        : 'serviceType.id',\n    THEMES_ID        : 'theme.id',\n    THEMES_LABEL     : 'theme.label',\n    THEMES_URI       : 'theme.uri',\n    PUBLISHERS       : 'publisher.id',\n    PUBLISHERS_LABEL : 'publisher.label',\n    PUBLISHERS_URI   : 'publisher.uri',\n    USED_BY_ID       : 'usedBy.id',\n    USED_BY_LABEL    : 'usedBy.label',\n    USED_BY_URI      : 'usedBy.uri',\n    SCHEMES_ID       : 'scheme.id',\n    SCHEMES_LABEL    : 'scheme.label',\n    SCHEMES_URI      : 'scheme.uri',\n    VISIBILITY       : 'visibility',\n    EXTENT           : 'extent',\n    MODIFIED_BEFORE  : 'modified.max',\n    MODIFIED_AFTER   : 'modified.min',\n    BEGINS           : 'startDate.min',\n    ENDS             : 'endDate.max',\n    RESOURCE_TYPE    : 'resourceType',\n\n    //recommender service-specific\n    FOR_TYPES        : 'for'\n};\n","\n\n\nexport default {\n    TYPES           : 'types',\n    THEMES          : 'themes',\n    PUBLISHERS      : 'publishers',\n    SERVICE_TYPES   : 'serviceTypes',\n    CONCEPT_SCHEMES : 'schemes',\n    VISIBILITY      : 'visibility',\n    CREATED_BY      : 'createdBy',\n    USED_BY         : 'usedBy.id'\n};\n","\nimport QueryParameters from './parameters';\nimport QueryFacets from './facets';\n\n\nconst FIELDS_DEFAULT = [\n    'created','modified','createdBy','publishers','themes','description'\n];\n\nconst FACETS_DEFAULT = [\n    QueryFacets.TYPES,\n    QueryFacets.PUBLISHERS,\n    QueryFacets.SERVICE_TYPES,\n    QueryFacets.CONCEPT_SCHEMES,\n    QueryFacets.VISIBILITY,\n    QueryFacets.CREATED_BY\n];\n\nconst SORT_OPTIONS_DEFAULT = [\n    { value:\"label,asc\",       label: \"Name (A-Z)\"              },\n    { value:\"label,desc\",      label: \"Name (Z-A)\"              },\n    { value:\"type,asc\",        label: \"Type (A-Z)\"              },\n    { value:\"type,desc\",       label: \"Type (Z-A)\"              },\n    { value:\"modified,desc\",   label: \"Most recently modified\"  },\n    { value:\"modified,asc\",    label: \"Least recently modified\" },\n    { value:\"_score,desc\",     label: \"Relevance\"               }\n];\n\n\nclass Query {\n\n    constructor() {\n\n        this.defaultQuery = {\n            page: 0,\n            size: 10,\n            total: 0,\n            sort: \"modified,desc\",\n            fields: FIELDS_DEFAULT.slice(0),\n            includeFacets: FACETS_DEFAULT.slice(0)\n        };\n\n        this.query = {\n            page: 0,\n            size: 10,\n            total: 0,\n            sort: \"modified,desc\",\n            fields: FIELDS_DEFAULT.slice(0),\n            includeFacets: FACETS_DEFAULT.slice(0)\n        };\n\n    }\n\n\n\n    getQuery() {\n        let result = {};\n        for(let prop in this.query) {\n            let value = this.query[prop];\n            if(value === null || value === undefined)\n                continue;\n            if(typeof(value.push) !== 'undefined') {\n                value = value.join(',');\n            }\n            if(typeof(value) !== 'string' || value.length > 0)\n                result[prop] = value;\n        }\n        return result;\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    parameter(name, value) {\n        this.setParameter(name, value);\n        return this;\n    }\n\n    setParameter (name, value) {\n        if(value === null || value === undefined)\n            delete this.query[name];\n        else\n            this.query[name] = value;\n    }\n\n    getParameter (key) {\n        return this.getParameter(key);\n    }\n\n    applyParameters (obj) {\n        for(var p in obj) {\n            if(obj.hasOwnProperty(p)) {\n                this.setParameter(p, obj[p]);\n            }\n        }\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    q(text) {\n        this.setQ(text);\n        return this;\n    }\n\n    /**\n     * @param {string} text - free text query\n     */\n    setQ (text) {\n        this.setParameter(QueryParameters.QUERY, text);\n    }\n\n    getQ() {\n        return this.getParameter(QueryParameters.QUERY);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    keywords(text) {\n        this.setQ(text);\n        return this;\n    }\n\n    /**\n     * @param {string} text - free text query\n     */\n    setKeywords (text) {\n        if(text && typeof(text.push) !== 'undefined')\n            text = text.join(',');\n        this.setParameter(QueryParameters.KEYWORDS, text);\n    }\n\n    getKeywords() {\n        return this.getParameter(QueryParameters.KEYWORDS);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    uri (uri) {\n        this.setUri(uri);\n        return this;\n    }\n\n    setUri(uri) {\n        this.setParameter(QueryParameters.URI, uri);\n    }\n\n    getUri() {\n        return this.getParameter(QueryParameters.URI);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    types(types) {\n        this.setTypes(types);\n        return this;\n    }\n\n    /**\n     * @param {array[string]} types - name of class(es) to request\n     */\n    setTypes (types) {\n        if(types && types.push === 'undefined')\n            types = [types];\n        this.setParameter(QueryParameters.TYPES, types);\n    }\n\n    getTypes () {\n        return this.getParameter(QueryParameters.TYPES);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    createdBy(user) {\n        this.setCreatedBy(user);\n        return this;\n    }\n\n    /**\n     * @param {string} user - username\n     * @param {boolean} fireUpdate -\n     */\n    setCreatedBy (user) {\n        this.setParameter(QueryParameters.CREATED_BY, user);\n    }\n\n    getCreatedBy () {\n        return this.getParameter(QueryParameters.CREATED_BY);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    /**\n     * Specify a Theme or set of Themes to constrain results. By\n     * default, values are assumed to be theme identifiers. If using\n     * theme labels or theme uris, specify the optional second parameter\n     * to be either QueryParameters.THEMES_LABEL or QueryParameters.THEMES_URI\n     * respectively.\n     * @param {array[string]} themes - string or array of strings containing theme constraint\n     * @param {string} parameter - optional, to indicate the parameter to use\n     * @return {Query}\n     */\n    themes(themes, parameter) {\n        this.setThemes(themes, parameter);\n        return this;\n    }\n\n\n    /**\n     * Specify a Theme or set of Themes to constrain results. By\n     * default, values are assumed to be theme identifiers. If using\n     * theme labels or theme uris, specify the optional second parameter\n     * to be either QueryParameters.THEMES_LABEL or QueryParameters.THEMES_URI\n     * respectively.\n     * @param {array[string]} themes - theme or themes to constrain by\n     */\n    setThemes (themes, parameter) {\n        if(themes && themes.push === 'undefined')\n            themes = [themes];\n\n        //clear existing\n        this.setParameter(QueryParameters.THEMES_ID, null);\n        this.setParameter(QueryParameters.THEMES_LABEL, null);\n        this.setParameter(QueryParameters.THEMES_URI, null);\n\n        let param = parameter || QueryParameters.THEMES_ID;\n        this.setParameter(param, themes);\n    }\n\n    getThemes () {\n        return this.getParameter(QueryParameters.THEMES_ID) ||\n            this.getParameter(QueryParameters.THEMES_LABEL) ||\n            this.getParameter(QueryParameters.THEMES_URI);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    /**\n     * Specify a Publisher or set of Publishers to constrain results. By\n     * default, values are assumed to be theme identifiers. If using\n     * theme labels or theme uris, specify the optional second parameter\n     * to be either QueryParameters.PUBLISHERS_LABEL or QueryParameters.PUBLISHERS_URI\n     * respectively.\n     * @param {string} parameter - optional, to indicate the parameter to use\n     * @return {Query}\n     */\n    publishers(publishers, parameter) {\n        this.setPublishers(publishers, parameter);\n        return this;\n    }\n\n    /**\n     * Specify a Publisher or set of Publishers to constrain results. By\n     * default, values are assumed to be theme identifiers. If using\n     * theme labels or theme uris, specify the optional second parameter\n     * to be either QueryParameters.PUBLISHERS_LABEL or QueryParameters.PUBLISHERS_URI\n     * respectively.\n     * @param {array[string]} publishers - publishing orgs to constrain by\n     */\n    setPublishers (publishers, parameter) {\n        if(publishers && publishers.push === 'undefined')\n            publishers = [publishers];\n\n        //clear existing\n        this.setParameter(QueryParameters.PUBLISHERS_ID, null);\n        this.setParameter(QueryParameters.PUBLISHERS_LABEL, null);\n        this.setParameter(QueryParameters.PUBLISHERS_URI, null);\n\n        let param = parameter || QueryParameters.PUBLISHERS_ID;\n        this.setParameter(param, publishers);\n    }\n\n    getPublishers () {\n        return this.getParameter(QueryParameters.PUBLISHERS_ID) ||\n            this.getParameter(QueryParameters.PUBLISHERS_LABEL) ||\n            this.getParameter(QueryParameters.PUBLISHERS_URI);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    /**\n     * Specify the identifier of an Agent (Community, Group, etc) that\n     * uses items you wish to find in search results. By\n     * default, values are assumed to be theme identifiers. If using\n     * theme labels or theme uris, specify the optional second parameter\n     * to be either QueryParameters.USED_BY_LABEL or QueryParameters.USED_BY_URI\n     * respectively.\n     * @param {string} parameter - optional, to indicate the parameter to use\n     * @return {Query}\n     */\n    usedBy(ids, parameter) {\n        this.setUsedBy(ids, parameter);\n        return this;\n    }\n\n    /**\n     * Specify the identifier of an Agent (Community, Group, etc) that\n     * uses items you wish to find in search results. By\n     * default, values are assumed to be theme identifiers. If using\n     * theme labels or theme uris, specify the optional second parameter\n     * to be either QueryParameters.USED_BY_LABEL or QueryParameters.USED_BY_URI\n     * respectively.\n     * @param {array[string]} ids - publishing orgs to constrain by\n     */\n    setUsedBy (ids, parameter) {\n        if(ids && ids.push === 'undefined')\n            ids = [ids];\n\n        //clear existing\n        this.setParameter(QueryParameters.USED_BY_ID, null);\n        this.setParameter(QueryParameters.USED_BY_LABEL, null);\n        this.setParameter(QueryParameters.USED_BY_URI, null);\n\n        let param = parameter || QueryParameters.USED_BY_ID;\n        this.setParameter(param, ids);\n    }\n\n    getUsedBy () {\n        return this.getParameter(QueryParameters.USED_BY_ID) ||\n            this.getParameter(QueryParameters.USED_BY_LABEL) ||\n            this.getParameter(QueryParameters.USED_BY_URI);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    /**\n     * Specify a Concept Scheme or set of Concept Schemes to constrain results. By\n     * default, values are assumed to be theme identifiers. If using\n     * theme labels or theme uris, specify the optional second parameter\n     * to be either QueryParameters.SCHEMES_LABEL or QueryParameters.SCHEMES_URI\n     * respectively.\n     * @param {array[string]} schemes - schemes to constrain by\n     * @param {string} parameter - optional, to indicate the parameter to use\n     * @return {Query}\n     */\n    schemes(schemes, parameter) {\n        this.setSchemes(schemes, parameter);\n        return this;\n    }\n\n    /**\n     * Specify a Concept Scheme or set of Concept Schemes to constrain results. By\n     * default, values are assumed to be theme identifiers. If using\n     * theme labels or theme uris, specify the optional second parameter\n     * to be either QueryParameters.SCHEMES_LABEL or QueryParameters.SCHEMES_URI\n     * respectively.\n     * @param {array[string]} schemes - schemes to constrain by\n     * @param {string} parameter - optional, to indicate the parameter to use\n     */\n    setSchemes (schemes, parameter) {\n        if(schemes && schemes.push === 'undefined')\n            schemes = [schemes];\n\n        //clear existing\n        this.setParameter(QueryParameters.SCHEMES_ID, null);\n        this.setParameter(QueryParameters.SCHEMES_LABEL, null);\n        this.setParameter(QueryParameters.SCHEMES_URI, null);\n\n        let param = parameter || QueryParameters.SCHEMES_ID;\n        this.setParameter(param, schemes);\n    }\n\n    getSchemes() {\n        return this.getParameter(QueryParameters.SCHEMES) ||\n            this.getParameter(QueryParameters.SCHEMES_LABEL) ||\n            this.getParameter(QueryParameters.SCHEMES_URI);\n    }\n\n\n    // -----------------------------------------------------------\n\n    /**\n     *\n     */\n    serviceTypes(types) {\n        this.setServiceTypes(types);\n        return this;\n    }\n\n    /**\n     * @param {array[string]} types - ids\n     */\n    setServiceTypes (types) {\n        if(types && types.push === 'undefined')\n            types = [types];\n        this.setParameter(QueryParameters.SERVICE_TYPES, types);\n    }\n\n    getServiceTypes () {\n        return this.getParameter(QueryParameters.SERVICE_TYPES);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    visibility(vis) {\n        this.setVisibility(vis);\n        return this;\n    }\n\n    /**\n     * @param {string} visibility - one of 'public' or 'private'\n     * @param {boolean} fireUpdate\n     */\n    setVisibility (visibility) {\n        this.setParameter(QueryParameters.VISIBILITY, visibility);\n    }\n\n    getVisibility () {\n        this.getParameter(QueryParameters.VISIBILITY);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    modified(date, beforeOrAfter) {\n        this.setModified(date, beforeOrAfter);\n        return this;\n    }\n\n    /**\n     * @param {Date} date - date to compare against\n     * @param {boolean} beforeOrAfter - flag specifying which boundary condition (true = before, false = after)\n     * @param {boolean} fireUpdate - flag specifying whether to trigger update automatically\n     */\n    setModified (date, beforeOrAfter) {\n\n        //if no date was supplied, consider it \"unset\" for both properties\n        if(!date) {\n            this.setParameter(QueryParameters.MODIFIED_BEFORE, null);\n            this.setParameter(QueryParameters.MODIFIED_AFTER, null);\n            return;\n        }\n\n        let dir = beforeOrAfter && (beforeOrAfter === true || beforeOrAfter === \"true\");\n        let prop = dir ? QueryParameters.MODIFIED_BEFORE : QueryParameters.MODIFIED_AFTER;       //property being set\n        let oppProp = dir ? QueryParameters.MODIFIED_AFTER : QueryParameters.MODIFIED_BEFORE;    //unset opposite property\n        let arg = (date && date.getTime) ? date.getTime() : date;\n\n        this.setParameter(oppProp, null);\n        this.setParameter(prop, arg);\n    }\n\n    getModified () {\n        return  this.getParameter(QueryParameters.MODIFIED_BEFORE) ||\n                this.getParameter(QueryParameters.MODIFIED_AFTER);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    extent(bbox) {\n        this.setExtent(bbox);\n        return this;\n    }\n\n    /**\n     * @param {string} bboxStr - form of \"minx,miny,maxx,maxy\"\n     */\n    setExtent (bbox) {\n        if(bbox && typeof(bbox.toBboxString) !== 'undefined')\n            bbox = bbox.toBboxString();\n        this.setParameter(QueryParameters.EXTENT, bbox);\n    }\n\n    /**\n     * @return {string} bbox string or null if not set\n     */\n    getExtent () {\n        return this.getParameter(QueryParameters.EXTENT);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    begins(date) {\n        this.setBeginDate(date);\n        return this;\n    }\n\n    setBeginDate (date) {\n        if(date && date instanceof Date)\n            date = date.getTime();\n        this.setParameter(QueryParameters.BEGINS, date);\n    }\n\n    getBeginDate () {\n        let date = this.getParameter(this.parameter.BEGINS);\n        if(date) date = new Date(date);\n        return date;\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    ends(date) {\n        this.setEndDate(date);\n        return this;\n    }\n\n    setEndDate (date) {\n        if(date && date instanceof Date)\n            date = date.getTime();\n        this.setParameter(QueryParameters.ENDS, date);\n    }\n\n    getEndDate () {\n        let date = this.getParameter(this.parameter.ENDS);\n        if(date) date = new Date(date);\n        return date;\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    between(begin, end) {\n        this.setBetween(begin, end);\n        return this;\n    }\n\n    setBetween(begin, end) {\n        this.begins(begin);\n        this.ends(end);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    resourceTypes(types) {\n        this.setResourceTypes(types);\n        return this;\n    }\n\n    setResourceTypes(types) {\n        if(types && types.push === 'undefined')\n            types = [types];\n        this.setParameter(QueryParameters.RESOURCE_TYPE, types);\n    }\n\n    getResourceTypes() {\n        return this.getParameter(QueryParameters.RESOURCE_TYPE);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    facets(names) {\n        this.setFacets(names);\n        return this;\n    }\n\n    /*\n     * @param {array[string]} names - names of facets\n     */\n    setFacets (names) {\n        this.query.includeFacets = names;\n    }\n\n    getFacets() {\n        return this.query.includeFacets;\n    }\n\n    /**\n     * @param {string} name - name of facet to add\n     */\n    addFacet(name) {\n        let facets = (this.getFacets()||[]).push(name);\n        this.setFacets(facets);\n    }\n\n    /**\n     * @param {string} name - name of facet to remove\n     */\n    removeFacet(name) {\n        let facets = this.getFacets() || [];\n        let idx = facets.indexOf(name);\n        if(idx>=0) {\n            facets.splice(idx, 1);\n            this.setFacets(facets);\n        }\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    fields(fields) {\n        this.setFields(fields);\n        return this;\n    }\n\n    /**\n     * @param {array[string]} fields - list of field names to request for each search result\n     */\n    setFields (fields) {\n        if(fields && typeof(fields.push) === 'undefined')\n            fields = [fields];\n        this.query.fields = fields;\n    }\n\n    getFields() {\n        return this.query.fields;\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    /**\n     * @param {int} page - page of results to fetch\n     */\n    page (page) {\n        this.setPage(page);\n        return this;\n    }\n\n    setPage(page) {\n        if(isNaN(page) || page*1<0) return;\n        this.query.page = page*1;\n    }\n\n    getPage() {\n        return this.query.page;\n    }\n\n    nextPage() {\n        this.setPage(this.query.page+1);\n    }\n\n    previousPage() {\n        this.setPage(this.query.page-1);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    /**\n     * @param {int} size - page size to request\n     */\n    pageSize (size) {\n        this.setPageSize(size);\n        return this;\n    }\n\n    setPageSize (size) {\n        if(isNaN(size) || size*1<0) return;\n        this.query.size = size*1;\n    }\n\n    getPageSize() {\n        return this.query.size;\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    /**\n     * @param {string} sort - form of <field>,<dir> or just field name\n     * @param {string} order - optional, either 'asc' or 'desc'\n     */\n    sort (sort, order) {\n        this.setSort(sort, order);\n        return this;\n    }\n\n    /**\n     * @param {string} sort - form of <field>,<dir> or just field name\n     * @param {string} order - optional, either 'asc' or 'desc'\n     */\n     setSort(sort, order) {\n         order = (order && (order !== 'asc' || order !== 'desc')) ? 'desc' : order;\n         if(sort && sort.indexOf(',')<0)\n            sort = sort + ',' + order;\n         this.query.sort = sort;\n    }\n\n    getSort() {\n        return this.query.sort;\n    }\n\n    getSortField() {\n        return this.query.sort.split(',')[0];\n    }\n\n    getSortOrder() {\n        return this.query.sort.split(',')[1] === 'asc';\n    }\n\n    /**\n     * @return {array} list of key-value pairs of sort options\n     */\n    getSortOptions() {\n        return SORT_OPTIONS_DEFAULT.slice(0);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    /**\n     *\n     */\n    clear () {\n        this.query = this.defaultQuery;\n    }\n}\n\nexport default Query;\n","\nimport Query from './query';\n\nexport default function() {\n    return new Query();\n}\n","\n\nimport Q from 'q';\nimport ItemTypes from '../shared/types';\nimport QueryFactory from '../shared/query-factory';\nimport ItemFactory from '../models/factory';\nimport ItemService from './item';\n\n/**\n * GeoPlatform Service service\n * service for working with the GeoPlatform API to\n * retrieve and manipulate service objects.\n *\n * @see ItemService\n */\n\nclass ServiceService extends ItemService {\n\n    constructor(url, httpClient) {\n        super(url, httpClient);\n    }\n\n    setUrl(baseUrl) {\n        super.setUrl(baseUrl);\n        this.baseUrl = baseUrl + '/api/services';\n    }\n\n    /**\n     * Fetch metadata from the specified GeoPlatform Service's\n     * web-accessible implementation using either GetCapabilities\n     * or ESRI documentInfo.\n     * @param {Object} service - GeoPlatform Service object\n     * @param {Object} options - optional set of request options to apply to xhr request\n     * @return {Promise} resolving service metadata\n     */\n    about( service, options ) {\n\n        return Q.resolve( service )\n        .then( svc => {\n            if(!svc) {\n                let err = new Error(\"Must provide service to get metadata about\");\n                err.status = 400;\n                err.error = \"Bad Request\";\n                throw err;\n            }\n            let opts = this.buildRequest({\n                method:'POST', url:this.baseUrl + '/about', data:svc, options:options\n            });\n            return this.execute(opts);\n        })\n        .catch(e => this._onError(e, \"ServiceService.about() - Error describing service\") );\n    }\n\n\n\n    /**\n     * @param {Object} options - optional set of request options to apply to request\n     * @return {Promise} resolving service types\n     */\n    types (options) {\n\n        let query = QueryFactory()\n        .types(ItemTypes.STANDARD)\n        .resourceTypes('ServiceType')\n        .pageSize(50)\n        .getQuery();\n\n        return Q.resolve( query )\n        .then( (params) => {\n            let url = this.apiBase + '/api/items';\n            let opts = this.buildRequest({\n                method:'GET', url:url, params:params, options:options\n            });\n            return this.execute(opts);\n        })\n        .then(response => response.results)\n        .catch(e => this._onError(e, \"ServiceService.types() - Error fetching service types\") );\n    }\n\n\n    /**\n     * @param {Object} service - GP Service definition\n     * @param {Object} options - optional set of request options to apply to request\n     * @return {Promise} resolving imported service\n     */\n    import (service, options) {\n\n        return Q.resolve( service )\n        .then( svc => {\n\n            if(svc.toJson) {\n                //if passed an ItemModel instance, convert to JSON\n                svc = svc.toJson();\n            }\n\n            let url = this.baseUrl + '/import';\n            let opts = this.buildRequest({\n                method:'POST', url:url, data:svc, options:options\n            });\n            return this.execute(opts);\n        })\n        .then(obj => ItemFactory(obj))\n        .catch(e => this._onError(e, \"ServiceService.import() - Error importing service\") );\n    }\n\n\n    /**\n     * @param {string} id - identifier of GP service to harvest layers for\n     * @param {Object} options - optional set of request options to apply to request\n     * @return {Promise} resolving service layers\n     */\n    harvest (id, options) {\n\n        return Q.resolve( id )\n        .then( id => {\n            let url = this.baseUrl + '/' + id + '/harvest';\n            let opts = this.buildRequest({\n                method:'GET', url:url, options:options\n            });\n            return this.execute(opts);\n        })\n        .catch(e => this._onError(e, \"ServiceService.harvest() - Error harvesting layers from service\") );\n\n    }\n\n    /**\n     * @param {string} id - identifier of GP service to live test\n     * @param {Object} options - optional set of request options to apply to request\n     * @return {Promise} resolving service statistics\n     */\n    liveTest (id, options) {\n\n        return Q.resolve( id )\n        .then( id => {\n            let url = this.baseUrl + '/' + id + '/test';\n            let opts = this.buildRequest({\n                method:'GET', url:url, options:options\n            });\n            return this.execute(opts);\n        })\n        .catch(e => this._onError(e, \"ServiceService.liveTest() - Error testing service\") );\n    }\n\n    /**\n     * @param {string} id - identifier of GP service to fetch statistics about\n     * @param {Object} options - optional set of request options to apply to request\n     * @return {Promise} resolving service statistics\n     */\n    statistics (id, options) {\n        return Q.resolve( id )\n        .then( id => {\n            let url = this.baseUrl + '/' + id + '/statistics';\n            let opts = this.buildRequest({\n                method:'GET', url:url, options:options\n            });\n            return this.execute(opts);\n        })\n        .catch(e => this._onError(e, \"ServiceService.statistics() - Error getting service statistics\") );\n    }\n\n}\n\nexport default ServiceService;\n","\nimport Q from 'q';\nimport ItemService from './item';\n\n/**\n * GeoPlatform Map service\n * service for working with the GeoPlatform API to\n * retrieve and manipulate map objects.\n *\n * @see GeoPlatform.ItemService\n */\n\nclass GalleryService extends ItemService {\n\n    constructor(url, httpClient) {\n        super(url, httpClient);\n    }\n\n    setUrl(baseUrl) {\n        super.setUrl(baseUrl);\n        this.baseUrl = baseUrl + '/api/galleries';\n    }\n\n    addItem (galleryId, itemObj, options) {\n        return Q.resolve( true )\n        .then( () => {\n            let url = this.baseUrl + '/' + galleryId + '/items';\n            let opts = this.buildRequest({\n                method:'POST', url:url, data: itemObj, options:options\n            });\n            return this.execute(opts);\n        })\n        .catch(e => this._onError(e, \"GalleryService.addItem() - Error adding item\") );\n    }\n\n    removeItem( galleryId, itemId, options) {\n        return Q.resolve( this.baseUrl + '/' + galleryId + '/items/' + itemId )\n        .then( url => {\n            let opts = this.buildRequest({\n                method:'DELETE', url:url, options:options\n            });\n            return this.execute(opts);\n        })\n        .then(response=>true)\n        .catch(e => this._onError(e, \"GalleryService.addItem() - Error adding item\") );\n    }\n\n}\n\nexport default GalleryService;\n","\n\nimport Q from 'q';\nimport ItemService from './item';\n\n/**\n * GeoPlatform Map service\n * service for working with the GeoPlatform API to\n * retrieve and manipulate Community objects.\n *\n * @see GeoPlatform.ItemService\n */\n\nclass CommunityService extends ItemService {\n\n    constructor(url, httpClient) {\n        super(url, httpClient);\n    }\n\n    setUrl(baseUrl) {\n        super.setUrl(baseUrl);\n        this.baseUrl = baseUrl + '/api/communities';\n    }\n\n}\n\nexport default CommunityService;\n","\n\nimport Q from 'q';\nimport BaseService from './base';\n\nconst METHODS = [\"GET\", \"POST\", \"PUT\", \"DELETE\", \"PATCH\"];\n\n\nclass UtilsService extends BaseService {\n\n    constructor(url, httpClient) {\n        super(url, httpClient);\n    }\n\n    setUrl(baseUrl) {\n        this.baseUrl = baseUrl;\n    }\n\n    /**\n     * @param {string} property - optional capa property to specifically request\n     * @param {Object} query - optional query parameters to include with request\n     * @param {Object} options - optional config to send with http request\n     * @return {Promise} resolving capabilities object\n     */\n    capabilities (property, query, options) {\n\n        let url = this.baseUrl + '/api/capabilities';\n        if(property)\n            url += '/' + property;\n\n        return Q.resolve( url )\n        .then( (url) => {\n            let opts = this.buildRequest({\n                method:\"GET\", url:url, params:query||{}, options:options\n            });\n            return this.execute(opts);\n        })\n        .catch(e => this._onError(e, \"UtilsService.capabilities() - Error getting capabilities\") );\n    }\n\n    /**\n     * @param {File} file\n     * @param {string} format\n     * @param {Object} options\n     * @return {Promise}\n     */\n    parseFile (file, format, options) {\n\n        var url = this.baseUrl + '/api/utils/parse';\n\n        return Q.resolve( url )\n        .then( url => {\n\n            let opts = this.buildRequest({\n                method:\"POST\",  url:url,\n                data: { format: format },\n                file: file,\n                formData: true,   //NodeJS (RequestJS)\n                options: options\n            });\n            return this.execute(opts);\n        })\n        .then( response => response )\n        .catch(e => {\n            let err = new Error(`UtilsService.parseFile() - Error parsing file: ${e.message}`);\n            return Q.reject(err);\n        });\n    }\n\n    /* ----------------------------------------------------------- */\n\n    /**\n     * @param {string} method - one of \"GET\", \"POST\", \"PUT\", \"DELETE\", \"PATCH\"\n     * @param {string} url - destination of xhr request\n     * @param {Object} params - object to be sent with request as query parameters\n     * @param {Object} data - object to be sent with request as body\n     * @param {Object} options - optional object defining request options\n     * @return {Object} request options for xhr\n     */\n    buildRequest (options) {\n\n        if(this.httpMethods.indexOf(options.method)<0) {\n            let err = new Error(`Unsupported HTTP method ${options.method}`);\n            err.status = 400;\n            err.error = \"Bad Request\";\n            throw err;\n        }\n\n        if(!options.url) {\n            let err = new Error(`Must specify a URL for HTTP requests`);\n            err.status = 400;\n            err.error = \"Bad Request\";\n            throw err;\n        }\n\n        options.timeout = this.timeout;\n\n        return this.createRequestOpts(options);\n    }\n\n    createRequestOpts(options) {\n        return this.client.createRequestOpts(options);\n    }\n\n    execute(opts) {\n        return this.client.execute(opts);\n    }\n\n}\n\nexport default UtilsService;\n","\nimport QueryParameters from './parameters';\n\nconst SORT_OPTIONS_DEFAULT = [\n    { value:\"label,asc\",       label: \"Name (A-Z)\"              },\n    { value:\"label,desc\",      label: \"Name (Z-A)\"              },\n    { value:\"type,asc\",        label: \"Type (A-Z)\"              },\n    { value:\"type,desc\",       label: \"Type (Z-A)\"              },\n    { value:\"modified,desc\",   label: \"Most recently modified\"  },\n    { value:\"modified,asc\",    label: \"Least recently modified\" },\n    { value:\"_score,desc\",     label: \"Relevance\"               }\n];\n\n\nclass KGQuery {\n\n    constructor() {\n\n        this.defaultQuery = {\n            page: 0,\n            size: 10,\n            sort: \"modified,desc\"\n        };\n\n        this.query = {\n            page: 0,\n            size: 10,\n            sort: \"modified,desc\"\n        };\n\n    }\n\n\n\n    getQuery() {\n        let result = {};\n        for(let prop in this.query) {\n            let value = this.query[prop];\n            if(value !== null && typeof(value.push) !== 'undefined') {\n                value = value.join(',');\n            }\n            result[prop] = value;\n        }\n        return result;\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    parameter(name, value) {\n        this.setParameter(name, value);\n        return this;\n    }\n\n    setParameter (name, value) {\n        if(value === null || value === undefined)\n            delete this.query[name];\n        else\n            this.query[name] = value;\n    }\n\n    getParameter (key) {\n        return this.getParameter(key);\n    }\n\n    applyParameters (obj) {\n        for(var p in obj) {\n            if(obj.hasOwnProperty(p)) {\n                this.setParameter(p, obj[p]);\n            }\n        }\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    q(text) {\n        this.setQ(text);\n        return this;\n    }\n\n    /**\n     * @param {string} text - free text query\n     */\n    setQ (text) {\n        this.setParameter(QueryParameters.QUERY, text);\n    }\n\n    getQ() {\n        return this.getParameter(QueryParameters.QUERY);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    /**\n     * @param {array[string]} types - KG classifiers for which concepts should be returned\n     */\n    classifiers(types) {\n        this.setClassifiers(types);\n        return this;\n    }\n\n    /**\n     * @param {array[string]} types - KG classifiers for which concepts should be returned\n     */\n    setClassifiers (types) {\n        if(types && types.push === 'undefined')\n            types = [types];\n        this.setParameter(QueryParameters.TYPES, types);\n    }\n\n    /**\n     * @return {array[string]} KG classifiers for which concepts should be returned\n     */\n    getClassifiers () {\n        return this.getParameter(QueryParameters.TYPES);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    /**\n     * Specify the Item object model type name(s) for which\n     * recommended concepts should be returned. Note: this\n     * query parameter is not the same as the GeoPlatform.Query.types()\n     * query parameter (they map to different HTTP request parameters).\n     * @param {array[string]} objTypes - Item object type names\n     */\n    types(objTypes) {\n        this.setTypes(objTypes);\n        return this;\n    }\n\n    /**\n     * Specify the Item object model type name(s) for which\n     * recommended concepts should be returned. Note: this\n     * query parameter is not the same as the GeoPlatform.Query.setTypes()\n     * query parameter (they map to different HTTP request parameters).\n     * @param {array[string]} objTypes - Item object type names\n     */\n    setTypes (objTypes) {\n        if(objTypes && objTypes.push === 'undefined')\n            objTypes = [objTypes];\n        this.setParameter(QueryParameters.FOR_TYPES, objTypes);\n    }\n\n    /**\n     * Get the Item object model type name(s) for which\n     * recommended concepts should be returned. Note: this\n     * query parameter is not the same as the GeoPlatform.Query.getTypes()\n     * query parameter (they map to different HTTP request parameters).\n     * @return {array[string]} Item object type names\n     */\n    getTypes () {\n        return this.getParameter(QueryParameters.FOR_TYPES);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    /**\n     * @param {int} page - page of results to fetch\n     */\n    page (page) {\n        this.setPage(page);\n        return this;\n    }\n\n    setPage(page) {\n        if(isNaN(page) || page*1<0) return;\n        this.query.page = page*1;\n    }\n\n    getPage() {\n        return this.query.page;\n    }\n\n    nextPage() {\n        this.setPage(this.query.page+1);\n    }\n\n    previousPage() {\n        this.setPage(this.query.page-1);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    /**\n     * @param {int} size - page size to request\n     */\n    pageSize (size) {\n        this.setPageSize(size);\n        return this;\n    }\n\n    setPageSize (size) {\n        if(isNaN(size) || size*1<0) return;\n        this.query.size = size*1;\n    }\n\n    getPageSize() {\n        return this.query.size;\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    /**\n     * @param {string} sort - form of <field>,<dir> or just field name\n     * @param {string} order - optional, either 'asc' or 'desc'\n     */\n    sort (sort, order) {\n        this.setSort(sort, order);\n        return this;\n    }\n\n    /**\n     * @param {string} sort - form of <field>,<dir> or just field name\n     * @param {string} order - optional, either 'asc' or 'desc'\n     */\n     setSort(sort, order) {\n         order = (order && (order !== 'asc' || order !== 'desc')) ? 'desc' : order;\n         if(sort && sort.indexOf(',')<0)\n            sort = sort + ',' + order;\n         this.query.sort = sort;\n    }\n\n    getSort() {\n        return this.query.sort;\n    }\n\n    getSortField() {\n        return this.query.sort.split(',')[0];\n    }\n\n    getSortOrder() {\n        return this.query.sort.split(',')[1] === 'asc';\n    }\n\n    /**\n     * @return {array} list of key-value pairs of sort options\n     */\n    getSortOptions() {\n        return SORT_OPTIONS_DEFAULT.slice(0);\n    }\n\n\n    // -----------------------------------------------------------\n\n\n    /**\n     *\n     */\n    clear () {\n        this.query = this.defaultQuery;\n    }\n}\n\nexport default KGQuery;\n","\nimport Q from 'q';\nimport BaseService from './base';\nimport QueryParameters from '../shared/parameters';\n\n\nclass KGService extends BaseService {\n\n    constructor(url, httpClient) {\n        super(url, httpClient);\n    }\n\n    setUrl(baseUrl) {\n        super.setUrl(baseUrl);\n        this.baseUrl = baseUrl + '/api/recommender';\n    }\n\n    /**\n     * @param {Object} query - optional query parameters to include with request\n     * @param {Object} options - optional config to send with http request\n     * @return {Promise} resolving recommended concepts as search results\n     */\n    suggest (query, options) {\n        let url = this.baseUrl + '/suggest';\n        return this._search(url, query, options)\n        .catch(e => {\n            let err = new Error(`KGService.suggest() - Error suggesting concepts: ${e.message}`);\n            return Q.reject(err);\n        });\n    }\n\n\n    /**\n     * @param {Object} query - optional query parameters to include with request\n     * @param {Object} options - optional config to send with http request\n     * @return {Promise} resolving concept types as search results\n     */\n    types (query, options) {\n        let url = this.baseUrl + '/types';\n        return this._search(url, query, options)\n        .catch(e => {\n            let err = new Error(`KGService.types() - Error searching types: ${e.message}`);\n            return Q.reject(err);\n        });\n    }\n\n\n\n    /**\n     * @param {Object} query - optional query parameters to include with request\n     * @param {Object} options - optional config to send with http request\n     * @return {Promise} resolving concept sources as search results\n     */\n    sources (query, options) {\n        let url = this.baseUrl + '/sources';\n        return this._search(url, query, options)\n        .catch(e => {\n            let err = new Error(`KGService.sources() - Error searching sources: ${e.message}`);\n            return Q.reject(err);\n        });\n    }\n\n\n\n\n\n    /* ----------------------------------------------------------- */\n\n\n    /**\n     * internal method used by exposed methods\n     */\n    _search (url, query, options) {\n        return Q.resolve( true )\n        .then( () => {\n\n            if(query && typeof(query.getQuery) !== 'undefined') {\n                //if passed a GeoPlatform.Query object,\n                // convert to parameters object\n                query = query.getQuery();\n            }\n\n            let opts = this.buildRequest({\n                method:\"GET\", url:url, params:query, options:options\n            });\n            return this.execute(opts);\n        });\n    }\n\n\n\n    /**\n     * @param {string} method - one of \"GET\", \"POST\", \"PUT\", \"DELETE\", \"PATCH\"\n     * @param {string} url - destination of xhr request\n     * @param {Object} params - object to be sent with request as query parameters\n     * @param {Object} data - object to be sent with request as body\n     * @param {Object} options - optional object defining request options\n     * @return {Object} request options for xhr\n     */\n    buildRequest (options) {\n\n        if(this.httpMethods.indexOf(options.method)<0)\n            throw new Error(`Unsupported HTTP method ${options.method}`);\n\n        if(!options.url)\n            throw new Error(`Must specify a URL for HTTP requests`);\n\n        options.timeout = this.timeout;\n\n        return this.createRequestOpts(options);\n    }\n\n    createRequestOpts(options) {\n        return this.client.createRequestOpts(options);\n    }\n\n    execute(opts) {\n        return this.client.execute(opts);\n    }\n\n}\n\nexport default KGService;\n","\n\n\nexport default  {\n    PURPOSE             : 'purposes',\n    FUNCTION            : 'functions',\n    TOPIC_PRIMARY       : 'primaryTopics',\n    TOPIC_SECONDARY     : 'secondaryTopics',\n    SUBJECT_PRIMARY     : 'primarySubjects',\n    SUBJECT_SECONDARY   : 'secondarySubjects',\n    COMMUNITY           : 'communities',\n    AUDIENCE            : 'audiences',\n    PLACE               : 'places',\n    CATEGORY            : 'categories'\n};\n","\nimport ItemTypes from '../shared/types';\nimport ItemService from './item';\nimport LayerService from './layer';\nimport ServiceService from './service';\nimport GalleryService from './gallery';\nimport CommunityService from './community';\nimport DatasetService from './dataset';\nimport MapService from './map';\n\n/**\n * @param {any} arg - string type or object with type property\n * @param {string} baseUrl - base endpoint of GeoPlatform API\n * @return {ItemService}\n */\nconst ServiceFactory = function(arg, baseUrl, httpClient) {\n    let type = (typeof(arg) === 'string') ?\n        arg : (arg && arg.type ? arg.type : null);\n    if(!type) throw new Error(\"Must provide a type or object with a type specified\");\n    if(!baseUrl) throw new Error(\"Must provide a base url\");\n    if(!httpClient) throw new Error(\"Must provide an http client to use to make requests\");\n    switch(type) {\n        case ItemTypes.LAYER:   return new LayerService(  baseUrl, httpClient);\n        case ItemTypes.SERVICE: return new ServiceService(baseUrl, httpClient);\n        case ItemTypes.MAP:     return new MapService(    baseUrl, httpClient);\n        case ItemTypes.GALLERY: return new GalleryService(baseUrl, httpClient);\n        case ItemTypes.COMMUNITY: return new CommunityService(baseUrl, httpClient);\n        case ItemTypes.DATASET: return new DatasetService(baseUrl, httpClient);\n        default:                return new ItemService(   baseUrl, httpClient);\n    }\n};\n\nexport default ServiceFactory;\n","export default {\n\n    //ualUrl: '...',\n    //appId: '...',\n\n    configure: function(options) {\n        Object.assign(this, options);\n    }\n};\n"],"names":["HttpClientBase","options","setTimeout","timeout","setAuthToken","token","arg","Error","opts","JQueryHttpClient","method","url","json","dataType","params","data","processData","contentType","headers","Authorization","o","hasOwnProperty","jQuery","d","Q","defer","success","resolve","error","xhr","status","message","reject","ajax","promise","NGHttpClient","angular","$http","useXDomain","injector","get","then","response","catch","NodeHttpClient","qs","file","fs","require","formData","value","createReadStream","path","filename","originalFilename","Object","assign","body","auth","deferred","request","checkAndHandleError","e","props","code","connect","statusCode","babelHelpers.typeof","sidx","indexOf","eidx","item","substring","uri","pathname","JSON","parse","err","DATASET","SERVICE","LAYER","MAP","GALLERY","CONTACT","ORGANIZATION","COMMUNITY","CONCEPT","CONCEPT_SCHEME","STANDARD","BaseService","httpClient","setUrl","client","httpMethods","baseUrl","apiBase","milliseconds","prefixMsg","title","msg","ItemProperties","ID","key","URI","TYPE","CREATED","MODIFIED","LAST_MODIFIED_BY","IDENTIFIERS","multi","ALTERNATE_TITLES","CREATED_BY","LABEL","TITLE","DESCRIPTION","KEYWORDS","LANDING_PAGE","STATUS","VISIBILITY","THEMES","type","PUBLISHERS","CONTACTS","CONTRIBUTORS","DISTRIBUTIONS","RESOURCE_TYPES","CLASSIFIERS","HREF","SERVICE_TYPE","DATASETS","LAYER_TYPE","LAYER_NAME","LEGEND","SERVICES","BASE_LAYER","MAP_LAYERS","THUMBNAIL","ANNOTATIONS","GALLERY_ITEMS","FULL_NAME","ORGANIZATION_NAME","POSITION_TITLE","EMAIL","TELEPHONE","ADDRESS","NAME","PARENT_ORGANIZATION","mapArray","arr","fn","len","length","res","i","BaseModel","_data","property","undefined","newValue","isItem","push","toItem","v","stringify","slice","concat","isObj","current","removeObject","removeValue","id","k","idx","each","p","splice","set","obj","itemFactory","getFactory","result","console","log","ItemFactory","parentJson","isMulti","map","toJson","ItemModel","default","setUri","setIdentifiers","addTo","removeFrom","setAlternateTitles","setCreatedBy","setLabel","setDescription","setKeywords","setLandingPage","setStatus","setVisibility","setThemes","setPublishers","setContacts","setContributors","setResourceTypes","setDistributions","setClassifiers","getType","getLabel","propertyToJson","DatasetModel","ItemTypes","setServices","ServiceModel","setHref","setServiceType","setDatasets","LayerModel","setLayerType","setLayerName","setLegend","LayerStateProperties","LAYER_ID","OPACITY","MapModel","layers","getLayers","setLayers","setThumbnail","setBaseLayer","states","toLayerState","state","layerId","layer","filter","ls","setAnnotations","fromLayerState","object","getId","layer_id","opacity","visibility","GalleryItemProperties","ASSET_ID","ASSET","ASSET_TYPE","GalleryModel","items","getItems","setItems","toGalleryItem","assetId","newPosition","fromGalleryItem","asset","CommunityModel","ADDRESS_STREET","ADDRESS_CITY","ADDRESS_STATE","ADDRESS_ZIP","ADDRESS_COUNTRY","ContactModel","setFullName","setOrgName","setPosition","setEmail","setPhone","setAddress","setStreet","address","getAddress","setCity","setState","setZipCode","setCountry","OrganizationModel","setName","setParentOrganization","ConceptModel","setScheme","ConceptSchemeModel","factory","ItemService","buildRequest","execute","_onError","itemObj","patch","getQuery","format","isFile","ro","createRequestOpts","DatasetService","MapService","LayerService","req","keys","missing","find","srs","bbox","height","width","info_format","x","y","j","TYPES","QUERY","CONTRIBUTED_BY","CREATOR","SVC_TYPES","THEMES_ID","THEMES_LABEL","THEMES_URI","PUBLISHERS_LABEL","PUBLISHERS_URI","USED_BY_ID","USED_BY_LABEL","USED_BY_URI","SCHEMES_ID","SCHEMES_LABEL","SCHEMES_URI","EXTENT","MODIFIED_BEFORE","MODIFIED_AFTER","BEGINS","ENDS","RESOURCE_TYPE","FOR_TYPES","SERVICE_TYPES","CONCEPT_SCHEMES","USED_BY","FIELDS_DEFAULT","FACETS_DEFAULT","QueryFacets","SORT_OPTIONS_DEFAULT","label","Query","defaultQuery","page","size","total","sort","fields","includeFacets","query","prop","join","name","setParameter","getParameter","text","setQ","QueryParameters","types","setTypes","user","themes","parameter","param","publishers","PUBLISHERS_ID","ids","setUsedBy","schemes","setSchemes","SCHEMES","setServiceTypes","vis","date","beforeOrAfter","setModified","dir","oppProp","getTime","setExtent","toBboxString","setBeginDate","Date","setEndDate","begin","end","setBetween","begins","ends","names","setFacets","facets","getFacets","setFields","setPage","isNaN","setPageSize","order","setSort","split","ServiceService","service","svc","QueryFactory","resourceTypes","pageSize","results","GalleryService","galleryId","itemId","CommunityService","UtilsService","KGQuery","objTypes","KGService","_search","PURPOSE","FUNCTION","TOPIC_PRIMARY","TOPIC_SECONDARY","SUBJECT_PRIMARY","SUBJECT_SECONDARY","AUDIENCE","PLACE","CATEGORY","ServiceFactory","configure"],"mappings":"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"}