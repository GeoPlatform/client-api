"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){"function"==typeof define&&define.amd?define(["angular","q","HttpClientBase"],function(n,o,r){return t.NGHttpClient=e(angular,o,r)}):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=t.NGHttpClient=e(require("angular"),require("q"),require("./client")):GeoPlatform.NGHttpClient=e(angular,Q,HttpClientBase)}(window,function(t,e,n){return function(n){function o(e){_classCallCheck(this,o);var n=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));if(void 0===t)throw new Error("Angular not defined");return e.$http&&(n.$http=e.$http),n}return _inherits(o,n),_createClass(o,[{key:"createRequestOpts",value:function(t){var e={method:t.method,url:t.url,timeout:t.timeout||this.timeout};if(!0===t.json&&(e.dataType="json"),t.params&&(e.params=t.params),t.data&&(e.data=t.data),this.token){var n=this.token();n&&(e.headers=e.headers||{},e.headers.Authorization="Bearer "+n,e.useXDomain=!0)}if(t.options)for(var o in t.options)t.options.hasOwnProperty(o)&&(e[o]=t.options[o]);return e}},{key:"execute",value:function(n){var o=this.$http||t.injector(["ng"]).get("$http");return e.resolve(o).then(function(t){if(void 0===t)throw new Error("Angular $http not resolved");return t(n)}).then(function(t){return t.data}).catch(function(t){return e.reject(t.data)})}}]),o}(n)});